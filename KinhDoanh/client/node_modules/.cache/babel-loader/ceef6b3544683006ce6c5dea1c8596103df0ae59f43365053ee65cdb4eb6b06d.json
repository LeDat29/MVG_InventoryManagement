{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Documents/GitHub/MVG_InventoryManagement/KinhDoanh/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * Permission Manager Component\r\n * Quản lý quyền hạn user vào từng dự án và chức năng\r\n */import React,{useState,useEffect,useCallback}from'react';import{Modal,Button,Form,Table,Badge,Alert,Tabs,Tab}from'react-bootstrap';import'./PermissionManager.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SYSTEM_PERMISSIONS=[{key:'all',label:'Toàn quyền',description:'Quyền admin - truy cập tất cả',color:'danger'},{key:'project_view',label:'Xem dự án',description:'Xem thông tin dự án',color:'info'},{key:'project_edit',label:'Sửa dự án',description:'Chỉnh sửa thông tin dự án',color:'warning'},{key:'project_delete',label:'Xóa dự án',description:'Xóa dự án (nguy hiểm)',color:'danger'},{key:'customer_view',label:'Xem khách hàng',description:'Xem thông tin khách hàng',color:'info'},{key:'customer_edit',label:'Sửa khách hàng',description:'Chỉnh sửa khách hàng',color:'warning'},{key:'contract_view',label:'Xem hợp đồng',description:'Xem hợp đồng',color:'info'},{key:'contract_edit',label:'Sửa hợp đồng',description:'Chỉnh sửa hợp đồng',color:'warning'},{key:'document_view',label:'Xem tài liệu',description:'Xem tài liệu',color:'info'},{key:'document_upload',label:'Upload tài liệu',description:'Upload file tài liệu',color:'warning'},{key:'user_view',label:'Xem users',description:'Xem danh sách users',color:'info'},{key:'user_manage',label:'Quản lý users',description:'Tạo/sửa/xóa users',color:'danger'},{key:'report_view',label:'Xem báo cáo',description:'Xem các báo cáo',color:'info'},{key:'ai_use',label:'Sử dụng AI',description:'Sử dụng AI chatbot',color:'primary'}];const PROJECT_PERMISSIONS=[{key:'view',label:'Xem',description:'Xem thông tin dự án',color:'info'},{key:'edit',label:'Sửa',description:'Chỉnh sửa dự án',color:'warning'},{key:'manage_zones',label:'Quản lý zones',description:'Thêm/sửa/xóa zones',color:'primary'},{key:'manage_contracts',label:'Quản lý hợp đồng',description:'Tạo/sửa hợp đồng',color:'success'},{key:'view_financials',label:'Xem tài chính',description:'Xem thông tin tài chính',color:'warning'}];function PermissionManager(_ref){let{user,userId,show,onHide,onSave}=_ref;const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');// System permissions\nconst[systemPermissions,setSystemPermissions]=useState([]);// Project assignments\nconst[projectAssignments,setProjectAssignments]=useState([]);const[availableProjects,setAvailableProjects]=useState([]);const[selectedProject,setSelectedProject]=useState('');const[/* setProjectPermissions */,]=useState([]);const[activeTab,setActiveTab]=useState('system');// Load data khi mở modal\nuseEffect(()=>{const currentUserId=userId||(user===null||user===void 0?void 0:user.id);if(show&&currentUserId){loadUserPermissions();loadAvailableProjects();}},[show,userId,user===null||user===void 0?void 0:user.id]);// Removed loadUserPermissions dependency\nconst loadUserPermissions=useCallback(async()=>{try{const currentUserId=userId||(user===null||user===void 0?void 0:user.id);console.log('Loading permissions for user ID:',currentUserId);if(!currentUserId){throw new Error('User ID not found');}const token=localStorage.getItem('token');const response=await fetch(\"/api/users/\".concat(currentUserId),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error(\"HTTP \".concat(response.status,\": \").concat(response.statusText));}const data=await response.json();console.log('User permissions data:',data);if(data.success){var _data$data,_data$data2;// System permissions\nconst userData=((_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.user)||data.data;setSystemPermissions(userData.permissions||[]);// Project permissions\nsetProjectAssignments(((_data$data2=data.data)===null||_data$data2===void 0?void 0:_data$data2.project_permissions)||[]);}}catch(error){console.error('Error loading permissions:',error);setError('Không thể tải quyền hạn: '+error.message);}},[userId,user===null||user===void 0?void 0:user.id]);const loadAvailableProjects=async()=>{try{const token=localStorage.getItem('token');console.log('Loading available projects...');const response=await fetch('/api/projects?limit=1000',{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();if(data.success){var _data$data$projects;setAvailableProjects(data.data.projects||[]);console.log('Projects loaded:',((_data$data$projects=data.data.projects)===null||_data$data$projects===void 0?void 0:_data$data$projects.length)||0);}}else{console.warn('Projects API not available:',response.status);// Projects API might not be implemented yet, use empty array\nsetAvailableProjects([]);}}catch(error){console.warn('Error loading projects:',error.message);// Don't show error for projects as it's optional\nsetAvailableProjects([]);}};const handleSystemPermissionToggle=permissionKey=>{if(systemPermissions.includes('all')&&permissionKey!=='all'){// Nếu có quyền 'all', không cho toggle individual permissions\nreturn;}setSystemPermissions(prev=>{if(permissionKey==='all'){// Toggle 'all' sẽ clear tất cả permissions khác\nreturn prev.includes('all')?[]:['all'];}if(prev.includes(permissionKey)){return prev.filter(p=>p!==permissionKey);}else{return[...prev,permissionKey];}});};const handleAddProjectAssignment=()=>{if(!selectedProject){setError('Vui lòng chọn dự án');return;}// Check nếu đã assign rồi\nif(projectAssignments.some(pa=>pa.project_id===parseInt(selectedProject))){setError('Dự án này đã được assign');return;}const project=availableProjects.find(p=>p.id===parseInt(selectedProject));setProjectAssignments(prev=>[...prev,{project_id:parseInt(selectedProject),project_name:project.name,permissions:['view']// Default permission\n}]);setSelectedProject('');setError('');};const handleRemoveProjectAssignment=projectId=>{setProjectAssignments(prev=>prev.filter(pa=>pa.project_id!==projectId));};const handleProjectPermissionToggle=(projectId,permissionKey)=>{setProjectAssignments(prev=>prev.map(pa=>{if(pa.project_id===projectId){const perms=pa.permissions||[];if(perms.includes(permissionKey)){return _objectSpread(_objectSpread({},pa),{},{permissions:perms.filter(p=>p!==permissionKey)});}else{return _objectSpread(_objectSpread({},pa),{},{permissions:[...perms,permissionKey]});}}return pa;}));};const handleSave=async()=>{setLoading(true);setError('');setSuccess('');try{const currentUserId=userId||(user===null||user===void 0?void 0:user.id);console.log('Saving permissions for user ID:',currentUserId);if(!currentUserId){throw new Error('User ID not found');}const token=localStorage.getItem('token');// Save system permissions\nconsole.log('Saving system permissions:',systemPermissions);const systemResponse=await fetch(\"/api/users/\".concat(currentUserId,\"/permissions\"),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({permissions:systemPermissions})});if(!systemResponse.ok){const errorData=await systemResponse.json().catch(()=>({}));throw new Error(errorData.message||'Không thể cập nhật quyền hệ thống');}// Save project assignments (if any)\nif(projectAssignments.length>0){console.log('Saving project permissions:',projectAssignments);const projectResponse=await fetch(\"/api/users/\".concat(currentUserId,\"/project-permissions\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({projects:projectAssignments.map(pa=>({project_id:pa.project_id,permissions:pa.permissions}))})});if(!projectResponse.ok){const errorData=await projectResponse.json().catch(()=>({}));throw new Error(errorData.message||'Không thể cập nhật quyền dự án');}}setSuccess('Cập nhật quyền hạn thành công!');setTimeout(()=>{if(onSave)onSave();onHide();},1500);}catch(error){console.error('Error saving permissions:',error);setError(error.message||'Có lỗi xảy ra khi lưu quyền hạn');}finally{setLoading(false);}};const hasAllPermission=systemPermissions.includes('all');return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,size:\"xl\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shield-lock\"}),\" Qu\\u1EA3n l\\xFD quy\\u1EC1n h\\u1EA1n\",user&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",style:{fontSize:'14px',marginTop:'4px'},children:[\"User: \",/*#__PURE__*/_jsx(\"strong\",{children:user.username}),\" - \",user.full_name]})]})}),/*#__PURE__*/_jsxs(Modal.Body,{style:{maxHeight:'70vh',overflowY:'auto'},children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",onClose:()=>setError(''),dismissible:true,children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),/*#__PURE__*/_jsxs(Tabs,{activeKey:activeTab,onSelect:setActiveTab,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"system\",title:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-gear-fill\"}),\" Quy\\u1EC1n h\\u1EC7 th\\u1ED1ng\",/*#__PURE__*/_jsx(Badge,{bg:\"primary\",className:\"ms-2\",children:systemPermissions.length})]}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"permission-matrix\",children:[hasAllPermission&&/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle-fill\"}),\" User n\\xE0y c\\xF3 quy\\u1EC1n \",/*#__PURE__*/_jsx(\"strong\",{children:\"ADMIN\"}),\" - truy c\\u1EADp t\\u1EA5t c\\u1EA3 ch\\u1EE9c n\\u0103ng\"]}),/*#__PURE__*/_jsxs(Table,{hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'50px'}}),/*#__PURE__*/_jsx(\"th\",{children:\"Quy\\u1EC1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'100px'},children:\"Tr\\u1EA1ng th\\xE1i\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:SYSTEM_PERMISSIONS.map(perm=>{const hasPermission=systemPermissions.includes(perm.key);const isDisabled=hasAllPermission&&perm.key!=='all';return/*#__PURE__*/_jsxs(\"tr\",{className:hasPermission?'table-active':'',children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",checked:hasPermission,onChange:()=>handleSystemPermissionToggle(perm.key),disabled:isDisabled})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:perm.label}),/*#__PURE__*/_jsx(Badge,{bg:perm.color,className:\"ms-2\",children:perm.key})]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-muted\",children:perm.description}),/*#__PURE__*/_jsx(\"td\",{children:hasPermission?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"C\\xF3 quy\\u1EC1n\"}):/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"Kh\\xF4ng\"})})]},perm.key);})})]})]})}),/*#__PURE__*/_jsxs(Tab,{eventKey:\"projects\",title:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-building\"}),\" Quy\\u1EC1n d\\u1EF1 \\xE1n\",/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"ms-2\",children:projectAssignments.length})]}),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"add-project-form mb-4 p-3 border rounded bg-light\",children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-circle\"}),\" Assign user v\\xE0o d\\u1EF1 \\xE1n\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2 align-items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Ch\\u1ECDn d\\u1EF1 \\xE1n\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedProject,onChange:e=>setSelectedProject(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Ch\\u1ECDn d\\u1EF1 \\xE1n --\"}),availableProjects.filter(p=>!projectAssignments.some(pa=>pa.project_id===p.id)).map(project=>/*#__PURE__*/_jsxs(\"option\",{value:project.id,children:[project.name,\" (\",project.code,\")\"]},project.id))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:handleAddProjectAssignment,disabled:!selectedProject,className:\"w-100\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus\"}),\" Th\\xEAm\"]})})]})]}),projectAssignments.length===0?/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle\"}),\" User ch\\u01B0a \\u0111\\u01B0\\u1EE3c assign v\\xE0o d\\u1EF1 \\xE1n n\\xE0o. S\\u1EED d\\u1EE5ng form b\\xEAn tr\\xEAn \\u0111\\u1EC3 assign.\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"project-assignments\",children:projectAssignments.map(pa=>{const project=availableProjects.find(p=>p.id===pa.project_id);return/*#__PURE__*/_jsxs(\"div\",{className:\"project-card mb-3 p-3 border rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-building\"}),\" \",pa.project_name||(project===null||project===void 0?void 0:project.name)]}),project&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Code: \",project.code]})]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>handleRemoveProjectAssignment(pa.project_id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash\"}),\" X\\xF3a\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"permissions-grid\",children:PROJECT_PERMISSIONS.map(perm=>{const hasPermission=(pa.permissions||[]).includes(perm.key);return/*#__PURE__*/_jsx(\"div\",{className:\"permission-item\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",id:\"\".concat(pa.project_id,\"-\").concat(perm.key),label:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:perm.label}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:perm.description})]}),checked:hasPermission,onChange:()=>handleProjectPermissionToggle(pa.project_id,perm.key)})},perm.key);})})]},pa.project_id);})})]})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onHide,disabled:loading,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSave,disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\"}),\"\\u0110ang l\\u01B0u...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-save\"}),\" L\\u01B0u thay \\u0111\\u1ED5i\"]})})]})]});}export default PermissionManager;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Modal","Button","Form","Table","Badge","Alert","Tabs","Tab","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SYSTEM_PERMISSIONS","key","label","description","color","PROJECT_PERMISSIONS","PermissionManager","_ref","user","userId","show","onHide","onSave","loading","setLoading","error","setError","success","setSuccess","systemPermissions","setSystemPermissions","projectAssignments","setProjectAssignments","availableProjects","setAvailableProjects","selectedProject","setSelectedProject","activeTab","setActiveTab","currentUserId","id","loadUserPermissions","loadAvailableProjects","console","log","Error","token","localStorage","getItem","response","fetch","concat","headers","ok","status","statusText","data","json","_data$data","_data$data2","userData","permissions","project_permissions","message","_data$data$projects","projects","length","warn","handleSystemPermissionToggle","permissionKey","includes","prev","filter","p","handleAddProjectAssignment","some","pa","project_id","parseInt","project","find","project_name","name","handleRemoveProjectAssignment","projectId","handleProjectPermissionToggle","map","perms","_objectSpread","handleSave","systemResponse","method","body","JSON","stringify","errorData","catch","projectResponse","setTimeout","hasAllPermission","size","centered","children","Header","closeButton","Title","className","style","fontSize","marginTop","username","full_name","Body","maxHeight","overflowY","variant","onClose","dismissible","activeKey","onSelect","eventKey","title","bg","hover","responsive","width","perm","hasPermission","isDisabled","Check","type","checked","onChange","disabled","Label","Select","value","e","target","code","onClick","Footer"],"sources":["C:/Users/Admin/Documents/GitHub/MVG_InventoryManagement/KinhDoanh/client/src/components/Users/PermissionManager.js"],"sourcesContent":["/**\r\n * Permission Manager Component\r\n * Quản lý quyền hạn user vào từng dự án và chức năng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Modal, Button, Form, Table, Badge, Alert, Tabs, Tab } from 'react-bootstrap';\r\nimport './PermissionManager.css';\r\n\r\nconst SYSTEM_PERMISSIONS = [\r\n  { key: 'all', label: 'Toàn quyền', description: 'Quyền admin - truy cập tất cả', color: 'danger' },\r\n  { key: 'project_view', label: 'Xem dự án', description: 'Xem thông tin dự án', color: 'info' },\r\n  { key: 'project_edit', label: 'Sửa dự án', description: 'Chỉnh sửa thông tin dự án', color: 'warning' },\r\n  { key: 'project_delete', label: 'Xóa dự án', description: 'Xóa dự án (nguy hiểm)', color: 'danger' },\r\n  { key: 'customer_view', label: 'Xem khách hàng', description: 'Xem thông tin khách hàng', color: 'info' },\r\n  { key: 'customer_edit', label: 'Sửa khách hàng', description: 'Chỉnh sửa khách hàng', color: 'warning' },\r\n  { key: 'contract_view', label: 'Xem hợp đồng', description: 'Xem hợp đồng', color: 'info' },\r\n  { key: 'contract_edit', label: 'Sửa hợp đồng', description: 'Chỉnh sửa hợp đồng', color: 'warning' },\r\n  { key: 'document_view', label: 'Xem tài liệu', description: 'Xem tài liệu', color: 'info' },\r\n  { key: 'document_upload', label: 'Upload tài liệu', description: 'Upload file tài liệu', color: 'warning' },\r\n  { key: 'user_view', label: 'Xem users', description: 'Xem danh sách users', color: 'info' },\r\n  { key: 'user_manage', label: 'Quản lý users', description: 'Tạo/sửa/xóa users', color: 'danger' },\r\n  { key: 'report_view', label: 'Xem báo cáo', description: 'Xem các báo cáo', color: 'info' },\r\n  { key: 'ai_use', label: 'Sử dụng AI', description: 'Sử dụng AI chatbot', color: 'primary' }\r\n];\r\n\r\nconst PROJECT_PERMISSIONS = [\r\n  { key: 'view', label: 'Xem', description: 'Xem thông tin dự án', color: 'info' },\r\n  { key: 'edit', label: 'Sửa', description: 'Chỉnh sửa dự án', color: 'warning' },\r\n  { key: 'manage_zones', label: 'Quản lý zones', description: 'Thêm/sửa/xóa zones', color: 'primary' },\r\n  { key: 'manage_contracts', label: 'Quản lý hợp đồng', description: 'Tạo/sửa hợp đồng', color: 'success' },\r\n  { key: 'view_financials', label: 'Xem tài chính', description: 'Xem thông tin tài chính', color: 'warning' }\r\n];\r\n\r\nfunction PermissionManager({ user, userId, show, onHide, onSave }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  \r\n  // System permissions\r\n  const [systemPermissions, setSystemPermissions] = useState([]);\r\n  \r\n  // Project assignments\r\n  const [projectAssignments, setProjectAssignments] = useState([]);\r\n  const [availableProjects, setAvailableProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState('');\r\n  const [, /* setProjectPermissions */] = useState([]);\r\n  \r\n  const [activeTab, setActiveTab] = useState('system');\r\n\r\n  // Load data khi mở modal\r\n\r\n  useEffect(() => {\r\n    const currentUserId = userId || user?.id;\r\n    if (show && currentUserId) {\r\n      loadUserPermissions();\r\n      loadAvailableProjects();\r\n    }\r\n  }, [show, userId, user?.id]); // Removed loadUserPermissions dependency\r\n\r\n  const loadUserPermissions = useCallback(async () => {\r\n    try {\r\n      const currentUserId = userId || user?.id;\r\n      console.log('Loading permissions for user ID:', currentUserId);\r\n      \r\n      if (!currentUserId) {\r\n        throw new Error('User ID not found');\r\n      }\r\n      \r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/users/${currentUserId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('User permissions data:', data);\r\n      \r\n      if (data.success) {\r\n        // System permissions\r\n        const userData = data.data?.user || data.data;\r\n        setSystemPermissions(userData.permissions || []);\r\n        \r\n        // Project permissions\r\n        setProjectAssignments(data.data?.project_permissions || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading permissions:', error);\r\n      setError('Không thể tải quyền hạn: ' + error.message);\r\n    }\r\n  }, [userId, user?.id]);\r\n\r\n  const loadAvailableProjects = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Loading available projects...');\r\n      \r\n      const response = await fetch('/api/projects?limit=1000', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setAvailableProjects(data.data.projects || []);\r\n          console.log('Projects loaded:', data.data.projects?.length || 0);\r\n        }\r\n      } else {\r\n        console.warn('Projects API not available:', response.status);\r\n        // Projects API might not be implemented yet, use empty array\r\n        setAvailableProjects([]);\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error loading projects:', error.message);\r\n      // Don't show error for projects as it's optional\r\n      setAvailableProjects([]);\r\n    }\r\n  };\r\n\r\n  const handleSystemPermissionToggle = (permissionKey) => {\r\n    if (systemPermissions.includes('all') && permissionKey !== 'all') {\r\n      // Nếu có quyền 'all', không cho toggle individual permissions\r\n      return;\r\n    }\r\n    \r\n    setSystemPermissions(prev => {\r\n      if (permissionKey === 'all') {\r\n        // Toggle 'all' sẽ clear tất cả permissions khác\r\n        return prev.includes('all') ? [] : ['all'];\r\n      }\r\n      \r\n      if (prev.includes(permissionKey)) {\r\n        return prev.filter(p => p !== permissionKey);\r\n      } else {\r\n        return [...prev, permissionKey];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleAddProjectAssignment = () => {\r\n    if (!selectedProject) {\r\n      setError('Vui lòng chọn dự án');\r\n      return;\r\n    }\r\n    \r\n    // Check nếu đã assign rồi\r\n    if (projectAssignments.some(pa => pa.project_id === parseInt(selectedProject))) {\r\n      setError('Dự án này đã được assign');\r\n      return;\r\n    }\r\n    \r\n    const project = availableProjects.find(p => p.id === parseInt(selectedProject));\r\n    \r\n    setProjectAssignments(prev => [...prev, {\r\n      project_id: parseInt(selectedProject),\r\n      project_name: project.name,\r\n      permissions: ['view'] // Default permission\r\n    }]);\r\n    \r\n    setSelectedProject('');\r\n    setError('');\r\n  };\r\n\r\n  const handleRemoveProjectAssignment = (projectId) => {\r\n    setProjectAssignments(prev => prev.filter(pa => pa.project_id !== projectId));\r\n  };\r\n\r\n  const handleProjectPermissionToggle = (projectId, permissionKey) => {\r\n    setProjectAssignments(prev => prev.map(pa => {\r\n      if (pa.project_id === projectId) {\r\n        const perms = pa.permissions || [];\r\n        if (perms.includes(permissionKey)) {\r\n          return { ...pa, permissions: perms.filter(p => p !== permissionKey) };\r\n        } else {\r\n          return { ...pa, permissions: [...perms, permissionKey] };\r\n        }\r\n      }\r\n      return pa;\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n    \r\n    try {\r\n      const currentUserId = userId || user?.id;\r\n      console.log('Saving permissions for user ID:', currentUserId);\r\n      \r\n      if (!currentUserId) {\r\n        throw new Error('User ID not found');\r\n      }\r\n      \r\n      const token = localStorage.getItem('token');\r\n      \r\n      // Save system permissions\r\n      console.log('Saving system permissions:', systemPermissions);\r\n      const systemResponse = await fetch(`/api/users/${currentUserId}/permissions`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          permissions: systemPermissions\r\n        })\r\n      });\r\n      \r\n      if (!systemResponse.ok) {\r\n        const errorData = await systemResponse.json().catch(() => ({}));\r\n        throw new Error(errorData.message || 'Không thể cập nhật quyền hệ thống');\r\n      }\r\n      \r\n      // Save project assignments (if any)\r\n      if (projectAssignments.length > 0) {\r\n        console.log('Saving project permissions:', projectAssignments);\r\n        const projectResponse = await fetch(`/api/users/${currentUserId}/project-permissions`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            projects: projectAssignments.map(pa => ({\r\n              project_id: pa.project_id,\r\n              permissions: pa.permissions\r\n            }))\r\n          })\r\n        });\r\n        \r\n        if (!projectResponse.ok) {\r\n          const errorData = await projectResponse.json().catch(() => ({}));\r\n          throw new Error(errorData.message || 'Không thể cập nhật quyền dự án');\r\n        }\r\n      }\r\n      \r\n      setSuccess('Cập nhật quyền hạn thành công!');\r\n      \r\n      setTimeout(() => {\r\n        if (onSave) onSave();\r\n        onHide();\r\n      }, 1500);\r\n      \r\n    } catch (error) {\r\n      console.error('Error saving permissions:', error);\r\n      setError(error.message || 'Có lỗi xảy ra khi lưu quyền hạn');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const hasAllPermission = systemPermissions.includes('all');\r\n\r\n  return (\r\n    <Modal show={show} onHide={onHide} size=\"xl\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <i className=\"bi bi-shield-lock\"></i> Quản lý quyền hạn\r\n          {user && (\r\n            <div className=\"text-muted\" style={{ fontSize: '14px', marginTop: '4px' }}>\r\n              User: <strong>{user.username}</strong> - {user.full_name}\r\n            </div>\r\n          )}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      \r\n      <Modal.Body style={{ maxHeight: '70vh', overflowY: 'auto' }}>\r\n        {error && <Alert variant=\"danger\" onClose={() => setError('')} dismissible>{error}</Alert>}\r\n        {success && <Alert variant=\"success\">{success}</Alert>}\r\n        \r\n        <Tabs activeKey={activeTab} onSelect={setActiveTab} className=\"mb-3\">\r\n          {/* System Permissions Tab */}\r\n          <Tab eventKey=\"system\" title={\r\n            <span>\r\n              <i className=\"bi bi-gear-fill\"></i> Quyền hệ thống\r\n              <Badge bg=\"primary\" className=\"ms-2\">{systemPermissions.length}</Badge>\r\n            </span>\r\n          }>\r\n            <div className=\"permission-matrix\">\r\n              {hasAllPermission && (\r\n                <Alert variant=\"warning\">\r\n                  <i className=\"bi bi-exclamation-triangle-fill\"></i> User này có quyền <strong>ADMIN</strong> - truy cập tất cả chức năng\r\n                </Alert>\r\n              )}\r\n              \r\n              <Table hover responsive>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: '50px' }}></th>\r\n                    <th>Quyền</th>\r\n                    <th>Mô tả</th>\r\n                    <th style={{ width: '100px' }}>Trạng thái</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {SYSTEM_PERMISSIONS.map(perm => {\r\n                    const hasPermission = systemPermissions.includes(perm.key);\r\n                    const isDisabled = hasAllPermission && perm.key !== 'all';\r\n                    \r\n                    return (\r\n                      <tr key={perm.key} className={hasPermission ? 'table-active' : ''}>\r\n                        <td>\r\n                          <Form.Check\r\n                            type=\"checkbox\"\r\n                            checked={hasPermission}\r\n                            onChange={() => handleSystemPermissionToggle(perm.key)}\r\n                            disabled={isDisabled}\r\n                          />\r\n                        </td>\r\n                        <td>\r\n                          <strong>{perm.label}</strong>\r\n                          <Badge bg={perm.color} className=\"ms-2\">{perm.key}</Badge>\r\n                        </td>\r\n                        <td className=\"text-muted\">{perm.description}</td>\r\n                        <td>\r\n                          {hasPermission ? (\r\n                            <Badge bg=\"success\">Có quyền</Badge>\r\n                          ) : (\r\n                            <Badge bg=\"secondary\">Không</Badge>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </Table>\r\n            </div>\r\n          </Tab>\r\n          \r\n          {/* Project Assignments Tab */}\r\n          <Tab eventKey=\"projects\" title={\r\n            <span>\r\n              <i className=\"bi bi-building\"></i> Quyền dự án\r\n              <Badge bg=\"success\" className=\"ms-2\">{projectAssignments.length}</Badge>\r\n            </span>\r\n          }>\r\n            {/* Add Project Form */}\r\n            <div className=\"add-project-form mb-4 p-3 border rounded bg-light\">\r\n              <h6 className=\"mb-3\"><i className=\"bi bi-plus-circle\"></i> Assign user vào dự án</h6>\r\n              <div className=\"row g-2 align-items-end\">\r\n                <div className=\"col-md-8\">\r\n                  <Form.Label>Chọn dự án</Form.Label>\r\n                  <Form.Select\r\n                    value={selectedProject}\r\n                    onChange={(e) => setSelectedProject(e.target.value)}\r\n                  >\r\n                    <option value=\"\">-- Chọn dự án --</option>\r\n                    {availableProjects\r\n                      .filter(p => !projectAssignments.some(pa => pa.project_id === p.id))\r\n                      .map(project => (\r\n                        <option key={project.id} value={project.id}>\r\n                          {project.name} ({project.code})\r\n                        </option>\r\n                      ))\r\n                    }\r\n                  </Form.Select>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleAddProjectAssignment}\r\n                    disabled={!selectedProject}\r\n                    className=\"w-100\"\r\n                  >\r\n                    <i className=\"bi bi-plus\"></i> Thêm\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Project List */}\r\n            {projectAssignments.length === 0 ? (\r\n              <Alert variant=\"info\">\r\n                <i className=\"bi bi-info-circle\"></i> User chưa được assign vào dự án nào. \r\n                Sử dụng form bên trên để assign.\r\n              </Alert>\r\n            ) : (\r\n              <div className=\"project-assignments\">\r\n                {projectAssignments.map(pa => {\r\n                  const project = availableProjects.find(p => p.id === pa.project_id);\r\n                  \r\n                  return (\r\n                    <div key={pa.project_id} className=\"project-card mb-3 p-3 border rounded\">\r\n                      <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                        <div>\r\n                          <h6 className=\"mb-1\">\r\n                            <i className=\"bi bi-building\"></i> {pa.project_name || project?.name}\r\n                          </h6>\r\n                          {project && (\r\n                            <small className=\"text-muted\">Code: {project.code}</small>\r\n                          )}\r\n                        </div>\r\n                        <Button\r\n                          variant=\"outline-danger\"\r\n                          size=\"sm\"\r\n                          onClick={() => handleRemoveProjectAssignment(pa.project_id)}\r\n                        >\r\n                          <i className=\"bi bi-trash\"></i> Xóa\r\n                        </Button>\r\n                      </div>\r\n                      \r\n                      <div className=\"permissions-grid\">\r\n                        {PROJECT_PERMISSIONS.map(perm => {\r\n                          const hasPermission = (pa.permissions || []).includes(perm.key);\r\n                          \r\n                          return (\r\n                            <div key={perm.key} className=\"permission-item\">\r\n                              <Form.Check\r\n                                type=\"checkbox\"\r\n                                id={`${pa.project_id}-${perm.key}`}\r\n                                label={\r\n                                  <span>\r\n                                    <strong>{perm.label}</strong>\r\n                                    <br />\r\n                                    <small className=\"text-muted\">{perm.description}</small>\r\n                                  </span>\r\n                                }\r\n                                checked={hasPermission}\r\n                                onChange={() => handleProjectPermissionToggle(pa.project_id, perm.key)}\r\n                              />\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </Tab>\r\n        </Tabs>\r\n      </Modal.Body>\r\n      \r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide} disabled={loading}>\r\n          Hủy\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleSave} disabled={loading}>\r\n          {loading ? (\r\n            <>\r\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n              Đang lưu...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <i className=\"bi bi-save\"></i> Lưu thay đổi\r\n            </>\r\n          )}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default PermissionManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
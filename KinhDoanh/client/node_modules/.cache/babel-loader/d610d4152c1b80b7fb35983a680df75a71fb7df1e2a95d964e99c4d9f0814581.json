{"ast":null,"code":"/**\r\n * Customer Detail Page - KHO MVG\r\n * Chi tiết khách hàng với lịch sử hợp đồng\r\n */import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Button,Badge,Tab,Nav,Table,Modal,Alert,Form}from'react-bootstrap';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{useNotification}from'../../contexts/NotificationContext';import LoadingSpinner from'../../components/Common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CustomerDetail(){const{id}=useParams();const navigate=useNavigate();const{hasPermission}=useAuth();const{showError}=useNotification();const[loading,setLoading]=useState(true);const[customer,setCustomer]=useState(null);const[contracts,setContracts]=useState([]);const[activeTab,setActiveTab]=useState('info');// const [showContractModal, setShowContractModal] = useState(false);\n// Mock customer data\nconst mockCustomer={id:parseInt(id),customer_code:'KH001',company_name:'Công ty TNHH ABC Logistics',contact_person:'Nguyễn Văn A',email:'contact@abc.com',phone:'0123456789',address:'123 Đường XYZ, Quận 1, TP.HCM',tax_code:'0123456789',business_license:'GP-12345678',customer_type:'company',credit_rating:'A',bank_info:{bank_name:'Vietcombank',account_number:'1234567890',account_holder:'CONG TY TNHH ABC LOGISTICS'},notes:'Khách hàng lâu năm, uy tín tốt',created_at:'2024-01-15',created_by_username:'admin'};const mockContracts=[{id:1,contract_number:'HD240001',project_name:'Kho xưởng Bình Dương',project_code:'KX-BD-001',zone_code:'A1',zone_name:'Khu vực A1',zone_area:500,start_date:'2024-01-01',end_date:'2024-12-31',rental_price:150000,deposit_amount:37500000,payment_cycle:'monthly',status:'active',days_until_expiry:120},{id:2,contract_number:'HD240005',project_name:'Kho xưởng Bình Dương',project_code:'KX-BD-001',zone_code:'B2',zone_name:'Khu vực B2',zone_area:300,start_date:'2024-02-01',end_date:'2024-07-31',rental_price:160000,deposit_amount:24000000,payment_cycle:'monthly',status:'active',days_until_expiry:90},{id:3,contract_number:'HD230012',project_name:'Trung tâm logistics Đồng Nai',project_code:'KX-DN-002',zone_code:'C1',zone_name:'Khu vực C1',zone_area:400,start_date:'2023-06-01',end_date:'2023-12-31',rental_price:140000,deposit_amount:28000000,payment_cycle:'monthly',status:'expired',days_until_expiry:-45}];useEffect(()=>{// Simulate API call\nsetTimeout(()=>{setCustomer(mockCustomer);setContracts(mockContracts);setLoading(false);},1000);},[id,mockCustomer,mockContracts]);const getCreditRatingBadge=rating=>{const ratingMap={A:{variant:'success',label:'A - Tốt'},B:{variant:'primary',label:'B - Khá'},C:{variant:'warning',label:'C - Trung bình'},D:{variant:'danger',label:'D - Kém'}};const ratingInfo=ratingMap[rating]||{variant:'secondary',label:rating};return/*#__PURE__*/_jsx(Badge,{bg:ratingInfo.variant,children:ratingInfo.label});};const getContractStatusBadge=(status,daysUntilExpiry)=>{if(status==='expired'){return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"H\\u1EBFt h\\u1EA1n\"});}if(status==='terminated'){return/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"\\u0110\\xE3 thanh l\\xFD\"});}if(status==='active'){if(daysUntilExpiry<=30){return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"S\\u1EAFp h\\u1EBFt h\\u1EA1n\"});}return/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Hi\\u1EC7u l\\u1EF1c\"});}if(status==='draft'){return/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:\"B\\u1EA3n nh\\xE1p\"});}return/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:status});};const formatCurrency=amount=>{return new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(amount).replace('₫','đ');};const formatArea=area=>{return new Intl.NumberFormat('vi-VN').format(area)+' m²';};const calculateTotalRevenue=()=>{return contracts.filter(c=>c.status==='active').reduce((sum,contract)=>sum+contract.rental_price*contract.zone_area,0);};const handleCreateContract=()=>{if(!hasPermission('contract_create')){showError('Bạn không có quyền tạo hợp đồng mới');return;}navigate(\"/contracts/create?customer=\".concat(id));};const handleViewContract=contractId=>{navigate(\"/contracts/\".concat(contractId));};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"\\u0110ang t\\u1EA3i th\\xF4ng tin kh\\xE1ch h\\xE0ng...\"});}if(!customer){return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Kh\\xF4ng t\\xECm th\\u1EA5y kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Kh\\xE1ch h\\xE0ng v\\u1EDBi ID \",id,\" kh\\xF4ng t\\u1ED3n t\\u1EA1i ho\\u1EB7c \\u0111\\xE3 b\\u1ECB x\\xF3a.\"]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>navigate('/customers'),children:\"Quay l\\u1EA1i danh s\\xE1ch kh\\xE1ch h\\xE0ng\"})]})});}const activeContracts=contracts.filter(c=>c.status==='active');const expiringContracts=activeContracts.filter(c=>c.days_until_expiry<=30);return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"p-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mb-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",className:\"me-3\",onClick:()=>navigate('/customers'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-0\",children:customer.company_name||customer.contact_person}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mt-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted me-3\",children:[\"M\\xE3: \",customer.customer_code]}),getCreditRatingBadge(customer.credit_rating),/*#__PURE__*/_jsx(Badge,{bg:customer.customer_type==='company'?'info':'secondary',className:\"ms-2\",children:customer.customer_type==='company'?'Doanh nghiệp':'Cá nhân'})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user me-2\"}),customer.contact_person,/*#__PURE__*/_jsxs(\"span\",{className:\"ms-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone me-2\"}),customer.phone]}),customer.email&&/*#__PURE__*/_jsxs(\"span\",{className:\"ms-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope me-2\"}),customer.email]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[hasPermission('customer_update')&&/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit me-2\"}),\"Ch\\u1EC9nh s\\u1EEDa\"]}),hasPermission('contract_create')&&/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:handleCreateContract,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-2\"}),\"T\\u1EA1o h\\u1EE3p \\u0111\\u1ED3ng\"]})]})]})})}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"T\\u1ED5ng h\\u1EE3p \\u0111\\u1ED3ng\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0 text-primary\",children:contracts.length})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-contract fa-2x text-primary opacity-25\"})]})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"\\u0110ang hi\\u1EC7u l\\u1EF1c\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0 text-success\",children:activeContracts.length})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle fa-2x text-success opacity-25\"})]})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"S\\u1EAFp h\\u1EBFt h\\u1EA1n\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0 text-warning\",children:expiringContracts.length})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle fa-2x text-warning opacity-25\"})]})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{className:\"border-0 shadow-sm\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-1\",children:\"Doanh thu/th\\xE1ng\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0 text-info\",children:formatCurrency(calculateTotalRevenue())})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chart-line fa-2x text-info opacity-25\"})]})})})})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0\",children:/*#__PURE__*/_jsx(Tab.Container,{activeKey:activeTab,onSelect:setActiveTab,children:/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",className:\"border-0\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-2\"}),\"Th\\xF4ng tin chi ti\\u1EBFt\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"contracts\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-contract me-2\"}),\"H\\u1EE3p \\u0111\\u1ED3ng (\",contracts.length,\")\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"documents\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-folder me-2\"}),\"H\\u1ED3 s\\u01A1 t\\xE0i li\\u1EC7u\"]})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"activities\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-history me-2\"}),\"L\\u1ECBch s\\u1EED ho\\u1EA1t \\u0111\\u1ED9ng\"]})})]})})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Tab.Container,{activeKey:activeTab,children:/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"info\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3\",children:\"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xE3 kh\\xE1ch h\\xE0ng:\"}),\" \",customer.customer_code]}),customer.company_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\xEAn c\\xF4ng ty:\"}),\" \",customer.company_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7:\"}),\" \",customer.contact_person]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0110i\\u1EC7n tho\\u1EA1i:\"}),\" \",customer.phone]}),customer.email&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",customer.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0110\\u1ECBa ch\\u1EC9:\"}),\" \",customer.address]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Lo\\u1EA1i kh\\xE1ch h\\xE0ng:\"}),/*#__PURE__*/_jsx(Badge,{bg:customer.customer_type==='company'?'info':'secondary',className:\"ms-2\",children:customer.customer_type==='company'?'Doanh nghiệp':'Cá nhân'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"X\\u1EBFp h\\u1EA1ng t\\xEDn d\\u1EE5ng:\"}),\" \",getCreditRatingBadge(customer.credit_rating)]})]})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[customer.customer_type==='company'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3\",children:\"Th\\xF4ng tin doanh nghi\\u1EC7p\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xE3 s\\u1ED1 thu\\u1EBF:\"}),\" \",customer.tax_code||'Chưa có']}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gi\\u1EA5y ph\\xE9p kinh doanh:\"}),\" \",customer.business_license||'Chưa có']})]})]}),customer.bank_info&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3 mt-4\",children:\"Th\\xF4ng tin ng\\xE2n h\\xE0ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ng\\xE2n h\\xE0ng:\"}),\" \",customer.bank_info.bank_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"S\\u1ED1 t\\xE0i kho\\u1EA3n:\"}),\" \",customer.bank_info.account_number]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ch\\u1EE7 t\\xE0i kho\\u1EA3n:\"}),\" \",customer.bank_info.account_holder]})]})]}),customer.notes&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3 mt-4\",children:\"Ghi ch\\xFA\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:customer.notes})]})]})]})}),/*#__PURE__*/_jsxs(Tab.Pane,{eventKey:\"contracts\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Danh s\\xE1ch h\\u1EE3p \\u0111\\u1ED3ng\"}),hasPermission('contract_create')&&/*#__PURE__*/_jsxs(Button,{variant:\"primary\",size:\"sm\",onClick:handleCreateContract,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-2\"}),\"T\\u1EA1o h\\u1EE3p \\u0111\\u1ED3ng m\\u1EDBi\"]})]}),expiringContracts.length>0&&/*#__PURE__*/_jsxs(Alert,{variant:\"warning\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"C\\u1EA3nh b\\xE1o:\"}),\" C\\xF3 \",expiringContracts.length,\" h\\u1EE3p \\u0111\\u1ED3ng s\\u1EAFp h\\u1EBFt h\\u1EA1n trong 30 ng\\xE0y t\\u1EDBi.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"H\\u1EE3p \\u0111\\u1ED3ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"D\\u1EF1 \\xE1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Zone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Th\\u1EDDi h\\u1EA1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gi\\xE1 thu\\xEA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:contracts.length>0?contracts.map(contract=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:contract.contract_number}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:contract.payment_cycle==='monthly'?'Tháng':contract.payment_cycle==='quarterly'?'Quý':'Năm'})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:contract.project_name}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:contract.project_code})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-medium\",children:contract.zone_code}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:formatArea(contract.zone_area)})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[new Date(contract.start_date).toLocaleDateString('vi-VN'),\" -\",new Date(contract.end_date).toLocaleDateString('vi-VN')]}),contract.status==='active'&&contract.days_until_expiry>0&&/*#__PURE__*/_jsxs(\"small\",{className:\"\".concat(contract.days_until_expiry<=30?'text-warning':'text-muted'),children:[\"C\\xF2n \",contract.days_until_expiry,\" ng\\xE0y\"]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold\",children:[formatCurrency(contract.rental_price),\"/m\\xB2\"]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"T\\u1ED5ng: \",formatCurrency(contract.rental_price*contract.zone_area),\"/th\\xE1ng\"]})]})}),/*#__PURE__*/_jsx(\"td\",{children:getContractStatusBadge(contract.status,contract.days_until_expiry)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",onClick:()=>handleViewContract(contract.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})})})]},contract.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:7,className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-contract fa-2x mb-3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ch\\u01B0a c\\xF3 h\\u1EE3p \\u0111\\u1ED3ng n\\xE0o\"}),hasPermission('contract_create')&&/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleCreateContract,children:\"T\\u1EA1o h\\u1EE3p \\u0111\\u1ED3ng \\u0111\\u1EA7u ti\\xEAn\"})]})})})})]})})]}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"documents\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-folder-open fa-3x text-muted mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"H\\u1ED3 s\\u01A1 t\\xE0i li\\u1EC7u\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Qu\\u1EA3n l\\xFD c\\xE1c t\\xE0i li\\u1EC7u li\\xEAn quan \\u0111\\u1EBFn kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\xEDnh n\\u0103ng \\u0111ang ph\\xE1t tri\\u1EC3n:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"- Upload v\\xE0 qu\\u1EA3n l\\xFD h\\u1EE3p \\u0111\\u1ED3ng\",/*#__PURE__*/_jsx(\"br\",{}),\"- L\\u01B0u tr\\u1EEF ch\\u1EE9ng t\\u1EEB thanh to\\xE1n\",/*#__PURE__*/_jsx(\"br\",{}),\"- Qu\\u1EA3n l\\xFD gi\\u1EA5y t\\u1EDD ph\\xE1p l\\xFD\"]})]})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"activities\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-history fa-3x text-muted mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"L\\u1ECBch s\\u1EED ho\\u1EA1t \\u0111\\u1ED9ng\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Theo d\\xF5i c\\xE1c ho\\u1EA1t \\u0111\\u1ED9ng v\\xE0 thay \\u0111\\u1ED5i c\\u1EE7a kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsxs(Alert,{variant:\"info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\xEDnh n\\u0103ng \\u0111ang ph\\xE1t tri\\u1EC3n:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"- Log c\\xE1c thao t\\xE1c tr\\xEAn h\\u1EE3p \\u0111\\u1ED3ng\",/*#__PURE__*/_jsx(\"br\",{}),\"- L\\u1ECBch s\\u1EED thanh to\\xE1n\",/*#__PURE__*/_jsx(\"br\",{}),\"- Thay \\u0111\\u1ED5i th\\xF4ng tin kh\\xE1ch h\\xE0ng\"]})]})})]})})})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        .info-group {\\n          display: flex;\\n          flex-direction: column;\\n          gap: 12px;\\n        }\\n\\n        .info-item {\\n          padding: 8px 0;\\n          border-bottom: 1px solid #f0f0f0;\\n        }\\n\\n        .info-item:last-child {\\n          border-bottom: none;\\n        }\\n\\n        .info-item strong {\\n          color: #495057;\\n          display: inline-block;\\n          min-width: 140px;\\n        }\\n      \"})]});}export default CustomerDetail;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Badge","Tab","Nav","Table","Modal","Alert","Form","useParams","useNavigate","useAuth","useNotification","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CustomerDetail","id","navigate","hasPermission","showError","loading","setLoading","customer","setCustomer","contracts","setContracts","activeTab","setActiveTab","mockCustomer","parseInt","customer_code","company_name","contact_person","email","phone","address","tax_code","business_license","customer_type","credit_rating","bank_info","bank_name","account_number","account_holder","notes","created_at","created_by_username","mockContracts","contract_number","project_name","project_code","zone_code","zone_name","zone_area","start_date","end_date","rental_price","deposit_amount","payment_cycle","status","days_until_expiry","setTimeout","getCreditRatingBadge","rating","ratingMap","A","variant","label","B","C","D","ratingInfo","bg","children","getContractStatusBadge","daysUntilExpiry","formatCurrency","amount","Intl","NumberFormat","style","currency","format","replace","formatArea","area","calculateTotalRevenue","filter","c","reduce","sum","contract","handleCreateContract","concat","handleViewContract","contractId","text","className","onClick","activeContracts","expiringContracts","fluid","size","md","Body","length","Header","activeKey","onSelect","Item","Link","eventKey","Content","Pane","hover","map","Date","toLocaleDateString","colSpan"],"sources":["C:/Users/Admin/Documents/GitHub/MVG_InventoryManagement/KinhDoanh/client/src/pages/Customers/CustomerDetail.js"],"sourcesContent":["/**\r\n * Customer Detail Page - KHO MVG\r\n * Chi tiết khách hàng với lịch sử hợp đồng\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Button, Badge, Tab, Nav, Table, Modal, Alert, Form } from 'react-bootstrap';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\n\r\nfunction CustomerDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { hasPermission } = useAuth();\r\n  const { showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(true);\r\n  const [customer, setCustomer] = useState(null);\r\n  const [contracts, setContracts] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('info');\r\n  // const [showContractModal, setShowContractModal] = useState(false);\r\n\r\n  // Mock customer data\r\n  const mockCustomer = {\r\n    id: parseInt(id),\r\n    customer_code: 'KH001',\r\n    company_name: 'Công ty TNHH ABC Logistics',\r\n    contact_person: 'Nguyễn Văn A',\r\n    email: 'contact@abc.com',\r\n    phone: '0123456789',\r\n    address: '123 Đường XYZ, Quận 1, TP.HCM',\r\n    tax_code: '0123456789',\r\n    business_license: 'GP-12345678',\r\n    customer_type: 'company',\r\n    credit_rating: 'A',\r\n    bank_info: {\r\n      bank_name: 'Vietcombank',\r\n      account_number: '1234567890',\r\n      account_holder: 'CONG TY TNHH ABC LOGISTICS'\r\n    },\r\n    notes: 'Khách hàng lâu năm, uy tín tốt',\r\n    created_at: '2024-01-15',\r\n    created_by_username: 'admin'\r\n  };\r\n\r\n  const mockContracts = [\r\n    {\r\n      id: 1,\r\n      contract_number: 'HD240001',\r\n      project_name: 'Kho xưởng Bình Dương',\r\n      project_code: 'KX-BD-001',\r\n      zone_code: 'A1',\r\n      zone_name: 'Khu vực A1',\r\n      zone_area: 500,\r\n      start_date: '2024-01-01',\r\n      end_date: '2024-12-31',\r\n      rental_price: 150000,\r\n      deposit_amount: 37500000,\r\n      payment_cycle: 'monthly',\r\n      status: 'active',\r\n      days_until_expiry: 120\r\n    },\r\n    {\r\n      id: 2,\r\n      contract_number: 'HD240005',\r\n      project_name: 'Kho xưởng Bình Dương',\r\n      project_code: 'KX-BD-001',\r\n      zone_code: 'B2',\r\n      zone_name: 'Khu vực B2',\r\n      zone_area: 300,\r\n      start_date: '2024-02-01',\r\n      end_date: '2024-07-31',\r\n      rental_price: 160000,\r\n      deposit_amount: 24000000,\r\n      payment_cycle: 'monthly',\r\n      status: 'active',\r\n      days_until_expiry: 90\r\n    },\r\n    {\r\n      id: 3,\r\n      contract_number: 'HD230012',\r\n      project_name: 'Trung tâm logistics Đồng Nai',\r\n      project_code: 'KX-DN-002',\r\n      zone_code: 'C1',\r\n      zone_name: 'Khu vực C1',\r\n      zone_area: 400,\r\n      start_date: '2023-06-01',\r\n      end_date: '2023-12-31',\r\n      rental_price: 140000,\r\n      deposit_amount: 28000000,\r\n      payment_cycle: 'monthly',\r\n      status: 'expired',\r\n      days_until_expiry: -45\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    // Simulate API call\r\n    setTimeout(() => {\r\n      setCustomer(mockCustomer);\r\n      setContracts(mockContracts);\r\n      setLoading(false);\r\n    }, 1000);\r\n  }, [id, mockCustomer, mockContracts]);\r\n\r\n  const getCreditRatingBadge = (rating) => {\r\n    const ratingMap = {\r\n      A: { variant: 'success', label: 'A - Tốt' },\r\n      B: { variant: 'primary', label: 'B - Khá' },\r\n      C: { variant: 'warning', label: 'C - Trung bình' },\r\n      D: { variant: 'danger', label: 'D - Kém' }\r\n    };\r\n    \r\n    const ratingInfo = ratingMap[rating] || { variant: 'secondary', label: rating };\r\n    return <Badge bg={ratingInfo.variant}>{ratingInfo.label}</Badge>;\r\n  };\r\n\r\n  const getContractStatusBadge = (status, daysUntilExpiry) => {\r\n    if (status === 'expired') {\r\n      return <Badge bg=\"danger\">Hết hạn</Badge>;\r\n    }\r\n    if (status === 'terminated') {\r\n      return <Badge bg=\"secondary\">Đã thanh lý</Badge>;\r\n    }\r\n    if (status === 'active') {\r\n      if (daysUntilExpiry <= 30) {\r\n        return <Badge bg=\"warning\">Sắp hết hạn</Badge>;\r\n      }\r\n      return <Badge bg=\"success\">Hiệu lực</Badge>;\r\n    }\r\n    if (status === 'draft') {\r\n      return <Badge bg=\"info\">Bản nháp</Badge>;\r\n    }\r\n    return <Badge bg=\"secondary\">{status}</Badge>;\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN', {\r\n      style: 'currency',\r\n      currency: 'VND'\r\n    }).format(amount).replace('₫', 'đ');\r\n  };\r\n\r\n  const formatArea = (area) => {\r\n    return new Intl.NumberFormat('vi-VN').format(area) + ' m²';\r\n  };\r\n\r\n  const calculateTotalRevenue = () => {\r\n    return contracts\r\n      .filter(c => c.status === 'active')\r\n      .reduce((sum, contract) => sum + (contract.rental_price * contract.zone_area), 0);\r\n  };\r\n\r\n  const handleCreateContract = () => {\r\n    if (!hasPermission('contract_create')) {\r\n      showError('Bạn không có quyền tạo hợp đồng mới');\r\n      return;\r\n    }\r\n    navigate(`/contracts/create?customer=${id}`);\r\n  };\r\n\r\n  const handleViewContract = (contractId) => {\r\n    navigate(`/contracts/${contractId}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner text=\"Đang tải thông tin khách hàng...\" />;\r\n  }\r\n\r\n  if (!customer) {\r\n    return (\r\n      <Container className=\"mt-5\">\r\n        <Alert variant=\"danger\" className=\"text-center\">\r\n          <h4>Không tìm thấy khách hàng</h4>\r\n          <p>Khách hàng với ID {id} không tồn tại hoặc đã bị xóa.</p>\r\n          <Button variant=\"primary\" onClick={() => navigate('/customers')}>\r\n            Quay lại danh sách khách hàng\r\n          </Button>\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  const activeContracts = contracts.filter(c => c.status === 'active');\r\n  const expiringContracts = activeContracts.filter(c => c.days_until_expiry <= 30);\r\n\r\n  return (\r\n    <Container fluid className=\"p-4\">\r\n      {/* Header */}\r\n      <Row className=\"mb-4\">\r\n        <Col>\r\n          <div className=\"d-flex justify-content-between align-items-start\">\r\n            <div>\r\n              <div className=\"d-flex align-items-center mb-2\">\r\n                <Button \r\n                  variant=\"outline-secondary\" \r\n                  size=\"sm\" \r\n                  className=\"me-3\"\r\n                  onClick={() => navigate('/customers')}\r\n                >\r\n                  <i className=\"fas fa-arrow-left\"></i>\r\n                </Button>\r\n                <div>\r\n                  <h2 className=\"mb-0\">{customer.company_name || customer.contact_person}</h2>\r\n                  <div className=\"d-flex align-items-center mt-1\">\r\n                    <span className=\"text-muted me-3\">Mã: {customer.customer_code}</span>\r\n                    {getCreditRatingBadge(customer.credit_rating)}\r\n                    <Badge bg={customer.customer_type === 'company' ? 'info' : 'secondary'} className=\"ms-2\">\r\n                      {customer.customer_type === 'company' ? 'Doanh nghiệp' : 'Cá nhân'}\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <p className=\"text-muted mb-0\">\r\n                <i className=\"fas fa-user me-2\"></i>{customer.contact_person}\r\n                <span className=\"ms-3\">\r\n                  <i className=\"fas fa-phone me-2\"></i>{customer.phone}\r\n                </span>\r\n                {customer.email && (\r\n                  <span className=\"ms-3\">\r\n                    <i className=\"fas fa-envelope me-2\"></i>{customer.email}\r\n                  </span>\r\n                )}\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"d-flex gap-2\">\r\n              {hasPermission('customer_update') && (\r\n                <Button variant=\"outline-primary\">\r\n                  <i className=\"fas fa-edit me-2\"></i>\r\n                  Chỉnh sửa\r\n                </Button>\r\n              )}\r\n              {hasPermission('contract_create') && (\r\n                <Button variant=\"primary\" onClick={handleCreateContract}>\r\n                  <i className=\"fas fa-plus me-2\"></i>\r\n                  Tạo hợp đồng\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Statistics Cards */}\r\n      <Row className=\"mb-4\">\r\n        <Col md={3}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Tổng hợp đồng</h6>\r\n                  <h4 className=\"mb-0 text-primary\">{contracts.length}</h4>\r\n                </div>\r\n                <i className=\"fas fa-file-contract fa-2x text-primary opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Đang hiệu lực</h6>\r\n                  <h4 className=\"mb-0 text-success\">{activeContracts.length}</h4>\r\n                </div>\r\n                <i className=\"fas fa-check-circle fa-2x text-success opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Sắp hết hạn</h6>\r\n                  <h4 className=\"mb-0 text-warning\">{expiringContracts.length}</h4>\r\n                </div>\r\n                <i className=\"fas fa-exclamation-triangle fa-2x text-warning opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Doanh thu/tháng</h6>\r\n                  <h4 className=\"mb-0 text-info\">{formatCurrency(calculateTotalRevenue())}</h4>\r\n                </div>\r\n                <i className=\"fas fa-chart-line fa-2x text-info opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Main Content */}\r\n      <Card className=\"border-0 shadow-sm\">\r\n        <Card.Header className=\"bg-white border-0\">\r\n          <Tab.Container activeKey={activeTab} onSelect={setActiveTab}>\r\n            <Nav variant=\"tabs\" className=\"border-0\">\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"info\">\r\n                  <i className=\"fas fa-info-circle me-2\"></i>\r\n                  Thông tin chi tiết\r\n                </Nav.Link>\r\n              </Nav.Item>\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"contracts\">\r\n                  <i className=\"fas fa-file-contract me-2\"></i>\r\n                  Hợp đồng ({contracts.length})\r\n                </Nav.Link>\r\n              </Nav.Item>\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"documents\">\r\n                  <i className=\"fas fa-folder me-2\"></i>\r\n                  Hồ sơ tài liệu\r\n                </Nav.Link>\r\n              </Nav.Item>\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"activities\">\r\n                  <i className=\"fas fa-history me-2\"></i>\r\n                  Lịch sử hoạt động\r\n                </Nav.Link>\r\n              </Nav.Item>\r\n            </Nav>\r\n          </Tab.Container>\r\n        </Card.Header>\r\n\r\n        <Card.Body>\r\n          <Tab.Container activeKey={activeTab}>\r\n            <Tab.Content>\r\n              {/* Customer Info Tab */}\r\n              <Tab.Pane eventKey=\"info\">\r\n                <Row>\r\n                  <Col md={6}>\r\n                    <h5 className=\"mb-3\">Thông tin cơ bản</h5>\r\n                    <div className=\"info-group\">\r\n                      <div className=\"info-item\">\r\n                        <strong>Mã khách hàng:</strong> {customer.customer_code}\r\n                      </div>\r\n                      {customer.company_name && (\r\n                        <div className=\"info-item\">\r\n                          <strong>Tên công ty:</strong> {customer.company_name}\r\n                        </div>\r\n                      )}\r\n                      <div className=\"info-item\">\r\n                        <strong>Người liên hệ:</strong> {customer.contact_person}\r\n                      </div>\r\n                      <div className=\"info-item\">\r\n                        <strong>Điện thoại:</strong> {customer.phone}\r\n                      </div>\r\n                      {customer.email && (\r\n                        <div className=\"info-item\">\r\n                          <strong>Email:</strong> {customer.email}\r\n                        </div>\r\n                      )}\r\n                      <div className=\"info-item\">\r\n                        <strong>Địa chỉ:</strong> {customer.address}\r\n                      </div>\r\n                      <div className=\"info-item\">\r\n                        <strong>Loại khách hàng:</strong> \r\n                        <Badge bg={customer.customer_type === 'company' ? 'info' : 'secondary'} className=\"ms-2\">\r\n                          {customer.customer_type === 'company' ? 'Doanh nghiệp' : 'Cá nhân'}\r\n                        </Badge>\r\n                      </div>\r\n                      <div className=\"info-item\">\r\n                        <strong>Xếp hạng tín dụng:</strong> {getCreditRatingBadge(customer.credit_rating)}\r\n                      </div>\r\n                    </div>\r\n                  </Col>\r\n                  \r\n                  <Col md={6}>\r\n                    {customer.customer_type === 'company' && (\r\n                      <>\r\n                        <h5 className=\"mb-3\">Thông tin doanh nghiệp</h5>\r\n                        <div className=\"info-group\">\r\n                          <div className=\"info-item\">\r\n                            <strong>Mã số thuế:</strong> {customer.tax_code || 'Chưa có'}\r\n                          </div>\r\n                          <div className=\"info-item\">\r\n                            <strong>Giấy phép kinh doanh:</strong> {customer.business_license || 'Chưa có'}\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {customer.bank_info && (\r\n                      <>\r\n                        <h5 className=\"mb-3 mt-4\">Thông tin ngân hàng</h5>\r\n                        <div className=\"info-group\">\r\n                          <div className=\"info-item\">\r\n                            <strong>Ngân hàng:</strong> {customer.bank_info.bank_name}\r\n                          </div>\r\n                          <div className=\"info-item\">\r\n                            <strong>Số tài khoản:</strong> {customer.bank_info.account_number}\r\n                          </div>\r\n                          <div className=\"info-item\">\r\n                            <strong>Chủ tài khoản:</strong> {customer.bank_info.account_holder}\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n\r\n                    {customer.notes && (\r\n                      <>\r\n                        <h5 className=\"mb-3 mt-4\">Ghi chú</h5>\r\n                        <p className=\"text-muted\">{customer.notes}</p>\r\n                      </>\r\n                    )}\r\n                  </Col>\r\n                </Row>\r\n              </Tab.Pane>\r\n\r\n              {/* Contracts Tab */}\r\n              <Tab.Pane eventKey=\"contracts\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                  <h5 className=\"mb-0\">Danh sách hợp đồng</h5>\r\n                  {hasPermission('contract_create') && (\r\n                    <Button variant=\"primary\" size=\"sm\" onClick={handleCreateContract}>\r\n                      <i className=\"fas fa-plus me-2\"></i>\r\n                      Tạo hợp đồng mới\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n\r\n                {expiringContracts.length > 0 && (\r\n                  <Alert variant=\"warning\" className=\"mb-3\">\r\n                    <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n                    <strong>Cảnh báo:</strong> Có {expiringContracts.length} hợp đồng sắp hết hạn trong 30 ngày tới.\r\n                  </Alert>\r\n                )}\r\n\r\n                <div className=\"table-responsive\">\r\n                  <Table hover>\r\n                    <thead className=\"bg-light\">\r\n                      <tr>\r\n                        <th>Hợp đồng</th>\r\n                        <th>Dự án</th>\r\n                        <th>Zone</th>\r\n                        <th>Thời hạn</th>\r\n                        <th>Giá thuê</th>\r\n                        <th>Trạng thái</th>\r\n                        <th>Thao tác</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {contracts.length > 0 ? (\r\n                        contracts.map((contract) => (\r\n                          <tr key={contract.id}>\r\n                            <td>\r\n                              <div>\r\n                                <div className=\"fw-bold\">{contract.contract_number}</div>\r\n                                <small className=\"text-muted\">\r\n                                  {contract.payment_cycle === 'monthly' ? 'Tháng' : \r\n                                   contract.payment_cycle === 'quarterly' ? 'Quý' : 'Năm'}\r\n                                </small>\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div>\r\n                                <div>{contract.project_name}</div>\r\n                                <small className=\"text-muted\">{contract.project_code}</small>\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div>\r\n                                <div className=\"fw-medium\">{contract.zone_code}</div>\r\n                                <small className=\"text-muted\">{formatArea(contract.zone_area)}</small>\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div>\r\n                                <div>\r\n                                  {new Date(contract.start_date).toLocaleDateString('vi-VN')} - \r\n                                  {new Date(contract.end_date).toLocaleDateString('vi-VN')}\r\n                                </div>\r\n                                {contract.status === 'active' && contract.days_until_expiry > 0 && (\r\n                                  <small className={`${contract.days_until_expiry <= 30 ? 'text-warning' : 'text-muted'}`}>\r\n                                    Còn {contract.days_until_expiry} ngày\r\n                                  </small>\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div>\r\n                                <div className=\"fw-bold\">\r\n                                  {formatCurrency(contract.rental_price)}/m²\r\n                                </div>\r\n                                <small className=\"text-muted\">\r\n                                  Tổng: {formatCurrency(contract.rental_price * contract.zone_area)}/tháng\r\n                                </small>\r\n                              </div>\r\n                            </td>\r\n                            <td>{getContractStatusBadge(contract.status, contract.days_until_expiry)}</td>\r\n                            <td>\r\n                              <Button\r\n                                variant=\"outline-primary\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleViewContract(contract.id)}\r\n                              >\r\n                                <i className=\"fas fa-eye\"></i>\r\n                              </Button>\r\n                            </td>\r\n                          </tr>\r\n                        ))\r\n                      ) : (\r\n                        <tr>\r\n                          <td colSpan={7} className=\"text-center py-4\">\r\n                            <div className=\"text-muted\">\r\n                              <i className=\"fas fa-file-contract fa-2x mb-3\"></i>\r\n                              <p>Chưa có hợp đồng nào</p>\r\n                              {hasPermission('contract_create') && (\r\n                                <Button variant=\"primary\" onClick={handleCreateContract}>\r\n                                  Tạo hợp đồng đầu tiên\r\n                                </Button>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </Table>\r\n                </div>\r\n              </Tab.Pane>\r\n\r\n              {/* Documents Tab */}\r\n              <Tab.Pane eventKey=\"documents\">\r\n                <div className=\"text-center py-5\">\r\n                  <i className=\"fas fa-folder-open fa-3x text-muted mb-3\"></i>\r\n                  <h5>Hồ sơ tài liệu</h5>\r\n                  <p className=\"text-muted\">\r\n                    Quản lý các tài liệu liên quan đến khách hàng\r\n                  </p>\r\n                  <Alert variant=\"info\">\r\n                    <strong>Tính năng đang phát triển:</strong>\r\n                    <br />- Upload và quản lý hợp đồng\r\n                    <br />- Lưu trữ chứng từ thanh toán\r\n                    <br />- Quản lý giấy tờ pháp lý\r\n                  </Alert>\r\n                </div>\r\n              </Tab.Pane>\r\n\r\n              {/* Activities Tab */}\r\n              <Tab.Pane eventKey=\"activities\">\r\n                <div className=\"text-center py-5\">\r\n                  <i className=\"fas fa-history fa-3x text-muted mb-3\"></i>\r\n                  <h5>Lịch sử hoạt động</h5>\r\n                  <p className=\"text-muted\">\r\n                    Theo dõi các hoạt động và thay đổi của khách hàng\r\n                  </p>\r\n                  <Alert variant=\"info\">\r\n                    <strong>Tính năng đang phát triển:</strong>\r\n                    <br />- Log các thao tác trên hợp đồng\r\n                    <br />- Lịch sử thanh toán\r\n                    <br />- Thay đổi thông tin khách hàng\r\n                  </Alert>\r\n                </div>\r\n              </Tab.Pane>\r\n            </Tab.Content>\r\n          </Tab.Container>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      <style jsx>{`\r\n        .info-group {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n        }\r\n\r\n        .info-item {\r\n          padding: 8px 0;\r\n          border-bottom: 1px solid #f0f0f0;\r\n        }\r\n\r\n        .info-item:last-child {\r\n          border-bottom: none;\r\n        }\r\n\r\n        .info-item strong {\r\n          color: #495057;\r\n          display: inline-block;\r\n          min-width: 140px;\r\n        }\r\n      `}</style>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default CustomerDetail;"],"mappings":"AAAA;AACA;AACA;AACA,GAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,GAAG,CAAEC,GAAG,CAAEC,IAAI,CAAEC,MAAM,CAAEC,KAAK,CAAEC,GAAG,CAAEC,GAAG,CAAEC,KAAK,CAAEC,KAAK,CAAEC,KAAK,CAAEC,IAAI,KAAQ,iBAAiB,CAC/G,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,OAAO,KAAQ,4BAA4B,CACpD,OAASC,eAAe,KAAQ,oCAAoC,CACpE,MAAO,CAAAC,cAAc,KAAM,wCAAwC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpE,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAAEC,EAAG,CAAC,CAAGZ,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAa,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEa,aAAc,CAAC,CAAGZ,OAAO,CAAC,CAAC,CACnC,KAAM,CAAEa,SAAU,CAAC,CAAGZ,eAAe,CAAC,CAAC,CAEvC,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAG/B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgC,QAAQ,CAAEC,WAAW,CAAC,CAAGjC,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACkC,SAAS,CAAEC,YAAY,CAAC,CAAGnC,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACoC,SAAS,CAAEC,YAAY,CAAC,CAAGrC,QAAQ,CAAC,MAAM,CAAC,CAClD;AAEA;AACA,KAAM,CAAAsC,YAAY,CAAG,CACnBZ,EAAE,CAAEa,QAAQ,CAACb,EAAE,CAAC,CAChBc,aAAa,CAAE,OAAO,CACtBC,YAAY,CAAE,4BAA4B,CAC1CC,cAAc,CAAE,cAAc,CAC9BC,KAAK,CAAE,iBAAiB,CACxBC,KAAK,CAAE,YAAY,CACnBC,OAAO,CAAE,+BAA+B,CACxCC,QAAQ,CAAE,YAAY,CACtBC,gBAAgB,CAAE,aAAa,CAC/BC,aAAa,CAAE,SAAS,CACxBC,aAAa,CAAE,GAAG,CAClBC,SAAS,CAAE,CACTC,SAAS,CAAE,aAAa,CACxBC,cAAc,CAAE,YAAY,CAC5BC,cAAc,CAAE,4BAClB,CAAC,CACDC,KAAK,CAAE,gCAAgC,CACvCC,UAAU,CAAE,YAAY,CACxBC,mBAAmB,CAAE,OACvB,CAAC,CAED,KAAM,CAAAC,aAAa,CAAG,CACpB,CACE/B,EAAE,CAAE,CAAC,CACLgC,eAAe,CAAE,UAAU,CAC3BC,YAAY,CAAE,sBAAsB,CACpCC,YAAY,CAAE,WAAW,CACzBC,SAAS,CAAE,IAAI,CACfC,SAAS,CAAE,YAAY,CACvBC,SAAS,CAAE,GAAG,CACdC,UAAU,CAAE,YAAY,CACxBC,QAAQ,CAAE,YAAY,CACtBC,YAAY,CAAE,MAAM,CACpBC,cAAc,CAAE,QAAQ,CACxBC,aAAa,CAAE,SAAS,CACxBC,MAAM,CAAE,QAAQ,CAChBC,iBAAiB,CAAE,GACrB,CAAC,CACD,CACE5C,EAAE,CAAE,CAAC,CACLgC,eAAe,CAAE,UAAU,CAC3BC,YAAY,CAAE,sBAAsB,CACpCC,YAAY,CAAE,WAAW,CACzBC,SAAS,CAAE,IAAI,CACfC,SAAS,CAAE,YAAY,CACvBC,SAAS,CAAE,GAAG,CACdC,UAAU,CAAE,YAAY,CACxBC,QAAQ,CAAE,YAAY,CACtBC,YAAY,CAAE,MAAM,CACpBC,cAAc,CAAE,QAAQ,CACxBC,aAAa,CAAE,SAAS,CACxBC,MAAM,CAAE,QAAQ,CAChBC,iBAAiB,CAAE,EACrB,CAAC,CACD,CACE5C,EAAE,CAAE,CAAC,CACLgC,eAAe,CAAE,UAAU,CAC3BC,YAAY,CAAE,8BAA8B,CAC5CC,YAAY,CAAE,WAAW,CACzBC,SAAS,CAAE,IAAI,CACfC,SAAS,CAAE,YAAY,CACvBC,SAAS,CAAE,GAAG,CACdC,UAAU,CAAE,YAAY,CACxBC,QAAQ,CAAE,YAAY,CACtBC,YAAY,CAAE,MAAM,CACpBC,cAAc,CAAE,QAAQ,CACxBC,aAAa,CAAE,SAAS,CACxBC,MAAM,CAAE,SAAS,CACjBC,iBAAiB,CAAE,CAAC,EACtB,CAAC,CACF,CAEDrE,SAAS,CAAC,IAAM,CACd;AACAsE,UAAU,CAAC,IAAM,CACftC,WAAW,CAACK,YAAY,CAAC,CACzBH,YAAY,CAACsB,aAAa,CAAC,CAC3B1B,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAE,CAACL,EAAE,CAAEY,YAAY,CAAEmB,aAAa,CAAC,CAAC,CAErC,KAAM,CAAAe,oBAAoB,CAAIC,MAAM,EAAK,CACvC,KAAM,CAAAC,SAAS,CAAG,CAChBC,CAAC,CAAE,CAAEC,OAAO,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC3CC,CAAC,CAAE,CAAEF,OAAO,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC3CE,CAAC,CAAE,CAAEH,OAAO,CAAE,SAAS,CAAEC,KAAK,CAAE,gBAAiB,CAAC,CAClDG,CAAC,CAAE,CAAEJ,OAAO,CAAE,QAAQ,CAAEC,KAAK,CAAE,SAAU,CAC3C,CAAC,CAED,KAAM,CAAAI,UAAU,CAAGP,SAAS,CAACD,MAAM,CAAC,EAAI,CAAEG,OAAO,CAAE,WAAW,CAAEC,KAAK,CAAEJ,MAAO,CAAC,CAC/E,mBAAOrD,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAED,UAAU,CAACL,OAAQ,CAAAO,QAAA,CAAEF,UAAU,CAACJ,KAAK,CAAQ,CAAC,CAClE,CAAC,CAED,KAAM,CAAAO,sBAAsB,CAAGA,CAACf,MAAM,CAAEgB,eAAe,GAAK,CAC1D,GAAIhB,MAAM,GAAK,SAAS,CAAE,CACxB,mBAAOjD,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAC,QAAQ,CAAAC,QAAA,CAAC,mBAAO,CAAO,CAAC,CAC3C,CACA,GAAId,MAAM,GAAK,YAAY,CAAE,CAC3B,mBAAOjD,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAC,WAAW,CAAAC,QAAA,CAAC,wBAAW,CAAO,CAAC,CAClD,CACA,GAAId,MAAM,GAAK,QAAQ,CAAE,CACvB,GAAIgB,eAAe,EAAI,EAAE,CAAE,CACzB,mBAAOjE,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAC,SAAS,CAAAC,QAAA,CAAC,4BAAW,CAAO,CAAC,CAChD,CACA,mBAAO/D,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAC,SAAS,CAAAC,QAAA,CAAC,oBAAQ,CAAO,CAAC,CAC7C,CACA,GAAId,MAAM,GAAK,OAAO,CAAE,CACtB,mBAAOjD,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAC,MAAM,CAAAC,QAAA,CAAC,kBAAQ,CAAO,CAAC,CAC1C,CACA,mBAAO/D,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAC,WAAW,CAAAC,QAAA,CAAEd,MAAM,CAAQ,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAiB,cAAc,CAAIC,MAAM,EAAK,CACjC,MAAO,IAAI,CAAAC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CACpCC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KACZ,CAAC,CAAC,CAACC,MAAM,CAACL,MAAM,CAAC,CAACM,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,CACrC,CAAC,CAED,KAAM,CAAAC,UAAU,CAAIC,IAAI,EAAK,CAC3B,MAAO,IAAI,CAAAP,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACG,MAAM,CAACG,IAAI,CAAC,CAAG,KAAK,CAC5D,CAAC,CAED,KAAM,CAAAC,qBAAqB,CAAGA,CAAA,GAAM,CAClC,MAAO,CAAA9D,SAAS,CACb+D,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC7B,MAAM,GAAK,QAAQ,CAAC,CAClC8B,MAAM,CAAC,CAACC,GAAG,CAAEC,QAAQ,GAAKD,GAAG,CAAIC,QAAQ,CAACnC,YAAY,CAAGmC,QAAQ,CAACtC,SAAU,CAAE,CAAC,CAAC,CACrF,CAAC,CAED,KAAM,CAAAuC,oBAAoB,CAAGA,CAAA,GAAM,CACjC,GAAI,CAAC1E,aAAa,CAAC,iBAAiB,CAAC,CAAE,CACrCC,SAAS,CAAC,qCAAqC,CAAC,CAChD,OACF,CACAF,QAAQ,+BAAA4E,MAAA,CAA+B7E,EAAE,CAAE,CAAC,CAC9C,CAAC,CAED,KAAM,CAAA8E,kBAAkB,CAAIC,UAAU,EAAK,CACzC9E,QAAQ,eAAA4E,MAAA,CAAeE,UAAU,CAAE,CAAC,CACtC,CAAC,CAED,GAAI3E,OAAO,CAAE,CACX,mBAAOV,IAAA,CAACF,cAAc,EAACwF,IAAI,CAAC,qDAAkC,CAAE,CAAC,CACnE,CAEA,GAAI,CAAC1E,QAAQ,CAAE,CACb,mBACEZ,IAAA,CAAClB,SAAS,EAACyG,SAAS,CAAC,MAAM,CAAAxB,QAAA,cACzB7D,KAAA,CAACV,KAAK,EAACgE,OAAO,CAAC,QAAQ,CAAC+B,SAAS,CAAC,aAAa,CAAAxB,QAAA,eAC7C/D,IAAA,OAAA+D,QAAA,CAAI,4CAAyB,CAAI,CAAC,cAClC7D,KAAA,MAAA6D,QAAA,EAAG,+BAAkB,CAACzD,EAAE,CAAC,kEAA8B,EAAG,CAAC,cAC3DN,IAAA,CAACd,MAAM,EAACsE,OAAO,CAAC,SAAS,CAACgC,OAAO,CAAEA,CAAA,GAAMjF,QAAQ,CAAC,YAAY,CAAE,CAAAwD,QAAA,CAAC,6CAEjE,CAAQ,CAAC,EACJ,CAAC,CACC,CAAC,CAEhB,CAEA,KAAM,CAAA0B,eAAe,CAAG3E,SAAS,CAAC+D,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC7B,MAAM,GAAK,QAAQ,CAAC,CACpE,KAAM,CAAAyC,iBAAiB,CAAGD,eAAe,CAACZ,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC5B,iBAAiB,EAAI,EAAE,CAAC,CAEhF,mBACEhD,KAAA,CAACpB,SAAS,EAAC6G,KAAK,MAACJ,SAAS,CAAC,KAAK,CAAAxB,QAAA,eAE9B/D,IAAA,CAACjB,GAAG,EAACwG,SAAS,CAAC,MAAM,CAAAxB,QAAA,cACnB/D,IAAA,CAAChB,GAAG,EAAA+E,QAAA,cACF7D,KAAA,QAAKqF,SAAS,CAAC,kDAAkD,CAAAxB,QAAA,eAC/D7D,KAAA,QAAA6D,QAAA,eACE7D,KAAA,QAAKqF,SAAS,CAAC,gCAAgC,CAAAxB,QAAA,eAC7C/D,IAAA,CAACd,MAAM,EACLsE,OAAO,CAAC,mBAAmB,CAC3BoC,IAAI,CAAC,IAAI,CACTL,SAAS,CAAC,MAAM,CAChBC,OAAO,CAAEA,CAAA,GAAMjF,QAAQ,CAAC,YAAY,CAAE,CAAAwD,QAAA,cAEtC/D,IAAA,MAAGuF,SAAS,CAAC,mBAAmB,CAAI,CAAC,CAC/B,CAAC,cACTrF,KAAA,QAAA6D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,MAAM,CAAAxB,QAAA,CAAEnD,QAAQ,CAACS,YAAY,EAAIT,QAAQ,CAACU,cAAc,CAAK,CAAC,cAC5EpB,KAAA,QAAKqF,SAAS,CAAC,gCAAgC,CAAAxB,QAAA,eAC7C7D,KAAA,SAAMqF,SAAS,CAAC,iBAAiB,CAAAxB,QAAA,EAAC,SAAI,CAACnD,QAAQ,CAACQ,aAAa,EAAO,CAAC,CACpEgC,oBAAoB,CAACxC,QAAQ,CAACiB,aAAa,CAAC,cAC7C7B,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAElD,QAAQ,CAACgB,aAAa,GAAK,SAAS,CAAG,MAAM,CAAG,WAAY,CAAC2D,SAAS,CAAC,MAAM,CAAAxB,QAAA,CACrFnD,QAAQ,CAACgB,aAAa,GAAK,SAAS,CAAG,cAAc,CAAG,SAAS,CAC7D,CAAC,EACL,CAAC,EACH,CAAC,EACH,CAAC,cACN1B,KAAA,MAAGqF,SAAS,CAAC,iBAAiB,CAAAxB,QAAA,eAC5B/D,IAAA,MAAGuF,SAAS,CAAC,kBAAkB,CAAI,CAAC,CAAC3E,QAAQ,CAACU,cAAc,cAC5DpB,KAAA,SAAMqF,SAAS,CAAC,MAAM,CAAAxB,QAAA,eACpB/D,IAAA,MAAGuF,SAAS,CAAC,mBAAmB,CAAI,CAAC,CAAC3E,QAAQ,CAACY,KAAK,EAChD,CAAC,CACNZ,QAAQ,CAACW,KAAK,eACbrB,KAAA,SAAMqF,SAAS,CAAC,MAAM,CAAAxB,QAAA,eACpB/D,IAAA,MAAGuF,SAAS,CAAC,sBAAsB,CAAI,CAAC,CAAC3E,QAAQ,CAACW,KAAK,EACnD,CACP,EACA,CAAC,EACD,CAAC,cAENrB,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAxB,QAAA,EAC1BvD,aAAa,CAAC,iBAAiB,CAAC,eAC/BN,KAAA,CAAChB,MAAM,EAACsE,OAAO,CAAC,iBAAiB,CAAAO,QAAA,eAC/B/D,IAAA,MAAGuF,SAAS,CAAC,kBAAkB,CAAI,CAAC,sBAEtC,EAAQ,CACT,CACA/E,aAAa,CAAC,iBAAiB,CAAC,eAC/BN,KAAA,CAAChB,MAAM,EAACsE,OAAO,CAAC,SAAS,CAACgC,OAAO,CAAEN,oBAAqB,CAAAnB,QAAA,eACtD/D,IAAA,MAAGuF,SAAS,CAAC,kBAAkB,CAAI,CAAC,mCAEtC,EAAQ,CACT,EACE,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,cAGNrF,KAAA,CAACnB,GAAG,EAACwG,SAAS,CAAC,MAAM,CAAAxB,QAAA,eACnB/D,IAAA,CAAChB,GAAG,EAAC6G,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACT/D,IAAA,CAACf,IAAI,EAACsG,SAAS,CAAC,oBAAoB,CAAAxB,QAAA,cAClC/D,IAAA,CAACf,IAAI,CAAC6G,IAAI,EAAA/B,QAAA,cACR7D,KAAA,QAAKqF,SAAS,CAAC,mDAAmD,CAAAxB,QAAA,eAChE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,iBAAiB,CAAAxB,QAAA,CAAC,mCAAa,CAAI,CAAC,cAClD/D,IAAA,OAAIuF,SAAS,CAAC,mBAAmB,CAAAxB,QAAA,CAAEjD,SAAS,CAACiF,MAAM,CAAK,CAAC,EACtD,CAAC,cACN/F,IAAA,MAAGuF,SAAS,CAAC,oDAAoD,CAAI,CAAC,EACnE,CAAC,CACG,CAAC,CACR,CAAC,CACJ,CAAC,cACNvF,IAAA,CAAChB,GAAG,EAAC6G,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACT/D,IAAA,CAACf,IAAI,EAACsG,SAAS,CAAC,oBAAoB,CAAAxB,QAAA,cAClC/D,IAAA,CAACf,IAAI,CAAC6G,IAAI,EAAA/B,QAAA,cACR7D,KAAA,QAAKqF,SAAS,CAAC,mDAAmD,CAAAxB,QAAA,eAChE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,iBAAiB,CAAAxB,QAAA,CAAC,8BAAa,CAAI,CAAC,cAClD/D,IAAA,OAAIuF,SAAS,CAAC,mBAAmB,CAAAxB,QAAA,CAAE0B,eAAe,CAACM,MAAM,CAAK,CAAC,EAC5D,CAAC,cACN/F,IAAA,MAAGuF,SAAS,CAAC,mDAAmD,CAAI,CAAC,EAClE,CAAC,CACG,CAAC,CACR,CAAC,CACJ,CAAC,cACNvF,IAAA,CAAChB,GAAG,EAAC6G,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACT/D,IAAA,CAACf,IAAI,EAACsG,SAAS,CAAC,oBAAoB,CAAAxB,QAAA,cAClC/D,IAAA,CAACf,IAAI,CAAC6G,IAAI,EAAA/B,QAAA,cACR7D,KAAA,QAAKqF,SAAS,CAAC,mDAAmD,CAAAxB,QAAA,eAChE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,iBAAiB,CAAAxB,QAAA,CAAC,4BAAW,CAAI,CAAC,cAChD/D,IAAA,OAAIuF,SAAS,CAAC,mBAAmB,CAAAxB,QAAA,CAAE2B,iBAAiB,CAACK,MAAM,CAAK,CAAC,EAC9D,CAAC,cACN/F,IAAA,MAAGuF,SAAS,CAAC,2DAA2D,CAAI,CAAC,EAC1E,CAAC,CACG,CAAC,CACR,CAAC,CACJ,CAAC,cACNvF,IAAA,CAAChB,GAAG,EAAC6G,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACT/D,IAAA,CAACf,IAAI,EAACsG,SAAS,CAAC,oBAAoB,CAAAxB,QAAA,cAClC/D,IAAA,CAACf,IAAI,CAAC6G,IAAI,EAAA/B,QAAA,cACR7D,KAAA,QAAKqF,SAAS,CAAC,mDAAmD,CAAAxB,QAAA,eAChE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,iBAAiB,CAAAxB,QAAA,CAAC,oBAAe,CAAI,CAAC,cACpD/D,IAAA,OAAIuF,SAAS,CAAC,gBAAgB,CAAAxB,QAAA,CAAEG,cAAc,CAACU,qBAAqB,CAAC,CAAC,CAAC,CAAK,CAAC,EAC1E,CAAC,cACN5E,IAAA,MAAGuF,SAAS,CAAC,8CAA8C,CAAI,CAAC,EAC7D,CAAC,CACG,CAAC,CACR,CAAC,CACJ,CAAC,EACH,CAAC,cAGNrF,KAAA,CAACjB,IAAI,EAACsG,SAAS,CAAC,oBAAoB,CAAAxB,QAAA,eAClC/D,IAAA,CAACf,IAAI,CAAC+G,MAAM,EAACT,SAAS,CAAC,mBAAmB,CAAAxB,QAAA,cACxC/D,IAAA,CAACZ,GAAG,CAACN,SAAS,EAACmH,SAAS,CAAEjF,SAAU,CAACkF,QAAQ,CAAEjF,YAAa,CAAA8C,QAAA,cAC1D7D,KAAA,CAACb,GAAG,EAACmE,OAAO,CAAC,MAAM,CAAC+B,SAAS,CAAC,UAAU,CAAAxB,QAAA,eACtC/D,IAAA,CAACX,GAAG,CAAC8G,IAAI,EAAApC,QAAA,cACP7D,KAAA,CAACb,GAAG,CAAC+G,IAAI,EAACC,QAAQ,CAAC,MAAM,CAAAtC,QAAA,eACvB/D,IAAA,MAAGuF,SAAS,CAAC,yBAAyB,CAAI,CAAC,6BAE7C,EAAU,CAAC,CACH,CAAC,cACXvF,IAAA,CAACX,GAAG,CAAC8G,IAAI,EAAApC,QAAA,cACP7D,KAAA,CAACb,GAAG,CAAC+G,IAAI,EAACC,QAAQ,CAAC,WAAW,CAAAtC,QAAA,eAC5B/D,IAAA,MAAGuF,SAAS,CAAC,2BAA2B,CAAI,CAAC,4BACnC,CAACzE,SAAS,CAACiF,MAAM,CAAC,GAC9B,EAAU,CAAC,CACH,CAAC,cACX/F,IAAA,CAACX,GAAG,CAAC8G,IAAI,EAAApC,QAAA,cACP7D,KAAA,CAACb,GAAG,CAAC+G,IAAI,EAACC,QAAQ,CAAC,WAAW,CAAAtC,QAAA,eAC5B/D,IAAA,MAAGuF,SAAS,CAAC,oBAAoB,CAAI,CAAC,mCAExC,EAAU,CAAC,CACH,CAAC,cACXvF,IAAA,CAACX,GAAG,CAAC8G,IAAI,EAAApC,QAAA,cACP7D,KAAA,CAACb,GAAG,CAAC+G,IAAI,EAACC,QAAQ,CAAC,YAAY,CAAAtC,QAAA,eAC7B/D,IAAA,MAAGuF,SAAS,CAAC,qBAAqB,CAAI,CAAC,6CAEzC,EAAU,CAAC,CACH,CAAC,EACR,CAAC,CACO,CAAC,CACL,CAAC,cAEdvF,IAAA,CAACf,IAAI,CAAC6G,IAAI,EAAA/B,QAAA,cACR/D,IAAA,CAACZ,GAAG,CAACN,SAAS,EAACmH,SAAS,CAAEjF,SAAU,CAAA+C,QAAA,cAClC7D,KAAA,CAACd,GAAG,CAACkH,OAAO,EAAAvC,QAAA,eAEV/D,IAAA,CAACZ,GAAG,CAACmH,IAAI,EAACF,QAAQ,CAAC,MAAM,CAAAtC,QAAA,cACvB7D,KAAA,CAACnB,GAAG,EAAAgF,QAAA,eACF7D,KAAA,CAAClB,GAAG,EAAC6G,EAAE,CAAE,CAAE,CAAA9B,QAAA,eACT/D,IAAA,OAAIuF,SAAS,CAAC,MAAM,CAAAxB,QAAA,CAAC,+BAAgB,CAAI,CAAC,cAC1C7D,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAxB,QAAA,eACzB7D,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,yBAAc,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACQ,aAAa,EACpD,CAAC,CACLR,QAAQ,CAACS,YAAY,eACpBnB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,oBAAY,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACS,YAAY,EACjD,CACN,cACDnB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,kCAAc,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACU,cAAc,EACrD,CAAC,cACNpB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,4BAAW,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACY,KAAK,EACzC,CAAC,CACLZ,QAAQ,CAACW,KAAK,eACbrB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACW,KAAK,EACpC,CACN,cACDrB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,yBAAQ,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACa,OAAO,EACxC,CAAC,cACNvB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,6BAAgB,CAAQ,CAAC,cACjC/D,IAAA,CAACb,KAAK,EAAC2E,EAAE,CAAElD,QAAQ,CAACgB,aAAa,GAAK,SAAS,CAAG,MAAM,CAAG,WAAY,CAAC2D,SAAS,CAAC,MAAM,CAAAxB,QAAA,CACrFnD,QAAQ,CAACgB,aAAa,GAAK,SAAS,CAAG,cAAc,CAAG,SAAS,CAC7D,CAAC,EACL,CAAC,cACN1B,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,sCAAkB,CAAQ,CAAC,IAAC,CAACX,oBAAoB,CAACxC,QAAQ,CAACiB,aAAa,CAAC,EAC9E,CAAC,EACH,CAAC,EACH,CAAC,cAEN3B,KAAA,CAAClB,GAAG,EAAC6G,EAAE,CAAE,CAAE,CAAA9B,QAAA,EACRnD,QAAQ,CAACgB,aAAa,GAAK,SAAS,eACnC1B,KAAA,CAAAE,SAAA,EAAA2D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,MAAM,CAAAxB,QAAA,CAAC,gCAAsB,CAAI,CAAC,cAChD7D,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAxB,QAAA,eACzB7D,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,0BAAW,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACc,QAAQ,EAAI,SAAS,EACzD,CAAC,cACNxB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,+BAAqB,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACe,gBAAgB,EAAI,SAAS,EAC3E,CAAC,EACH,CAAC,EACN,CACH,CAEAf,QAAQ,CAACkB,SAAS,eACjB5B,KAAA,CAAAE,SAAA,EAAA2D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,WAAW,CAAAxB,QAAA,CAAC,8BAAmB,CAAI,CAAC,cAClD7D,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAxB,QAAA,eACzB7D,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,kBAAU,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACkB,SAAS,CAACC,SAAS,EACtD,CAAC,cACN7B,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,4BAAa,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACkB,SAAS,CAACE,cAAc,EAC9D,CAAC,cACN9B,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAxB,QAAA,eACxB/D,IAAA,WAAA+D,QAAA,CAAQ,6BAAc,CAAQ,CAAC,IAAC,CAACnD,QAAQ,CAACkB,SAAS,CAACG,cAAc,EAC/D,CAAC,EACH,CAAC,EACN,CACH,CAEArB,QAAQ,CAACsB,KAAK,eACbhC,KAAA,CAAAE,SAAA,EAAA2D,QAAA,eACE/D,IAAA,OAAIuF,SAAS,CAAC,WAAW,CAAAxB,QAAA,CAAC,YAAO,CAAI,CAAC,cACtC/D,IAAA,MAAGuF,SAAS,CAAC,YAAY,CAAAxB,QAAA,CAAEnD,QAAQ,CAACsB,KAAK,CAAI,CAAC,EAC9C,CACH,EACE,CAAC,EACH,CAAC,CACE,CAAC,cAGXhC,KAAA,CAACd,GAAG,CAACmH,IAAI,EAACF,QAAQ,CAAC,WAAW,CAAAtC,QAAA,eAC5B7D,KAAA,QAAKqF,SAAS,CAAC,wDAAwD,CAAAxB,QAAA,eACrE/D,IAAA,OAAIuF,SAAS,CAAC,MAAM,CAAAxB,QAAA,CAAC,sCAAkB,CAAI,CAAC,CAC3CvD,aAAa,CAAC,iBAAiB,CAAC,eAC/BN,KAAA,CAAChB,MAAM,EAACsE,OAAO,CAAC,SAAS,CAACoC,IAAI,CAAC,IAAI,CAACJ,OAAO,CAAEN,oBAAqB,CAAAnB,QAAA,eAChE/D,IAAA,MAAGuF,SAAS,CAAC,kBAAkB,CAAI,CAAC,4CAEtC,EAAQ,CACT,EACE,CAAC,CAELG,iBAAiB,CAACK,MAAM,CAAG,CAAC,eAC3B7F,KAAA,CAACV,KAAK,EAACgE,OAAO,CAAC,SAAS,CAAC+B,SAAS,CAAC,MAAM,CAAAxB,QAAA,eACvC/D,IAAA,MAAGuF,SAAS,CAAC,kCAAkC,CAAI,CAAC,cACpDvF,IAAA,WAAA+D,QAAA,CAAQ,mBAAS,CAAQ,CAAC,UAAI,CAAC2B,iBAAiB,CAACK,MAAM,CAAC,gFAC1D,EAAO,CACR,cAED/F,IAAA,QAAKuF,SAAS,CAAC,kBAAkB,CAAAxB,QAAA,cAC/B7D,KAAA,CAACZ,KAAK,EAACkH,KAAK,MAAAzC,QAAA,eACV/D,IAAA,UAAOuF,SAAS,CAAC,UAAU,CAAAxB,QAAA,cACzB7D,KAAA,OAAA6D,QAAA,eACE/D,IAAA,OAAA+D,QAAA,CAAI,yBAAQ,CAAI,CAAC,cACjB/D,IAAA,OAAA+D,QAAA,CAAI,eAAK,CAAI,CAAC,cACd/D,IAAA,OAAA+D,QAAA,CAAI,MAAI,CAAI,CAAC,cACb/D,IAAA,OAAA+D,QAAA,CAAI,oBAAQ,CAAI,CAAC,cACjB/D,IAAA,OAAA+D,QAAA,CAAI,gBAAQ,CAAI,CAAC,cACjB/D,IAAA,OAAA+D,QAAA,CAAI,oBAAU,CAAI,CAAC,cACnB/D,IAAA,OAAA+D,QAAA,CAAI,aAAQ,CAAI,CAAC,EACf,CAAC,CACA,CAAC,cACR/D,IAAA,UAAA+D,QAAA,CACGjD,SAAS,CAACiF,MAAM,CAAG,CAAC,CACnBjF,SAAS,CAAC2F,GAAG,CAAExB,QAAQ,eACrB/E,KAAA,OAAA6D,QAAA,eACE/D,IAAA,OAAA+D,QAAA,cACE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,QAAKuF,SAAS,CAAC,SAAS,CAAAxB,QAAA,CAAEkB,QAAQ,CAAC3C,eAAe,CAAM,CAAC,cACzDtC,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAxB,QAAA,CAC1BkB,QAAQ,CAACjC,aAAa,GAAK,SAAS,CAAG,OAAO,CAC9CiC,QAAQ,CAACjC,aAAa,GAAK,WAAW,CAAG,KAAK,CAAG,KAAK,CAClD,CAAC,EACL,CAAC,CACJ,CAAC,cACLhD,IAAA,OAAA+D,QAAA,cACE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,QAAA+D,QAAA,CAAMkB,QAAQ,CAAC1C,YAAY,CAAM,CAAC,cAClCvC,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAxB,QAAA,CAAEkB,QAAQ,CAACzC,YAAY,CAAQ,CAAC,EAC1D,CAAC,CACJ,CAAC,cACLxC,IAAA,OAAA+D,QAAA,cACE7D,KAAA,QAAA6D,QAAA,eACE/D,IAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAxB,QAAA,CAAEkB,QAAQ,CAACxC,SAAS,CAAM,CAAC,cACrDzC,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAxB,QAAA,CAAEW,UAAU,CAACO,QAAQ,CAACtC,SAAS,CAAC,CAAQ,CAAC,EACnE,CAAC,CACJ,CAAC,cACL3C,IAAA,OAAA+D,QAAA,cACE7D,KAAA,QAAA6D,QAAA,eACE7D,KAAA,QAAA6D,QAAA,EACG,GAAI,CAAA2C,IAAI,CAACzB,QAAQ,CAACrC,UAAU,CAAC,CAAC+D,kBAAkB,CAAC,OAAO,CAAC,CAAC,IAC3D,CAAC,GAAI,CAAAD,IAAI,CAACzB,QAAQ,CAACpC,QAAQ,CAAC,CAAC8D,kBAAkB,CAAC,OAAO,CAAC,EACrD,CAAC,CACL1B,QAAQ,CAAChC,MAAM,GAAK,QAAQ,EAAIgC,QAAQ,CAAC/B,iBAAiB,CAAG,CAAC,eAC7DhD,KAAA,UAAOqF,SAAS,IAAAJ,MAAA,CAAKF,QAAQ,CAAC/B,iBAAiB,EAAI,EAAE,CAAG,cAAc,CAAG,YAAY,CAAG,CAAAa,QAAA,EAAC,SACnF,CAACkB,QAAQ,CAAC/B,iBAAiB,CAAC,UAClC,EAAO,CACR,EACE,CAAC,CACJ,CAAC,cACLlD,IAAA,OAAA+D,QAAA,cACE7D,KAAA,QAAA6D,QAAA,eACE7D,KAAA,QAAKqF,SAAS,CAAC,SAAS,CAAAxB,QAAA,EACrBG,cAAc,CAACe,QAAQ,CAACnC,YAAY,CAAC,CAAC,QACzC,EAAK,CAAC,cACN5C,KAAA,UAAOqF,SAAS,CAAC,YAAY,CAAAxB,QAAA,EAAC,aACtB,CAACG,cAAc,CAACe,QAAQ,CAACnC,YAAY,CAAGmC,QAAQ,CAACtC,SAAS,CAAC,CAAC,WACpE,EAAO,CAAC,EACL,CAAC,CACJ,CAAC,cACL3C,IAAA,OAAA+D,QAAA,CAAKC,sBAAsB,CAACiB,QAAQ,CAAChC,MAAM,CAAEgC,QAAQ,CAAC/B,iBAAiB,CAAC,CAAK,CAAC,cAC9ElD,IAAA,OAAA+D,QAAA,cACE/D,IAAA,CAACd,MAAM,EACLsE,OAAO,CAAC,iBAAiB,CACzBoC,IAAI,CAAC,IAAI,CACTJ,OAAO,CAAEA,CAAA,GAAMJ,kBAAkB,CAACH,QAAQ,CAAC3E,EAAE,CAAE,CAAAyD,QAAA,cAE/C/D,IAAA,MAAGuF,SAAS,CAAC,YAAY,CAAI,CAAC,CACxB,CAAC,CACP,CAAC,GAtDEN,QAAQ,CAAC3E,EAuDd,CACL,CAAC,cAEFN,IAAA,OAAA+D,QAAA,cACE/D,IAAA,OAAI4G,OAAO,CAAE,CAAE,CAACrB,SAAS,CAAC,kBAAkB,CAAAxB,QAAA,cAC1C7D,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAxB,QAAA,eACzB/D,IAAA,MAAGuF,SAAS,CAAC,iCAAiC,CAAI,CAAC,cACnDvF,IAAA,MAAA+D,QAAA,CAAG,gDAAoB,CAAG,CAAC,CAC1BvD,aAAa,CAAC,iBAAiB,CAAC,eAC/BR,IAAA,CAACd,MAAM,EAACsE,OAAO,CAAC,SAAS,CAACgC,OAAO,CAAEN,oBAAqB,CAAAnB,QAAA,CAAC,wDAEzD,CAAQ,CACT,EACE,CAAC,CACJ,CAAC,CACH,CACL,CACI,CAAC,EACH,CAAC,CACL,CAAC,EACE,CAAC,cAGX/D,IAAA,CAACZ,GAAG,CAACmH,IAAI,EAACF,QAAQ,CAAC,WAAW,CAAAtC,QAAA,cAC5B7D,KAAA,QAAKqF,SAAS,CAAC,kBAAkB,CAAAxB,QAAA,eAC/B/D,IAAA,MAAGuF,SAAS,CAAC,0CAA0C,CAAI,CAAC,cAC5DvF,IAAA,OAAA+D,QAAA,CAAI,kCAAc,CAAI,CAAC,cACvB/D,IAAA,MAAGuF,SAAS,CAAC,YAAY,CAAAxB,QAAA,CAAC,qFAE1B,CAAG,CAAC,cACJ7D,KAAA,CAACV,KAAK,EAACgE,OAAO,CAAC,MAAM,CAAAO,QAAA,eACnB/D,IAAA,WAAA+D,QAAA,CAAQ,iDAA0B,CAAQ,CAAC,cAC3C/D,IAAA,QAAK,CAAC,yDACN,cAAAA,IAAA,QAAK,CAAC,uDACN,cAAAA,IAAA,QAAK,CAAC,oDACR,EAAO,CAAC,EACL,CAAC,CACE,CAAC,cAGXA,IAAA,CAACZ,GAAG,CAACmH,IAAI,EAACF,QAAQ,CAAC,YAAY,CAAAtC,QAAA,cAC7B7D,KAAA,QAAKqF,SAAS,CAAC,kBAAkB,CAAAxB,QAAA,eAC/B/D,IAAA,MAAGuF,SAAS,CAAC,sCAAsC,CAAI,CAAC,cACxDvF,IAAA,OAAA+D,QAAA,CAAI,4CAAiB,CAAI,CAAC,cAC1B/D,IAAA,MAAGuF,SAAS,CAAC,YAAY,CAAAxB,QAAA,CAAC,gGAE1B,CAAG,CAAC,cACJ7D,KAAA,CAACV,KAAK,EAACgE,OAAO,CAAC,MAAM,CAAAO,QAAA,eACnB/D,IAAA,WAAA+D,QAAA,CAAQ,iDAA0B,CAAQ,CAAC,cAC3C/D,IAAA,QAAK,CAAC,2DACN,cAAAA,IAAA,QAAK,CAAC,oCACN,cAAAA,IAAA,QAAK,CAAC,qDACR,EAAO,CAAC,EACL,CAAC,CACE,CAAC,EACA,CAAC,CACD,CAAC,CACP,CAAC,EACR,CAAC,cAEPA,IAAA,UAAOD,GAAG,MAAAgE,QAAA,8bAqBD,CAAC,EACD,CAAC,CAEhB,CAEA,cAAe,CAAA1D,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
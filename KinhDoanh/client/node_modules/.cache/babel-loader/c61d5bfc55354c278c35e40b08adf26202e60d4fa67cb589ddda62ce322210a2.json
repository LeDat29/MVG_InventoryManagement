{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\GitHub\\\\MVG_InventoryManagement\\\\KinhDoanh\\\\client\\\\src\\\\pages\\\\Customers\\\\index.js\",\n  _s = $RefreshSig$();\n/**\r\n * Customers Page - KHO MVG\r\n * Danh sÃ¡ch vÃ  quáº£n lÃ½ khÃ¡ch hÃ ng\r\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Container, Row, Col, Card, Button, Table, Badge, Form, Modal } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useNotification } from '../../contexts/NotificationContext';\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\nimport CustomerFormTabs from '../../components/Customers/CustomerFormTabs';\nimport customerService from '../../services/customerService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Customers() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    hasPermission\n  } = useAuth();\n  const {\n    showSuccess,\n    showError\n  } = useNotification();\n  const [loading, setLoading] = useState(true);\n  const [customers, setCustomers] = useState([]);\n  const [filteredCustomers, setFilteredCustomers] = useState([]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingCustomer, setEditingCustomer] = useState(null);\n  const [formLoading, setFormLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: 20,\n    total: 0,\n    pages: 0\n  });\n  const [filters, setFilters] = useState({\n    search: '',\n    customer_type: '',\n    credit_rating: ''\n  });\n\n  // Load customers from API\n  const loadCustomers = useCallback(async (page = 1) => {\n    try {\n      setLoading(true);\n      const params = {\n        page,\n        limit: pagination.limit,\n        ...filters\n      };\n\n      // Remove empty filters\n      Object.keys(params).forEach(key => {\n        if (!params[key]) delete params[key];\n      });\n      const response = await customerService.getCustomers(params);\n      setCustomers(response.data.customers);\n      setFilteredCustomers(response.data.customers);\n      setPagination(response.data.pagination);\n    } catch (error) {\n      // showError('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch khÃ¡ch hÃ ng: ' + error.message);\n      console.warn('Customer loading error:', error.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters, pagination.limit, showError]);\n  useEffect(() => {\n    if (hasPermission('customer_read')) {\n      loadCustomers(pagination.page);\n    }\n  }, [hasPermission, loadCustomers, pagination.page]);\n  useEffect(() => {\n    loadCustomers(pagination.page);\n  }, []);\n\n  // Handle filter changes\n  useEffect(() => {\n    // Debounce search to avoid too many API calls\n    const timeoutId = setTimeout(() => {\n      if (pagination.page === 1) {\n        loadCustomers(1);\n      } else {\n        setPagination(prev => ({\n          ...prev,\n          page: 1\n        }));\n        loadCustomers(1);\n      }\n    }, 500);\n    return () => clearTimeout(timeoutId);\n  }, [filters]);\n  const handleFilterChange = (key, value) => {\n    setFilters(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n  const getCreditRatingBadge = rating => {\n    const ratingMap = {\n      A: {\n        variant: 'success',\n        label: 'A - Tá»‘t'\n      },\n      B: {\n        variant: 'primary',\n        label: 'B - KhÃ¡'\n      },\n      C: {\n        variant: 'warning',\n        label: 'C - Trung bÃ¬nh'\n      },\n      D: {\n        variant: 'danger',\n        label: 'D - KÃ©m'\n      }\n    };\n    const ratingInfo = ratingMap[rating] || {\n      variant: 'secondary',\n      label: rating\n    };\n    return /*#__PURE__*/_jsxDEV(Badge, {\n      bg: ratingInfo.variant,\n      children: ratingInfo.label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 12\n    }, this);\n  };\n  const getCustomerTypeBadge = type => {\n    return type === 'company' ? /*#__PURE__*/_jsxDEV(Badge, {\n      bg: \"info\",\n      children: \"Doanh nghi\\u1EC7p\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(Badge, {\n      bg: \"secondary\",\n      children: \"C\\xE1 nh\\xE2n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this);\n  };\n  const formatCurrency = amount => {\n    return new Intl.NumberFormat('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    }).format(amount).replace('â‚«', 'Ä‘');\n  };\n  const handleViewCustomer = customerId => {\n    navigate(`/customers/${customerId}`);\n  };\n  const handleCreateCustomer = () => {\n    if (!hasPermission('customer_create')) {\n      showError('Báº¡n khÃ´ng cÃ³ quyá»n táº¡o khÃ¡ch hÃ ng má»›i');\n      return;\n    }\n    setEditingCustomer(null);\n    setShowCreateModal(true);\n  };\n  const handleEditCustomer = async customer => {\n    if (!hasPermission('customer_update')) {\n      showError('Báº¡n khÃ´ng cÃ³ quyá»n chá»‰nh sá»­a khÃ¡ch hÃ ng');\n      return;\n    }\n    try {\n      setFormLoading(true);\n      console.log('ðŸ” Loading full customer data including contracts...');\n\n      // Load full customer data with contracts from API\n      const fullCustomerData = await customerService.getCustomer(customer.id);\n      console.log('âœ… Full customer data loaded:', fullCustomerData.data);\n\n      // Merge customer info with contracts data\n      const customerWithContracts = {\n        ...fullCustomerData.data.customer,\n        // Customer personal/company info\n        contracts: fullCustomerData.data.contracts || [],\n        // Contracts array\n        statistics: fullCustomerData.data.statistics\n      };\n      console.log('âœ… Merged customer data for form:', customerWithContracts);\n      setEditingCustomer(customerWithContracts);\n      setShowEditModal(true);\n    } catch (error) {\n      console.error('âŒ Failed to load customer details:', error);\n      // Fallback to using basic customer data if API fails\n      setEditingCustomer(customer);\n      setShowEditModal(true);\n    } finally {\n      setFormLoading(false);\n    }\n  };\n  const handleDeleteCustomer = async customer => {\n    if (!hasPermission('customer_delete')) {\n      showError('Báº¡n khÃ´ng cÃ³ quyá»n xÃ³a khÃ¡ch hÃ ng');\n      return;\n    }\n    if (window.confirm(`Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a khÃ¡ch hÃ ng \"${customer.company_name || customer.contact_person}\"?`)) {\n      try {\n        await customerService.deleteCustomer(customer.id);\n        showSuccess('XÃ³a khÃ¡ch hÃ ng thÃ nh cÃ´ng');\n        loadCustomers(pagination.page);\n      } catch (error) {\n        showError('KhÃ´ng thá»ƒ xÃ³a khÃ¡ch hÃ ng: ' + error.message);\n      }\n    }\n  };\n\n  // Transform form data to API format\n  const transformFormDataToAPI = formData => {\n    console.log('ðŸ” Raw form data received:', formData);\n\n    // Safety checks for form data structure\n    if (!formData || typeof formData !== 'object') {\n      console.error('âŒ Invalid form data structure:', formData);\n      throw new Error('Invalid form data received');\n    }\n    const {\n      personal = {},\n      companies = []\n    } = formData;\n    const primaryCompany = companies[0] || {};\n    console.log('ðŸ“‹ Form data breakdown:', {\n      personal,\n      primaryCompany,\n      companiesLength: companies.length\n    });\n    const apiData = {\n      // Map from personal tab\n      name: primaryCompany.company_name || personal.full_name || '',\n      full_name: personal.full_name || '',\n      representative_name: personal.full_name || '',\n      phone: personal.phone || '',\n      email: personal.email || '',\n      address: personal.address || primaryCompany.invoice_address || '',\n      customer_type: personal.customer_type || 'individual',\n      notes: personal.notes || '',\n      id_number: personal.id_number || '',\n      warehouse_purpose: primaryCompany.warehouse_purpose || '',\n      // Map from company tab  \n      tax_code: primaryCompany.tax_code || '',\n      representative_phone: personal.phone || '',\n      representative_email: personal.email || ''\n    };\n    console.log('ðŸ“Š Field mapping details:');\n    console.log('  personal.full_name â†’', apiData.full_name, '& representative_name â†’', apiData.representative_name);\n    console.log('  personal.id_number â†’', apiData.id_number);\n    console.log('  personal.phone â†’', apiData.phone);\n    console.log('  personal.email â†’', apiData.email);\n    console.log('  personal.address â†’', apiData.address);\n    console.log('  primaryCompany.company_name â†’', apiData.name);\n    console.log('  primaryCompany.warehouse_purpose â†’', apiData.warehouse_purpose);\n    console.log('  primaryCompany.tax_code â†’', apiData.tax_code);\n    console.log('âœ… Transformed API data:', apiData);\n\n    // Validation checks\n    if (!apiData.representative_name || !apiData.phone) {\n      console.error('âŒ Missing required fields:', {\n        representative_name: apiData.representative_name,\n        phone: apiData.phone\n      });\n      throw new Error('Missing required fields: representative_name or phone');\n    }\n    return apiData;\n  };\n  const handleSaveCustomer = async customerData => {\n    try {\n      setFormLoading(true);\n\n      // Transform the nested form data to flat API format\n      const apiData = transformFormDataToAPI(customerData);\n      console.log('Transformed customer data:', apiData);\n      if (editingCustomer) {\n        await customerService.updateCustomer(editingCustomer.id, apiData);\n        showSuccess('Cáº­p nháº­t khÃ¡ch hÃ ng thÃ nh cÃ´ng');\n        setShowEditModal(false);\n\n        // Force reload customer data to show updated info\n        console.log('ðŸ”„ Reloading customers list after update...');\n        await loadCustomers(pagination.page);\n        console.log('âœ… Customers list reloaded successfully');\n      } else {\n        await customerService.createCustomer(apiData);\n        showSuccess('Táº¡o khÃ¡ch hÃ ng má»›i thÃ nh cÃ´ng');\n        setShowCreateModal(false);\n\n        // Reload list to show new customer\n        await loadCustomers(pagination.page);\n      }\n      setEditingCustomer(null);\n    } catch (error) {\n      throw error; // Let the form handle the error\n    } finally {\n      setFormLoading(false);\n    }\n  };\n\n  // const handlePageChange = (newPage) => {\n  //   setPagination(prev => ({ ...prev, page: newPage }));\n  //   loadCustomers(newPage);\n  // };\n\n  const totalRevenue = customers.reduce((sum, customer) => sum + customer.monthly_revenue, 0);\n  const activeCustomers = customers.filter(c => c.active_contracts > 0).length;\n  const averageRevenue = customers.length > 0 ? totalRevenue / customers.length : 0;\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      text: \"\\u0110ang t\\u1EA3i danh s\\xE1ch kh\\xE1ch h\\xE0ng...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-1\",\n              children: \"Qu\\u1EA3n l\\xFD Kh\\xE1ch h\\xE0ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: \"Qu\\u1EA3n l\\xFD th\\xF4ng tin kh\\xE1ch h\\xE0ng v\\xE0 h\\u1EE3p \\u0111\\u1ED3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), hasPermission('customer_create') && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleCreateCustomer,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-plus me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), \"Th\\xEAm kh\\xE1ch h\\xE0ng\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"text-muted mb-1\",\n                  children: \"T\\u1ED5ng kh\\xE1ch h\\xE0ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"mb-0 text-primary\",\n                  children: customers.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-users fa-2x text-primary opacity-25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"text-muted mb-1\",\n                  children: \"\\u0110ang ho\\u1EA1t \\u0111\\u1ED9ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"mb-0 text-success\",\n                  children: activeCustomers\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-user-check fa-2x text-success opacity-25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"text-muted mb-1\",\n                  children: \"T\\u1ED5ng doanh thu/th\\xE1ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"mb-0 text-warning\",\n                  children: formatCurrency(totalRevenue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-chart-line fa-2x text-warning opacity-25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                  className: \"text-muted mb-1\",\n                  children: \"TB doanh thu/KH\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"mb-0 text-info\",\n                  children: formatCurrency(averageRevenue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-calculator fa-2x text-info opacity-25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"border-0 shadow-sm mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"T\\xECm ki\\u1EBFm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                placeholder: \"T\\xECm theo m\\xE3, t\\xEAn, S\\u0110T, email...\",\n                value: filters.search,\n                onChange: e => handleFilterChange('search', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Lo\\u1EA1i kh\\xE1ch h\\xE0ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                value: filters.customer_type,\n                onChange: e => handleFilterChange('customer_type', e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"T\\u1EA5t c\\u1EA3 lo\\u1EA1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"company\",\n                  children: \"Doanh nghi\\u1EC7p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"individual\",\n                  children: \"C\\xE1 nh\\xE2n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"X\\u1EBFp h\\u1EA1ng t\\xEDn d\\u1EE5ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                value: filters.credit_rating,\n                onChange: e => handleFilterChange('credit_rating', e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"T\\u1EA5t c\\u1EA3 x\\u1EBFp h\\u1EA1ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"A\",\n                  children: \"A - T\\u1ED1t\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"B\",\n                  children: \"B - Kh\\xE1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"C\",\n                  children: \"C - Trung b\\xECnh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"D\",\n                  children: \"D - K\\xE9m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"border-0 shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        className: \"bg-white border-0\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-list me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), \"Danh s\\xE1ch kh\\xE1ch h\\xE0ng (\", filteredCustomers.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        className: \"p-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            hover: true,\n            className: \"mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-light\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Kh\\xE1ch h\\xE0ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Li\\xEAn h\\u1EC7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Lo\\u1EA1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"X\\u1EBFp h\\u1EA1ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"H\\u1EE3p \\u0111\\u1ED3ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Doanh thu/th\\xE1ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Thao t\\xE1c\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: filteredCustomers.length > 0 ? filteredCustomers.map(customer => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"fw-bold\",\n                      children: customer.company_name || customer.contact_person\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 450,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted\",\n                      children: customer.customer_code\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 453,\n                      columnNumber: 27\n                    }, this), customer.company_name && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"small\", {\n                        className: \"text-muted\",\n                        children: customer.contact_person\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 456,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 455,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-phone fa-sm me-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 464,\n                        columnNumber: 29\n                      }, this), customer.phone]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 463,\n                      columnNumber: 27\n                    }, this), customer.email && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-envelope fa-sm me-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 469,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: customer.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 470,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 468,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-muted\",\n                      children: /*#__PURE__*/_jsxDEV(\"small\", {\n                        children: customer.address\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 474,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 473,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: getCustomerTypeBadge(customer.customer_type)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: getCreditRatingBadge(customer.credit_rating)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"fw-medium text-success\",\n                        children: customer.active_contracts\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 483,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-muted\",\n                        children: [\"/\", customer.total_contracts]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 486,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 482,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted\",\n                      children: \"Hi\\u1EC7u l\\u1EF1c/T\\u1ED5ng\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 488,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 481,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"fw-bold text-success\",\n                    children: formatCurrency(customer.monthly_revenue)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 492,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"btn-group\",\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outline-primary\",\n                      size: \"sm\",\n                      onClick: () => handleViewCustomer(customer.id),\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-eye\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 503,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 498,\n                      columnNumber: 27\n                    }, this), hasPermission('customer_update') && /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outline-secondary\",\n                      size: \"sm\",\n                      onClick: () => handleEditCustomer(customer),\n                      title: \"Ch\\u1EC9nh s\\u1EEDa\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 512,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 506,\n                      columnNumber: 29\n                    }, this), hasPermission('customer_delete') && /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outline-danger\",\n                      size: \"sm\",\n                      className: \"ms-1\",\n                      onClick: () => handleDeleteCustomer(customer),\n                      title: \"X\\xF3a kh\\xE1ch h\\xE0ng\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-trash\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 523,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 516,\n                      columnNumber: 29\n                    }, this), hasPermission('contract_create') && /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outline-success\",\n                      size: \"sm\",\n                      onClick: () => navigate(`/contracts/create?customer=${customer.id}`),\n                      title: \"T\\u1EA1o h\\u1EE3p \\u0111\\u1ED3ng m\\u1EDBi\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-file-contract\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 533,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 527,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 23\n                }, this)]\n              }, customer.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 21\n              }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: 7,\n                  className: \"text-center py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-muted\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-search fa-2x mb-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 544,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Kh\\xF4ng t\\xECm th\\u1EA5y kh\\xE1ch h\\xE0ng n\\xE0o ph\\xF9 h\\u1EE3p v\\u1EDBi b\\u1ED9 l\\u1ECDc\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 545,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 543,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"bg-white border-0\",\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-exclamation-triangle text-warning me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 17\n              }, this), \"Kh\\xE1ch h\\xE0ng c\\u1EA7n ch\\xFA \\xFD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"X\\u1EBFp h\\u1EA1ng D (K\\xE9m)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"danger\",\n                children: customers.filter(c => c.credit_rating === 'D').length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Kh\\xF4ng c\\xF3 h\\u1EE3p \\u0111\\u1ED3ng hi\\u1EC7u l\\u1EF1c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"warning\",\n                children: customers.filter(c => c.active_contracts === 0).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Doanh thu = 0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"secondary\",\n                children: customers.filter(c => c.monthly_revenue === 0).length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"bg-white border-0\",\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-chart-pie text-info me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 17\n              }, this), \"Th\\u1ED1ng k\\xEA nhanh\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Doanh nghi\\u1EC7p\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"info\",\n                children: [customers.filter(c => c.customer_type === 'company').length, /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ms-1\",\n                  children: [\"(\", Math.round(customers.filter(c => c.customer_type === 'company').length / customers.length * 100), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"C\\xE1 nh\\xE2n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"secondary\",\n                children: [customers.filter(c => c.customer_type === 'individual').length, /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ms-1\",\n                  children: [\"(\", Math.round(customers.filter(c => c.customer_type === 'individual').length / customers.length * 100), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"X\\u1EBFp h\\u1EA1ng A (T\\u1ED1t)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"success\",\n                children: customers.filter(c => c.credit_rating === 'A').length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showCreateModal,\n      onHide: () => setShowCreateModal(false),\n      size: \"xl\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Th\\xEAm kh\\xE1ch h\\xE0ng m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"p-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: '80vh',\n            overflowY: 'auto',\n            padding: '1rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(CustomerFormTabs, {\n            customer: null,\n            onSave: handleSaveCustomer,\n            onCancel: () => setShowCreateModal(false),\n            isLoading: formLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showEditModal,\n      onHide: () => setShowEditModal(false),\n      size: \"xl\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Ch\\u1EC9nh s\\u1EEDa kh\\xE1ch h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"p-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: '80vh',\n            overflowY: 'auto',\n            padding: '1rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(CustomerFormTabs, {\n            customer: editingCustomer,\n            onSave: handleSaveCustomer,\n            onCancel: () => setShowEditModal(false),\n            isLoading: formLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 5\n  }, this);\n}\n_s(Customers, \"pgg5OLMBjVOQugIX3Rtob8Ia0zI=\", false, function () {\n  return [useNavigate, useAuth, useNotification];\n});\n_c = Customers;\nexport default Customers;\nvar _c;\n$RefreshReg$(_c, \"Customers\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Row","Col","Card","Button","Table","Badge","Form","Modal","useNavigate","useAuth","useNotification","LoadingSpinner","CustomerFormTabs","customerService","jsxDEV","_jsxDEV","Customers","_s","navigate","hasPermission","showSuccess","showError","loading","setLoading","customers","setCustomers","filteredCustomers","setFilteredCustomers","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","editingCustomer","setEditingCustomer","formLoading","setFormLoading","pagination","setPagination","page","limit","total","pages","filters","setFilters","search","customer_type","credit_rating","loadCustomers","params","Object","keys","forEach","key","response","getCustomers","data","error","console","warn","message","timeoutId","setTimeout","prev","clearTimeout","handleFilterChange","value","getCreditRatingBadge","rating","ratingMap","A","variant","label","B","C","D","ratingInfo","bg","children","fileName","_jsxFileName","lineNumber","columnNumber","getCustomerTypeBadge","type","formatCurrency","amount","Intl","NumberFormat","style","currency","format","replace","handleViewCustomer","customerId","handleCreateCustomer","handleEditCustomer","customer","log","fullCustomerData","getCustomer","id","customerWithContracts","contracts","statistics","handleDeleteCustomer","window","confirm","company_name","contact_person","deleteCustomer","transformFormDataToAPI","formData","Error","personal","companies","primaryCompany","companiesLength","length","apiData","name","full_name","representative_name","phone","email","address","invoice_address","notes","id_number","warehouse_purpose","tax_code","representative_phone","representative_email","handleSaveCustomer","customerData","updateCustomer","createCustomer","totalRevenue","reduce","sum","monthly_revenue","activeCustomers","filter","c","active_contracts","averageRevenue","text","fluid","className","onClick","md","Body","Group","Label","Control","placeholder","onChange","e","target","Select","Header","hover","map","customer_code","total_contracts","size","title","colSpan","Math","round","show","onHide","scrollable","closeButton","Title","maxHeight","overflowY","padding","onSave","onCancel","isLoading","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Documents/GitHub/MVG_InventoryManagement/KinhDoanh/client/src/pages/Customers/index.js"],"sourcesContent":["/**\r\n * Customers Page - KHO MVG\r\n * Danh sÃ¡ch vÃ  quáº£n lÃ½ khÃ¡ch hÃ ng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Container, Row, Col, Card, Button, Table, Badge, Form, Modal } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport CustomerFormTabs from '../../components/Customers/CustomerFormTabs';\r\nimport customerService from '../../services/customerService';\r\n\r\nfunction Customers() {\r\n  const navigate = useNavigate();\r\n  const { hasPermission } = useAuth();\r\n  const { showSuccess, showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(true);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [filteredCustomers, setFilteredCustomers] = useState([]);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editingCustomer, setEditingCustomer] = useState(null);\r\n  const [formLoading, setFormLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 20,\r\n    total: 0,\r\n    pages: 0\r\n  });\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    customer_type: '',\r\n    credit_rating: ''\r\n  });\r\n\r\n  // Load customers from API\r\n  const loadCustomers = useCallback(async (page = 1) => {\r\n    try {\r\n      setLoading(true);\r\n      const params = {\r\n        page,\r\n        limit: pagination.limit,\r\n        ...filters\r\n      };\r\n\r\n      // Remove empty filters\r\n      Object.keys(params).forEach(key => {\r\n        if (!params[key]) delete params[key];\r\n      });\r\n\r\n      const response = await customerService.getCustomers(params);\r\n      \r\n      setCustomers(response.data.customers);\r\n      setFilteredCustomers(response.data.customers);\r\n      setPagination(response.data.pagination);\r\n    } catch (error) {\r\n      // showError('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch khÃ¡ch hÃ ng: ' + error.message);\r\n      console.warn('Customer loading error:', error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filters, pagination.limit, showError]);\r\n\r\n  useEffect(() => {\r\n    if (hasPermission('customer_read')) {\r\n      loadCustomers(pagination.page);\r\n    }\r\n  }, [hasPermission, loadCustomers, pagination.page]);\r\n\r\n  useEffect(() => {\r\n    loadCustomers(pagination.page);\r\n  }, []);\r\n\r\n  // Handle filter changes\r\n  useEffect(() => {\r\n    // Debounce search to avoid too many API calls\r\n    const timeoutId = setTimeout(() => {\r\n      if (pagination.page === 1) {\r\n        loadCustomers(1);\r\n      } else {\r\n        setPagination(prev => ({ ...prev, page: 1 }));\r\n        loadCustomers(1);\r\n      }\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [filters]);\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      [key]: value\r\n    }));\r\n  };\r\n\r\n  const getCreditRatingBadge = (rating) => {\r\n    const ratingMap = {\r\n      A: { variant: 'success', label: 'A - Tá»‘t' },\r\n      B: { variant: 'primary', label: 'B - KhÃ¡' },\r\n      C: { variant: 'warning', label: 'C - Trung bÃ¬nh' },\r\n      D: { variant: 'danger', label: 'D - KÃ©m' }\r\n    };\r\n    \r\n    const ratingInfo = ratingMap[rating] || { variant: 'secondary', label: rating };\r\n    return <Badge bg={ratingInfo.variant}>{ratingInfo.label}</Badge>;\r\n  };\r\n\r\n  const getCustomerTypeBadge = (type) => {\r\n    return type === 'company' ? \r\n      <Badge bg=\"info\">Doanh nghiá»‡p</Badge> : \r\n      <Badge bg=\"secondary\">CÃ¡ nhÃ¢n</Badge>;\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN', {\r\n      style: 'currency',\r\n      currency: 'VND'\r\n    }).format(amount).replace('â‚«', 'Ä‘');\r\n  };\r\n\r\n  const handleViewCustomer = (customerId) => {\r\n    navigate(`/customers/${customerId}`);\r\n  };\r\n\r\n  const handleCreateCustomer = () => {\r\n    if (!hasPermission('customer_create')) {\r\n      showError('Báº¡n khÃ´ng cÃ³ quyá»n táº¡o khÃ¡ch hÃ ng má»›i');\r\n      return;\r\n    }\r\n    setEditingCustomer(null);\r\n    setShowCreateModal(true);\r\n  };\r\n\r\n  const handleEditCustomer = async (customer) => {\r\n    if (!hasPermission('customer_update')) {\r\n      showError('Báº¡n khÃ´ng cÃ³ quyá»n chá»‰nh sá»­a khÃ¡ch hÃ ng');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setFormLoading(true);\r\n      console.log('ðŸ” Loading full customer data including contracts...');\r\n      \r\n      // Load full customer data with contracts from API\r\n      const fullCustomerData = await customerService.getCustomer(customer.id);\r\n      console.log('âœ… Full customer data loaded:', fullCustomerData.data);\r\n      \r\n      // Merge customer info with contracts data\r\n      const customerWithContracts = {\r\n        ...fullCustomerData.data.customer,  // Customer personal/company info\r\n        contracts: fullCustomerData.data.contracts || [],  // Contracts array\r\n        statistics: fullCustomerData.data.statistics\r\n      };\r\n      \r\n      console.log('âœ… Merged customer data for form:', customerWithContracts);\r\n      setEditingCustomer(customerWithContracts);\r\n      setShowEditModal(true);\r\n    } catch (error) {\r\n      console.error('âŒ Failed to load customer details:', error);\r\n      // Fallback to using basic customer data if API fails\r\n      setEditingCustomer(customer);\r\n      setShowEditModal(true);\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCustomer = async (customer) => {\r\n    if (!hasPermission('customer_delete')) {\r\n      showError('Báº¡n khÃ´ng cÃ³ quyá»n xÃ³a khÃ¡ch hÃ ng');\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a khÃ¡ch hÃ ng \"${customer.company_name || customer.contact_person}\"?`)) {\r\n      try {\r\n        await customerService.deleteCustomer(customer.id);\r\n        showSuccess('XÃ³a khÃ¡ch hÃ ng thÃ nh cÃ´ng');\r\n        loadCustomers(pagination.page);\r\n      } catch (error) {\r\n        showError('KhÃ´ng thá»ƒ xÃ³a khÃ¡ch hÃ ng: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Transform form data to API format\r\n  const transformFormDataToAPI = (formData) => {\r\n    console.log('ðŸ” Raw form data received:', formData);\r\n    \r\n    // Safety checks for form data structure\r\n    if (!formData || typeof formData !== 'object') {\r\n      console.error('âŒ Invalid form data structure:', formData);\r\n      throw new Error('Invalid form data received');\r\n    }\r\n    \r\n    const { personal = {}, companies = [] } = formData;\r\n    const primaryCompany = companies[0] || {};\r\n    \r\n    console.log('ðŸ“‹ Form data breakdown:', {\r\n      personal,\r\n      primaryCompany,\r\n      companiesLength: companies.length\r\n    });\r\n    \r\n    const apiData = {\r\n      // Map from personal tab\r\n      name: primaryCompany.company_name || personal.full_name || '',\r\n      full_name: personal.full_name || '',\r\n      representative_name: personal.full_name || '',\r\n      phone: personal.phone || '',\r\n      email: personal.email || '',\r\n      address: personal.address || primaryCompany.invoice_address || '',\r\n      customer_type: personal.customer_type || 'individual', \r\n      notes: personal.notes || '',\r\n      id_number: personal.id_number || '',\r\n      warehouse_purpose: primaryCompany.warehouse_purpose || '',\r\n      \r\n      // Map from company tab  \r\n      tax_code: primaryCompany.tax_code || '',\r\n      representative_phone: personal.phone || '', \r\n      representative_email: personal.email || ''\r\n    };\r\n    \r\n    console.log('ðŸ“Š Field mapping details:');\r\n    console.log('  personal.full_name â†’', apiData.full_name, '& representative_name â†’', apiData.representative_name);\r\n    console.log('  personal.id_number â†’', apiData.id_number);\r\n    console.log('  personal.phone â†’', apiData.phone);\r\n    console.log('  personal.email â†’', apiData.email);\r\n    console.log('  personal.address â†’', apiData.address);\r\n    console.log('  primaryCompany.company_name â†’', apiData.name);\r\n    console.log('  primaryCompany.warehouse_purpose â†’', apiData.warehouse_purpose);\r\n    console.log('  primaryCompany.tax_code â†’', apiData.tax_code);\r\n    \r\n    console.log('âœ… Transformed API data:', apiData);\r\n    \r\n    // Validation checks\r\n    if (!apiData.representative_name || !apiData.phone) {\r\n      console.error('âŒ Missing required fields:', {\r\n        representative_name: apiData.representative_name,\r\n        phone: apiData.phone\r\n      });\r\n      throw new Error('Missing required fields: representative_name or phone');\r\n    }\r\n    \r\n    return apiData;\r\n  };\r\n\r\n  const handleSaveCustomer = async (customerData) => {\r\n    try {\r\n      setFormLoading(true);\r\n      \r\n      // Transform the nested form data to flat API format\r\n      const apiData = transformFormDataToAPI(customerData);\r\n      console.log('Transformed customer data:', apiData);\r\n      \r\n      if (editingCustomer) {\r\n        await customerService.updateCustomer(editingCustomer.id, apiData);\r\n        showSuccess('Cáº­p nháº­t khÃ¡ch hÃ ng thÃ nh cÃ´ng');\r\n        setShowEditModal(false);\r\n        \r\n        // Force reload customer data to show updated info\r\n        console.log('ðŸ”„ Reloading customers list after update...');\r\n        await loadCustomers(pagination.page);\r\n        console.log('âœ… Customers list reloaded successfully');\r\n      } else {\r\n        await customerService.createCustomer(apiData);\r\n        showSuccess('Táº¡o khÃ¡ch hÃ ng má»›i thÃ nh cÃ´ng');\r\n        setShowCreateModal(false);\r\n        \r\n        // Reload list to show new customer\r\n        await loadCustomers(pagination.page);\r\n      }\r\n      \r\n      setEditingCustomer(null);\r\n    } catch (error) {\r\n      throw error; // Let the form handle the error\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // const handlePageChange = (newPage) => {\r\n  //   setPagination(prev => ({ ...prev, page: newPage }));\r\n  //   loadCustomers(newPage);\r\n  // };\r\n\r\n  const totalRevenue = customers.reduce((sum, customer) => sum + customer.monthly_revenue, 0);\r\n  const activeCustomers = customers.filter(c => c.active_contracts > 0).length;\r\n  const averageRevenue = customers.length > 0 ? totalRevenue / customers.length : 0;\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner text=\"Äang táº£i danh sÃ¡ch khÃ¡ch hÃ ng...\" />;\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"p-4\">\r\n      {/* Page Header */}\r\n      <Row className=\"mb-4\">\r\n        <Col>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <div>\r\n              <h2 className=\"mb-1\">Quáº£n lÃ½ KhÃ¡ch hÃ ng</h2>\r\n              <p className=\"text-muted mb-0\">\r\n                Quáº£n lÃ½ thÃ´ng tin khÃ¡ch hÃ ng vÃ  há»£p Ä‘á»“ng\r\n              </p>\r\n            </div>\r\n            {hasPermission('customer_create') && (\r\n              <Button variant=\"primary\" onClick={handleCreateCustomer}>\r\n                <i className=\"fas fa-plus me-2\"></i>\r\n                ThÃªm khÃ¡ch hÃ ng\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Statistics Cards */}\r\n      <Row className=\"mb-4\">\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Tá»•ng khÃ¡ch hÃ ng</h6>\r\n                  <h4 className=\"mb-0 text-primary\">{customers.length}</h4>\r\n                </div>\r\n                <i className=\"fas fa-users fa-2x text-primary opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Äang hoáº¡t Ä‘á»™ng</h6>\r\n                  <h4 className=\"mb-0 text-success\">{activeCustomers}</h4>\r\n                </div>\r\n                <i className=\"fas fa-user-check fa-2x text-success opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">Tá»•ng doanh thu/thÃ¡ng</h6>\r\n                  <h4 className=\"mb-0 text-warning\">{formatCurrency(totalRevenue)}</h4>\r\n                </div>\r\n                <i className=\"fas fa-chart-line fa-2x text-warning opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">TB doanh thu/KH</h6>\r\n                  <h4 className=\"mb-0 text-info\">{formatCurrency(averageRevenue)}</h4>\r\n                </div>\r\n                <i className=\"fas fa-calculator fa-2x text-info opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"border-0 shadow-sm mb-4\">\r\n        <Card.Body>\r\n          <Row>\r\n            <Col md={4}>\r\n              <Form.Group>\r\n                <Form.Label>TÃ¬m kiáº¿m</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder=\"TÃ¬m theo mÃ£, tÃªn, SÄT, email...\"\r\n                  value={filters.search}\r\n                  onChange={(e) => handleFilterChange('search', e.target.value)}\r\n                />\r\n              </Form.Group>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Form.Group>\r\n                <Form.Label>Loáº¡i khÃ¡ch hÃ ng</Form.Label>\r\n                <Form.Select\r\n                  value={filters.customer_type}\r\n                  onChange={(e) => handleFilterChange('customer_type', e.target.value)}\r\n                >\r\n                  <option value=\"\">Táº¥t cáº£ loáº¡i</option>\r\n                  <option value=\"company\">Doanh nghiá»‡p</option>\r\n                  <option value=\"individual\">CÃ¡ nhÃ¢n</option>\r\n                </Form.Select>\r\n              </Form.Group>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Form.Group>\r\n                <Form.Label>Xáº¿p háº¡ng tÃ­n dá»¥ng</Form.Label>\r\n                <Form.Select\r\n                  value={filters.credit_rating}\r\n                  onChange={(e) => handleFilterChange('credit_rating', e.target.value)}\r\n                >\r\n                  <option value=\"\">Táº¥t cáº£ xáº¿p háº¡ng</option>\r\n                  <option value=\"A\">A - Tá»‘t</option>\r\n                  <option value=\"B\">B - KhÃ¡</option>\r\n                  <option value=\"C\">C - Trung bÃ¬nh</option>\r\n                  <option value=\"D\">D - KÃ©m</option>\r\n                </Form.Select>\r\n              </Form.Group>\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* Customers Table */}\r\n      <Card className=\"border-0 shadow-sm\">\r\n        <Card.Header className=\"bg-white border-0\">\r\n          <h5 className=\"mb-0\">\r\n            <i className=\"fas fa-list me-2\"></i>\r\n            Danh sÃ¡ch khÃ¡ch hÃ ng ({filteredCustomers.length})\r\n          </h5>\r\n        </Card.Header>\r\n        <Card.Body className=\"p-0\">\r\n          <div className=\"table-responsive\">\r\n            <Table hover className=\"mb-0\">\r\n              <thead className=\"bg-light\">\r\n                <tr>\r\n                  <th>KhÃ¡ch hÃ ng</th>\r\n                  <th>LiÃªn há»‡</th>\r\n                  <th>Loáº¡i</th>\r\n                  <th>Xáº¿p háº¡ng</th>\r\n                  <th>Há»£p Ä‘á»“ng</th>\r\n                  <th>Doanh thu/thÃ¡ng</th>\r\n                  <th>Thao tÃ¡c</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredCustomers.length > 0 ? (\r\n                  filteredCustomers.map((customer) => (\r\n                    <tr key={customer.id}>\r\n                      <td>\r\n                        <div>\r\n                          <div className=\"fw-bold\">\r\n                            {customer.company_name || customer.contact_person}\r\n                          </div>\r\n                          <small className=\"text-muted\">{customer.customer_code}</small>\r\n                          {customer.company_name && (\r\n                            <div>\r\n                              <small className=\"text-muted\">{customer.contact_person}</small>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div>\r\n                          <div>\r\n                            <i className=\"fas fa-phone fa-sm me-1\"></i>\r\n                            {customer.phone}\r\n                          </div>\r\n                          {customer.email && (\r\n                            <div>\r\n                              <i className=\"fas fa-envelope fa-sm me-1\"></i>\r\n                              <small>{customer.email}</small>\r\n                            </div>\r\n                          )}\r\n                          <div className=\"text-muted\">\r\n                            <small>{customer.address}</small>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td>{getCustomerTypeBadge(customer.customer_type)}</td>\r\n                      <td>{getCreditRatingBadge(customer.credit_rating)}</td>\r\n                      <td>\r\n                        <div>\r\n                          <div>\r\n                            <span className=\"fw-medium text-success\">\r\n                              {customer.active_contracts}\r\n                            </span>\r\n                            <span className=\"text-muted\">/{customer.total_contracts}</span>\r\n                          </div>\r\n                          <small className=\"text-muted\">Hiá»‡u lá»±c/Tá»•ng</small>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"fw-bold text-success\">\r\n                          {formatCurrency(customer.monthly_revenue)}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"btn-group\">\r\n                          <Button\r\n                            variant=\"outline-primary\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleViewCustomer(customer.id)}\r\n                          >\r\n                            <i className=\"fas fa-eye\"></i>\r\n                          </Button>\r\n                          {hasPermission('customer_update') && (\r\n                            <Button\r\n                              variant=\"outline-secondary\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleEditCustomer(customer)}\r\n                              title=\"Chá»‰nh sá»­a\"\r\n                            >\r\n                              <i className=\"fas fa-edit\"></i>\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('customer_delete') && (\r\n                            <Button\r\n                              variant=\"outline-danger\"\r\n                              size=\"sm\"\r\n                              className=\"ms-1\"\r\n                              onClick={() => handleDeleteCustomer(customer)}\r\n                              title=\"XÃ³a khÃ¡ch hÃ ng\"\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('contract_create') && (\r\n                            <Button\r\n                              variant=\"outline-success\"\r\n                              size=\"sm\"\r\n                              onClick={() => navigate(`/contracts/create?customer=${customer.id}`)}\r\n                              title=\"Táº¡o há»£p Ä‘á»“ng má»›i\"\r\n                            >\r\n                              <i className=\"fas fa-file-contract\"></i>\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"text-center py-4\">\r\n                      <div className=\"text-muted\">\r\n                        <i className=\"fas fa-search fa-2x mb-3\"></i>\r\n                        <p>KhÃ´ng tÃ¬m tháº¥y khÃ¡ch hÃ ng nÃ o phÃ¹ há»£p vá»›i bá»™ lá»c</p>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* Quick Actions */}\r\n      <Row className=\"mt-4\">\r\n        <Col md={6}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Header className=\"bg-white border-0\">\r\n              <h6 className=\"mb-0\">\r\n                <i className=\"fas fa-exclamation-triangle text-warning me-2\"></i>\r\n                KhÃ¡ch hÃ ng cáº§n chÃº Ã½\r\n              </h6>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>Xáº¿p háº¡ng D (KÃ©m)</span>\r\n                <Badge bg=\"danger\">{customers.filter(c => c.credit_rating === 'D').length}</Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>KhÃ´ng cÃ³ há»£p Ä‘á»“ng hiá»‡u lá»±c</span>\r\n                <Badge bg=\"warning\">{customers.filter(c => c.active_contracts === 0).length}</Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <span>Doanh thu = 0</span>\r\n                <Badge bg=\"secondary\">{customers.filter(c => c.monthly_revenue === 0).length}</Badge>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        \r\n        <Col md={6}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Header className=\"bg-white border-0\">\r\n              <h6 className=\"mb-0\">\r\n                <i className=\"fas fa-chart-pie text-info me-2\"></i>\r\n                Thá»‘ng kÃª nhanh\r\n              </h6>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>Doanh nghiá»‡p</span>\r\n                <Badge bg=\"info\">\r\n                  {customers.filter(c => c.customer_type === 'company').length}\r\n                  <span className=\"ms-1\">\r\n                    ({Math.round(customers.filter(c => c.customer_type === 'company').length / customers.length * 100)}%)\r\n                  </span>\r\n                </Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>CÃ¡ nhÃ¢n</span>\r\n                <Badge bg=\"secondary\">\r\n                  {customers.filter(c => c.customer_type === 'individual').length}\r\n                  <span className=\"ms-1\">\r\n                    ({Math.round(customers.filter(c => c.customer_type === 'individual').length / customers.length * 100)}%)\r\n                  </span>\r\n                </Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <span>Xáº¿p háº¡ng A (Tá»‘t)</span>\r\n                <Badge bg=\"success\">{customers.filter(c => c.credit_rating === 'A').length}</Badge>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Create Customer Modal */}\r\n      <Modal show={showCreateModal} onHide={() => setShowCreateModal(false)} size=\"xl\" scrollable>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>ThÃªm khÃ¡ch hÃ ng má»›i</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"p-0\">\r\n          <div style={{ maxHeight: '80vh', overflowY: 'auto', padding: '1rem' }}>\r\n            <CustomerFormTabs\r\n              customer={null}\r\n              onSave={handleSaveCustomer}\r\n              onCancel={() => setShowCreateModal(false)}\r\n              isLoading={formLoading}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n      </Modal>\r\n\r\n      {/* Edit Customer Modal */}\r\n      <Modal show={showEditModal} onHide={() => setShowEditModal(false)} size=\"xl\" scrollable>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Chá»‰nh sá»­a khÃ¡ch hÃ ng</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"p-0\">\r\n          <div style={{ maxHeight: '80vh', overflowY: 'auto', padding: '1rem' }}>\r\n            <CustomerFormTabs\r\n              customer={editingCustomer}\r\n              onSave={handleSaveCustomer}\r\n              onCancel={() => setShowEditModal(false)}\r\n              isLoading={formLoading}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n      </Modal>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Customers;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
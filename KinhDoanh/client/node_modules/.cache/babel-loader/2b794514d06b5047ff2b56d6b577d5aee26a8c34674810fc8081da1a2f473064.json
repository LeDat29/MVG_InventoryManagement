{"ast":null,"code":"import _objectSpread from\"C:/KinhDoanh/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * Contract Manager - Quản lý hợp đồng chính\r\n */import React,{useState,useEffect,useCallback}from'react';import{Container,Row,Col,Card,Button,Table,Badge,Form,Modal,Tabs,Tab,Dropdown,OverlayTrigger,Tooltip}from'react-bootstrap';import{useAuth}from'../../contexts/AuthContext';import{useNotification}from'../../contexts/NotificationContext';import LoadingSpinner from'../Common/LoadingSpinner';import ContractCreator from'./ContractCreator';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ContractManager=()=>{const{hasPermission}=useAuth();const{showSuccess,showError}=useNotification();const[loading,setLoading]=useState(true);const[,setContracts]=useState([]);const[filteredContracts,setFilteredContracts]=useState([]);const[showCreateModal,setShowCreateModal]=useState(false);const[selectedContract,setSelectedContract]=useState(null);const[showDetailModal,setShowDetailModal]=useState(false);const[filters,setFilters]=useState({search:'',status:'',workflow_stage:'',start_date_from:'',start_date_to:''});const[pagination,setPagination]=useState({page:1,limit:20,total:0,pages:0});// Contract statuses with colors\nconst contractStatuses={draft:{label:'Bản nháp',variant:'secondary'},review:{label:'Đang xem xét',variant:'info'},approved:{label:'Đã duyệt',variant:'success'},signed:{label:'Đã ký',variant:'primary'},active:{label:'Đang hiệu lực',variant:'success'},expired:{label:'Hết hạn',variant:'warning'},terminated:{label:'Chấm dứt',variant:'danger'},cancelled:{label:'Hủy bỏ',variant:'dark'}};const workflowStages={preparation:{label:'Chuẩn bị',icon:'fas fa-edit'},legal_review:{label:'Xem xét pháp lý',icon:'fas fa-balance-scale'},approval:{label:'Phê duyệt',icon:'fas fa-check-circle'},signing:{label:'Ký kết',icon:'fas fa-signature'},execution:{label:'Thực thi',icon:'fas fa-play-circle'}};// Load contracts\nconst loadContracts=useCallback(async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;try{setLoading(true);const queryParams=new URLSearchParams(_objectSpread({page:page.toString(),limit:pagination.limit.toString()},filters));const response=await fetch(\"/api/contracts?\".concat(queryParams),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();if(data.success){setContracts(data.data.contracts);setFilteredContracts(data.data.contracts);setPagination(data.data.pagination);}else{showError(data.message||'Không thể tải danh sách hợp đồng');}}catch(error){showError('Lỗi kết nối: '+error.message);}finally{setLoading(false);}},[filters,pagination.limit,showError]);useEffect(()=>{if(hasPermission('contract_read')){loadContracts();}},[hasPermission,loadContracts,pagination.page]);// Format currency\nconst formatCurrency=amount=>{return new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(amount);};// Calculate contract value\n// const calculateContractValue = (contract) => {\n//   const startDate = new Date(contract.start_date);\n//   const endDate = new Date(contract.end_date);\n//   const months = (endDate.getFullYear() - startDate.getFullYear()) * 12 + \n//                  (endDate.getMonth() - startDate.getMonth());\n//   return contract.rental_price * months;\n// };\n// Handle contract status change\nconst handleStatusChange=async(contractId,newStatus,newStage)=>{try{var _contractStatuses$new;const response=await fetch(\"/api/contracts/\".concat(contractId,\"/status\"),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({status:newStatus,workflow_stage:newStage,comment:\"Chuy\\u1EC3n tr\\u1EA1ng th\\xE1i sang \".concat((_contractStatuses$new=contractStatuses[newStatus])===null||_contractStatuses$new===void 0?void 0:_contractStatuses$new.label)})});const data=await response.json();if(data.success){showSuccess('Cập nhật trạng thái thành công');loadContracts(pagination.page);}else{showError(data.message||'Không thể cập nhật trạng thái');}}catch(error){showError('Lỗi kết nối: '+error.message);}};// View contract details\nconst viewContractDetails=async contractId=>{try{const response=await fetch(\"/api/contracts/\".concat(contractId),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const data=await response.json();if(data.success){setSelectedContract(data.data);setShowDetailModal(true);}else{showError(data.message||'Không thể tải chi tiết hợp đồng');}}catch(error){showError('Lỗi kết nối: '+error.message);}};if(!hasPermission('contract_read')){return/*#__PURE__*/_jsx(Container,{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",children:\"B\\u1EA1n kh\\xF4ng c\\xF3 quy\\u1EC1n truy c\\u1EADp qu\\u1EA3n l\\xFD h\\u1EE3p \\u0111\\u1ED3ng.\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-contract me-2\"}),\"Qu\\u1EA3n l\\xFD h\\u1EE3p \\u0111\\u1ED3ng\"]}),hasPermission('contract_create')&&/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:()=>setShowCreateModal(true),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-2\"}),\"T\\u1EA1o h\\u1EE3p \\u0111\\u1ED3ng m\\u1EDBi\"]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter me-2\"}),\"B\\u1ED9 l\\u1ECDc\"]})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"T\\xECm ki\\u1EBFm\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"S\\u1ED1 H\\u0110, t\\xEAn kh\\xE1ch h\\xE0ng...\",value:filters.search,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{search:e.target.value}))})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.status,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3\"}),Object.entries(contractStatuses).map(_ref=>{let[key,status]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:key,children:status.label},key);})]})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Giai \\u0111o\\u1EA1n\"}),/*#__PURE__*/_jsxs(Form.Select,{value:filters.workflow_stage,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{workflow_stage:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3\"}),Object.entries(workflowStages).map(_ref2=>{let[key,stage]=_ref2;return/*#__PURE__*/_jsx(\"option\",{value:key,children:stage.label},key);})]})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"T\\u1EEB ng\\xE0y\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:filters.start_date_from,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{start_date_from:e.target.value}))})]})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0110\\u1EBFn ng\\xE0y\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:filters.start_date_to,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{start_date_to:e.target.value}))})]})}),/*#__PURE__*/_jsx(Col,{md:1,className:\"d-flex align-items-end\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",onClick:()=>setFilters({search:'',status:'',workflow_stage:'',start_date_from:'',start_date_to:''}),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-undo\"})})})]})})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[\"Danh s\\xE1ch h\\u1EE3p \\u0111\\u1ED3ng (\",pagination.total,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-primary\",size:\"sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-download me-2\"}),\"Xu\\u1EA5t Excel\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:()=>loadContracts(pagination.page),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync-alt\"})})]})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-4\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}):/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S\\u1ED1 h\\u1EE3p \\u0111\\u1ED3ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"D\\u1EF1 \\xE1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Di\\u1EC7n t\\xEDch\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gi\\xE1 thu\\xEA/th\\xE1ng\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Th\\u1EDDi h\\u1EA1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Giai \\u0111o\\u1EA1n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ng\\u01B0\\u1EDDi ph\\u1EE5 tr\\xE1ch\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredContracts.map(contract=>{var _contractStatuses$con,_contractStatuses$con2,_workflowStages$contr,_workflowStages$contr2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:contract.contract_number}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(contract.created_at).toLocaleDateString('vi-VN')})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:contract.customer_company_name||contract.company_name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:contract.customer_name})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:contract.project_name||'Chưa phân bổ'}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:contract.warehouse_location})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[contract.warehouse_area,\" m\\xB2\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[formatCurrency(contract.rental_price),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[formatCurrency(contract.rental_price/contract.warehouse_area),\"/m\\xB2\"]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[new Date(contract.start_date).toLocaleDateString('vi-VN'),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"\\u2192 \",new Date(contract.end_date).toLocaleDateString('vi-VN')]})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:((_contractStatuses$con=contractStatuses[contract.status])===null||_contractStatuses$con===void 0?void 0:_contractStatuses$con.variant)||'secondary',children:((_contractStatuses$con2=contractStatuses[contract.status])===null||_contractStatuses$con2===void 0?void 0:_contractStatuses$con2.label)||contract.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"\".concat((_workflowStages$contr=workflowStages[contract.workflow_stage])===null||_workflowStages$contr===void 0?void 0:_workflowStages$contr.icon,\" me-2\")}),/*#__PURE__*/_jsx(\"small\",{children:(_workflowStages$contr2=workflowStages[contract.workflow_stage])===null||_workflowStages$contr2===void 0?void 0:_workflowStages$contr2.label})]})}),/*#__PURE__*/_jsx(\"td\",{children:contract.assigned_to_name?/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:contract.assigned_to_name}):/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"Ch\\u01B0a giao\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(OverlayTrigger,{overlay:/*#__PURE__*/_jsx(Tooltip,{children:\"Xem chi ti\\u1EBFt\"}),children:/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",onClick:()=>viewContractDetails(contract.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})})}),hasPermission('contract_update')&&/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"outline-secondary\",size:\"sm\",id:\"dropdown-\".concat(contract.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-cog\"})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsxs(Dropdown.Item,{onClick:()=>handleStatusChange(contract.id,'review','legal_review'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye me-2\"}),\"G\\u1EEDi xem x\\xE9t\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{onClick:()=>handleStatusChange(contract.id,'approved','signing'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check me-2\"}),\"Ph\\xEA duy\\u1EC7t\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{onClick:()=>handleStatusChange(contract.id,'signed','execution'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-signature me-2\"}),\"\\u0110\\xE3 k\\xFD\"]}),/*#__PURE__*/_jsx(Dropdown.Divider,{}),/*#__PURE__*/_jsxs(Dropdown.Item,{className:\"text-danger\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash me-2\"}),\"H\\u1EE7y b\\u1ECF\"]})]})]})]})})]},contract.id);})})]})}),pagination.pages>1&&/*#__PURE__*/_jsx(Card.Footer,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Hi\\u1EC3n th\\u1ECB \",(pagination.page-1)*pagination.limit+1,\" - \",Math.min(pagination.page*pagination.limit,pagination.total),\"trong t\\u1ED5ng s\\u1ED1 \",pagination.total,\" h\\u1EE3p \\u0111\\u1ED3ng\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",disabled:pagination.page===1,onClick:()=>setPagination(prev=>_objectSpread(_objectSpread({},prev),{},{page:prev.page-1})),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-left\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex align-items-center px-3\",children:[\"Trang \",pagination.page,\" / \",pagination.pages]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",disabled:pagination.page===pagination.pages,onClick:()=>setPagination(prev=>_objectSpread(_objectSpread({},prev),{},{page:prev.page+1})),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right\"})})]})]})})]})]})}),/*#__PURE__*/_jsx(ContractCreator,{show:showCreateModal,onHide:()=>setShowCreateModal(false),onSuccess:()=>{setShowCreateModal(false);loadContracts(pagination.page);}}),selectedContract&&/*#__PURE__*/_jsxs(Modal,{show:showDetailModal,onHide:()=>setShowDetailModal(false),size:\"xl\",scrollable:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Chi ti\\u1EBFt h\\u1EE3p \\u0111\\u1ED3ng \",selectedContract.contract.contract_number]})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(ContractDetailView,{contract:selectedContract})})]})]});};// Contract Detail Component  \nconst ContractDetailView=_ref3=>{var _contract$documents,_contract$documents2,_contract$workflow_hi;let{contract}=_ref3;return/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"overview\",id:\"contract-detail-tabs\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"overview\",title:\"T\\u1ED5ng quan\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Th\\xF4ng tin h\\u1EE3p \\u0111\\u1ED3ng\"}),/*#__PURE__*/_jsx(Table,{size:\"sm\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"S\\u1ED1 h\\u1EE3p \\u0111\\u1ED3ng:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.contract_number})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Ti\\xEAu \\u0111\\u1EC1:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.contract_title})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"D\\u1EF1 \\xE1n:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.project_name||'Chưa phân bổ'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Kho:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.warehouse_location})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Di\\u1EC7n t\\xEDch:\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[contract.contract.warehouse_area,\" m\\xB2\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Gi\\xE1 thu\\xEA:\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[new Intl.NumberFormat('vi-VN').format(contract.contract.rental_price),\" VN\\u0110/th\\xE1ng\"]})]})]})})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Th\\xF4ng tin kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(Table,{size:\"sm\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"C\\xF4ng ty:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.customer_company_name})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Ng\\u01B0\\u1EDDi li\\xEAn h\\u1EC7:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.customer_name})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0110i\\u1EC7n tho\\u1EA1i:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.customer_phone})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.customer_email})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xE3 s\\u1ED1 thu\\u1EBF:\"})}),/*#__PURE__*/_jsx(\"td\",{children:contract.contract.tax_code})]})]})})]})]})})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"documents\",title:\"T\\xE0i li\\u1EC7u (\".concat(((_contract$documents=contract.documents)===null||_contract$documents===void 0?void 0:_contract$documents.length)||0,\")\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\",children:((_contract$documents2=contract.documents)===null||_contract$documents2===void 0?void 0:_contract$documents2.length)>0?/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEAn t\\xE0i li\\u1EC7u\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lo\\u1EA1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phi\\xEAn b\\u1EA3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ng\\xE0y t\\u1EA1o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:contract.documents.map(doc=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:doc.document_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:doc.category_name})}),/*#__PURE__*/_jsxs(\"td\",{children:[\"v\",doc.version]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:doc.status==='final'?'success':doc.status==='draft'?'secondary':'warning',children:doc.status})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(doc.created_at).toLocaleDateString('vi-VN')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})})})]},doc.id))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-muted py-4\",children:\"Ch\\u01B0a c\\xF3 t\\xE0i li\\u1EC7u n\\xE0o\"})})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"history\",title:\"L\\u1ECBch s\\u1EED\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-3\",children:((_contract$workflow_hi=contract.workflow_history)===null||_contract$workflow_hi===void 0?void 0:_contract$workflow_hi.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"timeline\",children:contract.workflow_history.map(history=>/*#__PURE__*/_jsx(\"div\",{className:\"timeline-item mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center\",style:{width:'40px',height:'40px'},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user fa-sm\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1 ms-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-1\",children:history.action}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(history.performed_at).toLocaleString('vi-VN')})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:history.comment}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"B\\u1EDFi: \",history.performed_by_name]})]})]})},history.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-muted py-4\",children:\"Ch\\u01B0a c\\xF3 l\\u1ECBch s\\u1EED n\\xE0o\"})})})]});};export default ContractManager;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Row","Col","Card","Button","Table","Badge","Form","Modal","Tabs","Tab","Dropdown","OverlayTrigger","Tooltip","useAuth","useNotification","LoadingSpinner","ContractCreator","jsx","_jsx","jsxs","_jsxs","ContractManager","hasPermission","showSuccess","showError","loading","setLoading","setContracts","filteredContracts","setFilteredContracts","showCreateModal","setShowCreateModal","selectedContract","setSelectedContract","showDetailModal","setShowDetailModal","filters","setFilters","search","status","workflow_stage","start_date_from","start_date_to","pagination","setPagination","page","limit","total","pages","contractStatuses","draft","label","variant","review","approved","signed","active","expired","terminated","cancelled","workflowStages","preparation","icon","legal_review","approval","signing","execution","loadContracts","arguments","length","undefined","queryParams","URLSearchParams","_objectSpread","toString","response","fetch","concat","headers","localStorage","getItem","data","json","success","contracts","message","error","formatCurrency","amount","Intl","NumberFormat","style","currency","format","handleStatusChange","contractId","newStatus","newStage","_contractStatuses$new","method","body","JSON","stringify","comment","viewContractDetails","className","children","onClick","Header","Body","md","Group","Label","Control","type","placeholder","value","onChange","e","prev","target","Select","Object","entries","map","_ref","key","_ref2","stage","size","responsive","hover","contract","_contractStatuses$con","_contractStatuses$con2","_workflowStages$contr","_workflowStages$contr2","contract_number","Date","created_at","toLocaleDateString","customer_company_name","company_name","customer_name","project_name","warehouse_location","warehouse_area","rental_price","start_date","end_date","bg","assigned_to_name","overlay","id","Toggle","Menu","Item","Divider","Footer","Math","min","disabled","show","onHide","onSuccess","scrollable","closeButton","Title","ContractDetailView","_ref3","_contract$documents","_contract$documents2","_contract$workflow_hi","defaultActiveKey","eventKey","title","contract_title","customer_phone","customer_email","tax_code","documents","doc","document_name","category_name","version","workflow_history","history","width","height","action","performed_at","toLocaleString","performed_by_name"],"sources":["C:/KinhDoanh/client/src/components/Contracts/ContractManager.js"],"sourcesContent":["/**\r\n * Contract Manager - Quản lý hợp đồng chính\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  Container, Row, Col, Card, Button, Table, Badge, Form, \r\n  Modal, Tabs, Tab, Dropdown, OverlayTrigger, Tooltip \r\n} from 'react-bootstrap';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport LoadingSpinner from '../Common/LoadingSpinner';\r\nimport ContractCreator from './ContractCreator';\r\n\r\nconst ContractManager = () => {\r\n  const { hasPermission } = useAuth();\r\n  const { showSuccess, showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(true);\r\n  const [, setContracts] = useState([]);\r\n  const [filteredContracts, setFilteredContracts] = useState([]);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [selectedContract, setSelectedContract] = useState(null);\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  \r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    workflow_stage: '',\r\n    start_date_from: '',\r\n    start_date_to: ''\r\n  });\r\n\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 20,\r\n    total: 0,\r\n    pages: 0\r\n  });\r\n\r\n  // Contract statuses with colors\r\n  const contractStatuses = {\r\n    draft: { label: 'Bản nháp', variant: 'secondary' },\r\n    review: { label: 'Đang xem xét', variant: 'info' },\r\n    approved: { label: 'Đã duyệt', variant: 'success' },\r\n    signed: { label: 'Đã ký', variant: 'primary' },\r\n    active: { label: 'Đang hiệu lực', variant: 'success' },\r\n    expired: { label: 'Hết hạn', variant: 'warning' },\r\n    terminated: { label: 'Chấm dứt', variant: 'danger' },\r\n    cancelled: { label: 'Hủy bỏ', variant: 'dark' }\r\n  };\r\n\r\n  const workflowStages = {\r\n    preparation: { label: 'Chuẩn bị', icon: 'fas fa-edit' },\r\n    legal_review: { label: 'Xem xét pháp lý', icon: 'fas fa-balance-scale' },\r\n    approval: { label: 'Phê duyệt', icon: 'fas fa-check-circle' },\r\n    signing: { label: 'Ký kết', icon: 'fas fa-signature' },\r\n    execution: { label: 'Thực thi', icon: 'fas fa-play-circle' }\r\n  };\r\n\r\n  // Load contracts\r\n  const loadContracts = useCallback(async (page = 1) => {\r\n    try {\r\n      setLoading(true);\r\n      const queryParams = new URLSearchParams({\r\n        page: page.toString(),\r\n        limit: pagination.limit.toString(),\r\n        ...filters\r\n      });\r\n\r\n      const response = await fetch(`/api/contracts?${queryParams}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setContracts(data.data.contracts);\r\n        setFilteredContracts(data.data.contracts);\r\n        setPagination(data.data.pagination);\r\n      } else {\r\n        showError(data.message || 'Không thể tải danh sách hợp đồng');\r\n      }\r\n    } catch (error) {\r\n      showError('Lỗi kết nối: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filters, pagination.limit, showError]);\r\n\r\n  useEffect(() => {\r\n    if (hasPermission('contract_read')) {\r\n      loadContracts();\r\n    }\r\n  }, [hasPermission, loadContracts, pagination.page]);\r\n\r\n  // Format currency\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN', {\r\n      style: 'currency',\r\n      currency: 'VND'\r\n    }).format(amount);\r\n  };\r\n\r\n  // Calculate contract value\r\n  // const calculateContractValue = (contract) => {\r\n  //   const startDate = new Date(contract.start_date);\r\n  //   const endDate = new Date(contract.end_date);\r\n  //   const months = (endDate.getFullYear() - startDate.getFullYear()) * 12 + \r\n  //                  (endDate.getMonth() - startDate.getMonth());\r\n  //   return contract.rental_price * months;\r\n  // };\r\n\r\n  // Handle contract status change\r\n  const handleStatusChange = async (contractId, newStatus, newStage) => {\r\n    try {\r\n      const response = await fetch(`/api/contracts/${contractId}/status`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({ \r\n          status: newStatus, \r\n          workflow_stage: newStage,\r\n          comment: `Chuyển trạng thái sang ${contractStatuses[newStatus]?.label}` \r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        showSuccess('Cập nhật trạng thái thành công');\r\n        loadContracts(pagination.page);\r\n      } else {\r\n        showError(data.message || 'Không thể cập nhật trạng thái');\r\n      }\r\n    } catch (error) {\r\n      showError('Lỗi kết nối: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // View contract details\r\n  const viewContractDetails = async (contractId) => {\r\n    try {\r\n      const response = await fetch(`/api/contracts/${contractId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setSelectedContract(data.data);\r\n        setShowDetailModal(true);\r\n      } else {\r\n        showError(data.message || 'Không thể tải chi tiết hợp đồng');\r\n      }\r\n    } catch (error) {\r\n      showError('Lỗi kết nối: ' + error.message);\r\n    }\r\n  };\r\n\r\n  if (!hasPermission('contract_read')) {\r\n    return (\r\n      <Container className=\"mt-4\">\r\n        <div className=\"alert alert-warning\">\r\n          Bạn không có quyền truy cập quản lý hợp đồng.\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"mt-4\">\r\n      <Row>\r\n        <Col>\r\n          {/* Header */}\r\n          <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n            <h2>\r\n              <i className=\"fas fa-file-contract me-2\"></i>\r\n              Quản lý hợp đồng\r\n            </h2>\r\n            \r\n            {hasPermission('contract_create') && (\r\n              <Button \r\n                variant=\"primary\" \r\n                onClick={() => setShowCreateModal(true)}\r\n              >\r\n                <i className=\"fas fa-plus me-2\"></i>\r\n                Tạo hợp đồng mới\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Filters */}\r\n          <Card className=\"mb-4\">\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">\r\n                <i className=\"fas fa-filter me-2\"></i>\r\n                Bộ lọc\r\n              </h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <Row>\r\n                <Col md={3}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Tìm kiếm</Form.Label>\r\n                    <Form.Control\r\n                      type=\"text\"\r\n                      placeholder=\"Số HĐ, tên khách hàng...\"\r\n                      value={filters.search}\r\n                      onChange={(e) => setFilters(prev => ({ \r\n                        ...prev, \r\n                        search: e.target.value \r\n                      }))}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n                \r\n                <Col md={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Trạng thái</Form.Label>\r\n                    <Form.Select\r\n                      value={filters.status}\r\n                      onChange={(e) => setFilters(prev => ({ \r\n                        ...prev, \r\n                        status: e.target.value \r\n                      }))}\r\n                    >\r\n                      <option value=\"\">Tất cả</option>\r\n                      {Object.entries(contractStatuses).map(([key, status]) => (\r\n                        <option key={key} value={key}>{status.label}</option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Col>\r\n                \r\n                <Col md={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Giai đoạn</Form.Label>\r\n                    <Form.Select\r\n                      value={filters.workflow_stage}\r\n                      onChange={(e) => setFilters(prev => ({ \r\n                        ...prev, \r\n                        workflow_stage: e.target.value \r\n                      }))}\r\n                    >\r\n                      <option value=\"\">Tất cả</option>\r\n                      {Object.entries(workflowStages).map(([key, stage]) => (\r\n                        <option key={key} value={key}>{stage.label}</option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Col>\r\n                \r\n                <Col md={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Từ ngày</Form.Label>\r\n                    <Form.Control\r\n                      type=\"date\"\r\n                      value={filters.start_date_from}\r\n                      onChange={(e) => setFilters(prev => ({ \r\n                        ...prev, \r\n                        start_date_from: e.target.value \r\n                      }))}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n                \r\n                <Col md={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Đến ngày</Form.Label>\r\n                    <Form.Control\r\n                      type=\"date\"\r\n                      value={filters.start_date_to}\r\n                      onChange={(e) => setFilters(prev => ({ \r\n                        ...prev, \r\n                        start_date_to: e.target.value \r\n                      }))}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n                \r\n                <Col md={1} className=\"d-flex align-items-end\">\r\n                  <Button \r\n                    variant=\"outline-secondary\" \r\n                    onClick={() => setFilters({\r\n                      search: '',\r\n                      status: '',\r\n                      workflow_stage: '',\r\n                      start_date_from: '',\r\n                      start_date_to: ''\r\n                    })}\r\n                  >\r\n                    <i className=\"fas fa-undo\"></i>\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </Card.Body>\r\n          </Card>\r\n\r\n          {/* Contracts Table */}\r\n          <Card>\r\n            <Card.Header className=\"d-flex justify-content-between align-items-center\">\r\n              <h5 className=\"mb-0\">\r\n                Danh sách hợp đồng ({pagination.total})\r\n              </h5>\r\n              \r\n              <div className=\"d-flex gap-2\">\r\n                <Button variant=\"outline-primary\" size=\"sm\">\r\n                  <i className=\"fas fa-download me-2\"></i>\r\n                  Xuất Excel\r\n                </Button>\r\n                <Button variant=\"outline-secondary\" size=\"sm\" onClick={() => loadContracts(pagination.page)}>\r\n                  <i className=\"fas fa-sync-alt\"></i>\r\n                </Button>\r\n              </div>\r\n            </Card.Header>\r\n            \r\n            <Card.Body className=\"p-0\">\r\n              {loading ? (\r\n                <div className=\"text-center p-4\">\r\n                  <LoadingSpinner />\r\n                </div>\r\n              ) : (\r\n                <Table responsive hover className=\"mb-0\">\r\n                  <thead className=\"table-light\">\r\n                    <tr>\r\n                      <th>Số hợp đồng</th>\r\n                      <th>Khách hàng</th>\r\n                      <th>Dự án</th>\r\n                      <th>Diện tích</th>\r\n                      <th>Giá thuê/tháng</th>\r\n                      <th>Thời hạn</th>\r\n                      <th>Trạng thái</th>\r\n                      <th>Giai đoạn</th>\r\n                      <th>Người phụ trách</th>\r\n                      <th>Thao tác</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredContracts.map(contract => (\r\n                      <tr key={contract.id}>\r\n                        <td>\r\n                          <strong>{contract.contract_number}</strong>\r\n                          <br/>\r\n                          <small className=\"text-muted\">\r\n                            {new Date(contract.created_at).toLocaleDateString('vi-VN')}\r\n                          </small>\r\n                        </td>\r\n                        <td>\r\n                          <div>\r\n                            <strong>{contract.customer_company_name || contract.company_name}</strong>\r\n                            <br/>\r\n                            <small className=\"text-muted\">{contract.customer_name}</small>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div>\r\n                            <strong>{contract.project_name || 'Chưa phân bổ'}</strong>\r\n                            <br/>\r\n                            <small className=\"text-muted\">{contract.warehouse_location}</small>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          {contract.warehouse_area} m²\r\n                        </td>\r\n                        <td>\r\n                          {formatCurrency(contract.rental_price)}\r\n                          <br/>\r\n                          <small className=\"text-muted\">\r\n                            {formatCurrency(contract.rental_price / contract.warehouse_area)}/m²\r\n                          </small>\r\n                        </td>\r\n                        <td>\r\n                          {new Date(contract.start_date).toLocaleDateString('vi-VN')}\r\n                          <br/>\r\n                          <small className=\"text-muted\">\r\n                            → {new Date(contract.end_date).toLocaleDateString('vi-VN')}\r\n                          </small>\r\n                        </td>\r\n                        <td>\r\n                          <Badge bg={contractStatuses[contract.status]?.variant || 'secondary'}>\r\n                            {contractStatuses[contract.status]?.label || contract.status}\r\n                          </Badge>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex align-items-center\">\r\n                            <i className={`${workflowStages[contract.workflow_stage]?.icon} me-2`}></i>\r\n                            <small>{workflowStages[contract.workflow_stage]?.label}</small>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          {contract.assigned_to_name ? (\r\n                            <Badge bg=\"info\">{contract.assigned_to_name}</Badge>\r\n                          ) : (\r\n                            <span className=\"text-muted\">Chưa giao</span>\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"d-flex gap-1\">\r\n                            <OverlayTrigger \r\n                              overlay={<Tooltip>Xem chi tiết</Tooltip>}\r\n                            >\r\n                              <Button \r\n                                variant=\"outline-primary\" \r\n                                size=\"sm\"\r\n                                onClick={() => viewContractDetails(contract.id)}\r\n                              >\r\n                                <i className=\"fas fa-eye\"></i>\r\n                              </Button>\r\n                            </OverlayTrigger>\r\n                            \r\n                            {hasPermission('contract_update') && (\r\n                              <Dropdown>\r\n                                <Dropdown.Toggle \r\n                                  variant=\"outline-secondary\" \r\n                                  size=\"sm\"\r\n                                  id={`dropdown-${contract.id}`}\r\n                                >\r\n                                  <i className=\"fas fa-cog\"></i>\r\n                                </Dropdown.Toggle>\r\n                                <Dropdown.Menu>\r\n                                  <Dropdown.Item \r\n                                    onClick={() => handleStatusChange(contract.id, 'review', 'legal_review')}\r\n                                  >\r\n                                    <i className=\"fas fa-eye me-2\"></i>\r\n                                    Gửi xem xét\r\n                                  </Dropdown.Item>\r\n                                  <Dropdown.Item \r\n                                    onClick={() => handleStatusChange(contract.id, 'approved', 'signing')}\r\n                                  >\r\n                                    <i className=\"fas fa-check me-2\"></i>\r\n                                    Phê duyệt\r\n                                  </Dropdown.Item>\r\n                                  <Dropdown.Item \r\n                                    onClick={() => handleStatusChange(contract.id, 'signed', 'execution')}\r\n                                  >\r\n                                    <i className=\"fas fa-signature me-2\"></i>\r\n                                    Đã ký\r\n                                  </Dropdown.Item>\r\n                                  <Dropdown.Divider />\r\n                                  <Dropdown.Item className=\"text-danger\">\r\n                                    <i className=\"fas fa-trash me-2\"></i>\r\n                                    Hủy bỏ\r\n                                  </Dropdown.Item>\r\n                                </Dropdown.Menu>\r\n                              </Dropdown>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              )}\r\n            </Card.Body>\r\n            \r\n            {/* Pagination */}\r\n            {pagination.pages > 1 && (\r\n              <Card.Footer>\r\n                <div className=\"d-flex justify-content-between align-items-center\">\r\n                  <small className=\"text-muted\">\r\n                    Hiển thị {((pagination.page - 1) * pagination.limit) + 1} - {Math.min(pagination.page * pagination.limit, pagination.total)} \r\n                    trong tổng số {pagination.total} hợp đồng\r\n                  </small>\r\n                  \r\n                  <div className=\"d-flex gap-2\">\r\n                    <Button \r\n                      variant=\"outline-secondary\" \r\n                      size=\"sm\"\r\n                      disabled={pagination.page === 1}\r\n                      onClick={() => setPagination(prev => ({ ...prev, page: prev.page - 1 }))}\r\n                    >\r\n                      <i className=\"fas fa-chevron-left\"></i>\r\n                    </Button>\r\n                    \r\n                    <span className=\"d-flex align-items-center px-3\">\r\n                      Trang {pagination.page} / {pagination.pages}\r\n                    </span>\r\n                    \r\n                    <Button \r\n                      variant=\"outline-secondary\" \r\n                      size=\"sm\"\r\n                      disabled={pagination.page === pagination.pages}\r\n                      onClick={() => setPagination(prev => ({ ...prev, page: prev.page + 1 }))}\r\n                    >\r\n                      <i className=\"fas fa-chevron-right\"></i>\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </Card.Footer>\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Create Contract Modal */}\r\n      <ContractCreator\r\n        show={showCreateModal}\r\n        onHide={() => setShowCreateModal(false)}\r\n        onSuccess={() => {\r\n          setShowCreateModal(false);\r\n          loadContracts(pagination.page);\r\n        }}\r\n      />\r\n\r\n      {/* Contract Detail Modal */}\r\n      {selectedContract && (\r\n        <Modal \r\n          show={showDetailModal} \r\n          onHide={() => setShowDetailModal(false)} \r\n          size=\"xl\"\r\n          scrollable\r\n        >\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>\r\n              Chi tiết hợp đồng {selectedContract.contract.contract_number}\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <ContractDetailView contract={selectedContract} />\r\n          </Modal.Body>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Contract Detail Component  \r\nconst ContractDetailView = ({ contract }) => {\r\n  return (\r\n    <Tabs defaultActiveKey=\"overview\" id=\"contract-detail-tabs\">\r\n      <Tab eventKey=\"overview\" title=\"Tổng quan\">\r\n        <div className=\"pt-3\">\r\n          <Row>\r\n            <Col md={6}>\r\n              <h5>Thông tin hợp đồng</h5>\r\n              <Table size=\"sm\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td><strong>Số hợp đồng:</strong></td>\r\n                    <td>{contract.contract.contract_number}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Tiêu đề:</strong></td>\r\n                    <td>{contract.contract.contract_title}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Dự án:</strong></td>\r\n                    <td>{contract.contract.project_name || 'Chưa phân bổ'}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Kho:</strong></td>\r\n                    <td>{contract.contract.warehouse_location}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Diện tích:</strong></td>\r\n                    <td>{contract.contract.warehouse_area} m²</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Giá thuê:</strong></td>\r\n                    <td>{new Intl.NumberFormat('vi-VN').format(contract.contract.rental_price)} VNĐ/tháng</td>\r\n                  </tr>\r\n                </tbody>\r\n              </Table>\r\n            </Col>\r\n            <Col md={6}>\r\n              <h5>Thông tin khách hàng</h5>\r\n              <Table size=\"sm\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td><strong>Công ty:</strong></td>\r\n                    <td>{contract.contract.customer_company_name}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Người liên hệ:</strong></td>\r\n                    <td>{contract.contract.customer_name}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Điện thoại:</strong></td>\r\n                    <td>{contract.contract.customer_phone}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Email:</strong></td>\r\n                    <td>{contract.contract.customer_email}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Mã số thuế:</strong></td>\r\n                    <td>{contract.contract.tax_code}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </Table>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </Tab>\r\n      \r\n      <Tab eventKey=\"documents\" title={`Tài liệu (${contract.documents?.length || 0})`}>\r\n        <div className=\"pt-3\">\r\n          {contract.documents?.length > 0 ? (\r\n            <Table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Tên tài liệu</th>\r\n                  <th>Loại</th>\r\n                  <th>Phiên bản</th>\r\n                  <th>Trạng thái</th>\r\n                  <th>Ngày tạo</th>\r\n                  <th>Thao tác</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {contract.documents.map(doc => (\r\n                  <tr key={doc.id}>\r\n                    <td>{doc.document_name}</td>\r\n                    <td>\r\n                      <Badge bg=\"info\">{doc.category_name}</Badge>\r\n                    </td>\r\n                    <td>v{doc.version}</td>\r\n                    <td>\r\n                      <Badge \r\n                        bg={doc.status === 'final' ? 'success' : \r\n                            doc.status === 'draft' ? 'secondary' : 'warning'}\r\n                      >\r\n                        {doc.status}\r\n                      </Badge>\r\n                    </td>\r\n                    <td>{new Date(doc.created_at).toLocaleDateString('vi-VN')}</td>\r\n                    <td>\r\n                      <Button variant=\"outline-primary\" size=\"sm\">\r\n                        <i className=\"fas fa-eye\"></i>\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          ) : (\r\n            <div className=\"text-center text-muted py-4\">\r\n              Chưa có tài liệu nào\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Tab>\r\n      \r\n      <Tab eventKey=\"history\" title=\"Lịch sử\">\r\n        <div className=\"pt-3\">\r\n          {contract.workflow_history?.length > 0 ? (\r\n            <div className=\"timeline\">\r\n              {contract.workflow_history.map(history => (\r\n                <div key={history.id} className=\"timeline-item mb-3\">\r\n                  <div className=\"d-flex\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <div className=\"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center\" style={{width: '40px', height: '40px'}}>\r\n                        <i className=\"fas fa-user fa-sm\"></i>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex-grow-1 ms-3\">\r\n                      <div className=\"d-flex justify-content-between\">\r\n                        <h6 className=\"mb-1\">{history.action}</h6>\r\n                        <small className=\"text-muted\">{new Date(history.performed_at).toLocaleString('vi-VN')}</small>\r\n                      </div>\r\n                      <p className=\"mb-1\">{history.comment}</p>\r\n                      <small className=\"text-muted\">Bởi: {history.performed_by_name}</small>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center text-muted py-4\">\r\n              Chưa có lịch sử nào\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Tab>\r\n    </Tabs>\r\n  );\r\n};\r\n\r\nexport default ContractManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"/**\r\n * Customer Service - API calls for customer management\r\n */\n\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass CustomerService {\n  async getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    return {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    };\n  }\n  async handleResponse(response) {\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || `HTTP error! status: ${response.status}`);\n    }\n    return data;\n  }\n\n  // Lấy danh sách khách hàng\n  async getCustomers(params = {}) {\n    const queryString = new URLSearchParams(params).toString();\n    const url = `${API_BASE}/customers${queryString ? `?${queryString}` : ''}`;\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: await this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Lấy chi tiết khách hàng\n  async getCustomer(id) {\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\n      method: 'GET',\n      headers: await this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Tạo khách hàng mới\n  async createCustomer(customerData) {\n    const response = await fetch(`${API_BASE}/customers`, {\n      method: 'POST',\n      headers: await this.getAuthHeaders(),\n      body: JSON.stringify(customerData)\n    });\n    return this.handleResponse(response);\n  }\n\n  // Cập nhật khách hàng\n  async updateCustomer(id, customerData) {\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\n      method: 'PUT',\n      headers: await this.getAuthHeaders(),\n      body: JSON.stringify(customerData)\n    });\n    return this.handleResponse(response);\n  }\n\n  // Xóa khách hàng\n  async deleteCustomer(id) {\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\n      method: 'DELETE',\n      headers: await this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Lấy hợp đồng của khách hàng\n  async getCustomerContracts(customerId, status = null) {\n    const params = status ? {\n      status\n    } : {};\n    const queryString = new URLSearchParams(params).toString();\n    const url = `${API_BASE}/customers/${customerId}/contracts${queryString ? `?${queryString}` : ''}`;\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: await this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Tạo hợp đồng mới\n  async createContract(contractData) {\n    const response = await fetch(`${API_BASE}/customers/contracts`, {\n      method: 'POST',\n      headers: await this.getAuthHeaders(),\n      body: JSON.stringify(contractData)\n    });\n    return this.handleResponse(response);\n  }\n\n  // Lấy hợp đồng sắp hết hạn\n  async getExpiringContracts(days = 30) {\n    const response = await fetch(`${API_BASE}/customers/contracts/expiring?days=${days}`, {\n      method: 'GET',\n      headers: await this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Lấy thống kê khách hàng\n  async getCustomerStats() {\n    const response = await fetch(`${API_BASE}/customers/stats`, {\n      method: 'GET',\n      headers: await this.getAuthHeaders()\n    });\n    return this.handleResponse(response);\n  }\n}\nconst customerService = new CustomerService();\nexport default customerService;","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","CustomerService","getAuthHeaders","token","localStorage","getItem","handleResponse","response","data","json","ok","Error","message","status","getCustomers","params","queryString","URLSearchParams","toString","url","fetch","method","headers","getCustomer","id","createCustomer","customerData","body","JSON","stringify","updateCustomer","deleteCustomer","getCustomerContracts","customerId","createContract","contractData","getExpiringContracts","days","getCustomerStats","customerService"],"sources":["C:/KinhDoanh/client/src/services/customerService.js"],"sourcesContent":["/**\r\n * Customer Service - API calls for customer management\r\n */\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nclass CustomerService {\r\n  async getAuthHeaders() {\r\n    const token = localStorage.getItem('token');\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    };\r\n  }\r\n\r\n  async handleResponse(response) {\r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(data.message || `HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    return data;\r\n  }\r\n\r\n  // Lấy danh sách khách hàng\r\n  async getCustomers(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy chi tiết khách hàng\r\n  async getCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Tạo khách hàng mới\r\n  async createCustomer(customerData) {\r\n    const response = await fetch(`${API_BASE}/customers`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Cập nhật khách hàng\r\n  async updateCustomer(id, customerData) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Xóa khách hàng\r\n  async deleteCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'DELETE',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy hợp đồng của khách hàng\r\n  async getCustomerContracts(customerId, status = null) {\r\n    const params = status ? { status } : {};\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers/${customerId}/contracts${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Tạo hợp đồng mới\r\n  async createContract(contractData) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy hợp đồng sắp hết hạn\r\n  async getExpiringContracts(days = 30) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts/expiring?days=${days}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy thống kê khách hàng\r\n  async getCustomerStats() {\r\n    const response = await fetch(`${API_BASE}/customers/stats`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n}\r\n\r\nconst customerService = new CustomerService();\r\nexport default customerService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\MinhVietGroup\\\\InventoryProject\\\\MVG_InventoryManagement\\\\KinhDoanh\\\\client\\\\src\\\\components\\\\Users\\\\PermissionManager.js\",\n  _s = $RefreshSig$();\n/**\r\n * Permission Manager Component\r\n * Quản lý quyền hạn user vào từng dự án và chức năng\r\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Modal, Button, Form, Table, Badge, Alert, Tabs, Tab } from 'react-bootstrap';\nimport './PermissionManager.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SYSTEM_PERMISSIONS = [{\n  key: 'all',\n  label: 'Toàn quyền',\n  description: 'Quyền admin - truy cập tất cả',\n  color: 'danger'\n}, {\n  key: 'project_view',\n  label: 'Xem dự án',\n  description: 'Xem thông tin dự án',\n  color: 'info'\n}, {\n  key: 'project_edit',\n  label: 'Sửa dự án',\n  description: 'Chỉnh sửa thông tin dự án',\n  color: 'warning'\n}, {\n  key: 'project_delete',\n  label: 'Xóa dự án',\n  description: 'Xóa dự án (nguy hiểm)',\n  color: 'danger'\n}, {\n  key: 'customer_view',\n  label: 'Xem khách hàng',\n  description: 'Xem thông tin khách hàng',\n  color: 'info'\n}, {\n  key: 'customer_edit',\n  label: 'Sửa khách hàng',\n  description: 'Chỉnh sửa khách hàng',\n  color: 'warning'\n}, {\n  key: 'contract_view',\n  label: 'Xem hợp đồng',\n  description: 'Xem hợp đồng',\n  color: 'info'\n}, {\n  key: 'contract_edit',\n  label: 'Sửa hợp đồng',\n  description: 'Chỉnh sửa hợp đồng',\n  color: 'warning'\n}, {\n  key: 'document_view',\n  label: 'Xem tài liệu',\n  description: 'Xem tài liệu',\n  color: 'info'\n}, {\n  key: 'document_upload',\n  label: 'Upload tài liệu',\n  description: 'Upload file tài liệu',\n  color: 'warning'\n}, {\n  key: 'user_view',\n  label: 'Xem users',\n  description: 'Xem danh sách users',\n  color: 'info'\n}, {\n  key: 'user_manage',\n  label: 'Quản lý users',\n  description: 'Tạo/sửa/xóa users',\n  color: 'danger'\n}, {\n  key: 'report_view',\n  label: 'Xem báo cáo',\n  description: 'Xem các báo cáo',\n  color: 'info'\n}, {\n  key: 'ai_use',\n  label: 'Sử dụng AI',\n  description: 'Sử dụng AI chatbot',\n  color: 'primary'\n}];\nconst PROJECT_PERMISSIONS = [{\n  key: 'view',\n  label: 'Xem',\n  description: 'Xem thông tin dự án',\n  color: 'info'\n}, {\n  key: 'edit',\n  label: 'Sửa',\n  description: 'Chỉnh sửa dự án',\n  color: 'warning'\n}, {\n  key: 'manage_zones',\n  label: 'Quản lý zones',\n  description: 'Thêm/sửa/xóa zones',\n  color: 'primary'\n}, {\n  key: 'manage_contracts',\n  label: 'Quản lý hợp đồng',\n  description: 'Tạo/sửa hợp đồng',\n  color: 'success'\n}, {\n  key: 'view_financials',\n  label: 'Xem tài chính',\n  description: 'Xem thông tin tài chính',\n  color: 'warning'\n}];\nfunction PermissionManager({\n  user,\n  userId,\n  show,\n  onHide,\n  onSave\n}) {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // System permissions\n  const [systemPermissions, setSystemPermissions] = useState([]);\n\n  // Project assignments\n  const [projectAssignments, setProjectAssignments] = useState([]);\n  const [availableProjects, setAvailableProjects] = useState([]);\n  const [selectedProject, setSelectedProject] = useState('');\n  const [/* setProjectPermissions */,] = useState([]);\n  const [activeTab, setActiveTab] = useState('system');\n\n  // Load data khi mở modal\n\n  useEffect(() => {\n    const currentUserId = userId || (user === null || user === void 0 ? void 0 : user.id);\n    if (show && currentUserId) {\n      loadUserPermissions();\n      loadAvailableProjects();\n    }\n  }, [show, userId, user === null || user === void 0 ? void 0 : user.id]); // Removed loadUserPermissions dependency\n\n  const loadUserPermissions = useCallback(async () => {\n    try {\n      const currentUserId = userId || (user === null || user === void 0 ? void 0 : user.id);\n      console.log('Loading permissions for user ID:', currentUserId);\n      if (!currentUserId) {\n        throw new Error('User ID not found');\n      }\n      const token = localStorage.getItem('token');\n      const response = await fetch(`/api/users/${currentUserId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      console.log('User permissions data:', data);\n      if (data.success) {\n        var _data$data, _data$data2;\n        // System permissions\n        const userData = ((_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.user) || data.data;\n        setSystemPermissions(userData.permissions || []);\n\n        // Project permissions\n        setProjectAssignments(((_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : _data$data2.project_permissions) || []);\n      }\n    } catch (error) {\n      console.error('Error loading permissions:', error);\n      setError('Không thể tải quyền hạn: ' + error.message);\n    }\n  }, [userId, user === null || user === void 0 ? void 0 : user.id]);\n  const loadAvailableProjects = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      console.log('Loading available projects...');\n      const response = await fetch('/api/projects?limit=1000', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          var _data$data$projects;\n          setAvailableProjects(data.data.projects || []);\n          console.log('Projects loaded:', ((_data$data$projects = data.data.projects) === null || _data$data$projects === void 0 ? void 0 : _data$data$projects.length) || 0);\n        }\n      } else {\n        console.warn('Projects API not available:', response.status);\n        // Projects API might not be implemented yet, use empty array\n        setAvailableProjects([]);\n      }\n    } catch (error) {\n      console.warn('Error loading projects:', error.message);\n      // Don't show error for projects as it's optional\n      setAvailableProjects([]);\n    }\n  };\n  const handleSystemPermissionToggle = permissionKey => {\n    if (systemPermissions.includes('all') && permissionKey !== 'all') {\n      // Nếu có quyền 'all', không cho toggle individual permissions\n      return;\n    }\n    setSystemPermissions(prev => {\n      if (permissionKey === 'all') {\n        // Toggle 'all' sẽ clear tất cả permissions khác\n        return prev.includes('all') ? [] : ['all'];\n      }\n      if (prev.includes(permissionKey)) {\n        return prev.filter(p => p !== permissionKey);\n      } else {\n        return [...prev, permissionKey];\n      }\n    });\n  };\n  const handleAddProjectAssignment = () => {\n    if (!selectedProject) {\n      setError('Vui lòng chọn dự án');\n      return;\n    }\n\n    // Check nếu đã assign rồi\n    if (projectAssignments.some(pa => pa.project_id === parseInt(selectedProject))) {\n      setError('Dự án này đã được assign');\n      return;\n    }\n    const project = availableProjects.find(p => p.id === parseInt(selectedProject));\n    setProjectAssignments(prev => [...prev, {\n      project_id: parseInt(selectedProject),\n      project_name: project.name,\n      permissions: ['view'] // Default permission\n    }]);\n    setSelectedProject('');\n    setError('');\n  };\n  const handleRemoveProjectAssignment = projectId => {\n    setProjectAssignments(prev => prev.filter(pa => pa.project_id !== projectId));\n  };\n  const handleProjectPermissionToggle = (projectId, permissionKey) => {\n    setProjectAssignments(prev => prev.map(pa => {\n      if (pa.project_id === projectId) {\n        const perms = pa.permissions || [];\n        if (perms.includes(permissionKey)) {\n          return {\n            ...pa,\n            permissions: perms.filter(p => p !== permissionKey)\n          };\n        } else {\n          return {\n            ...pa,\n            permissions: [...perms, permissionKey]\n          };\n        }\n      }\n      return pa;\n    }));\n  };\n  const handleSave = async () => {\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    try {\n      const currentUserId = userId || (user === null || user === void 0 ? void 0 : user.id);\n      console.log('Saving permissions for user ID:', currentUserId);\n      if (!currentUserId) {\n        throw new Error('User ID not found');\n      }\n      const token = localStorage.getItem('token');\n\n      // Save system permissions\n      console.log('Saving system permissions:', systemPermissions);\n      const systemResponse = await fetch(`/api/users/${currentUserId}/permissions`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          permissions: systemPermissions\n        })\n      });\n      if (!systemResponse.ok) {\n        const errorData = await systemResponse.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Không thể cập nhật quyền hệ thống');\n      }\n\n      // Save project assignments (if any)\n      if (projectAssignments.length > 0) {\n        console.log('Saving project permissions:', projectAssignments);\n        const projectResponse = await fetch(`/api/users/${currentUserId}/project-permissions`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            projects: projectAssignments.map(pa => ({\n              project_id: pa.project_id,\n              permissions: pa.permissions\n            }))\n          })\n        });\n        if (!projectResponse.ok) {\n          const errorData = await projectResponse.json().catch(() => ({}));\n          throw new Error(errorData.message || 'Không thể cập nhật quyền dự án');\n        }\n      }\n      setSuccess('Cập nhật quyền hạn thành công!');\n      setTimeout(() => {\n        if (onSave) onSave();\n        onHide();\n      }, 1500);\n    } catch (error) {\n      console.error('Error saving permissions:', error);\n      setError(error.message || 'Có lỗi xảy ra khi lưu quyền hạn');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const hasAllPermission = systemPermissions.includes('all');\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: onHide,\n    size: \"xl\",\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-shield-lock\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), \" Qu\\u1EA3n l\\xFD quy\\u1EC1n h\\u1EA1n\", user && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-muted\",\n          style: {\n            fontSize: '14px',\n            marginTop: '4px'\n          },\n          children: [\"User: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 21\n          }, this), \" - \", user.full_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        maxHeight: '70vh',\n        overflowY: 'auto'\n      },\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        onClose: () => setError(''),\n        dismissible: true,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"success\",\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n        activeKey: activeTab,\n        onSelect: setActiveTab,\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"system\",\n          title: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-gear-fill\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), \" Quy\\u1EC1n h\\u1EC7 th\\u1ED1ng\", /*#__PURE__*/_jsxDEV(Badge, {\n              bg: \"primary\",\n              className: \"ms-2\",\n              children: systemPermissions.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"permission-matrix\",\n            children: [hasAllPermission && /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"warning\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-exclamation-triangle-fill\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this), \" User n\\xE0y c\\xF3 quy\\u1EC1n \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"ADMIN\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 89\n              }, this), \" - truy c\\u1EADp t\\u1EA5t c\\u1EA3 ch\\u1EE9c n\\u0103ng\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              hover: true,\n              responsive: true,\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: '50px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Quy\\u1EC1n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"M\\xF4 t\\u1EA3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    style: {\n                      width: '100px'\n                    },\n                    children: \"Tr\\u1EA1ng th\\xE1i\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: SYSTEM_PERMISSIONS.map(perm => {\n                  const hasPermission = systemPermissions.includes(perm.key);\n                  const isDisabled = hasAllPermission && perm.key !== 'all';\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: hasPermission ? 'table-active' : '',\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                        type: \"checkbox\",\n                        checked: hasPermission,\n                        onChange: () => handleSystemPermissionToggle(perm.key),\n                        disabled: isDisabled\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 311,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: perm.label\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 319,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                        bg: perm.color,\n                        className: \"ms-2\",\n                        children: perm.key\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 320,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"text-muted\",\n                      children: perm.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 322,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: hasPermission ? /*#__PURE__*/_jsxDEV(Badge, {\n                        bg: \"success\",\n                        children: \"C\\xF3 quy\\u1EC1n\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 325,\n                        columnNumber: 29\n                      }, this) : /*#__PURE__*/_jsxDEV(Badge, {\n                        bg: \"secondary\",\n                        children: \"Kh\\xF4ng\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 327,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 25\n                    }, this)]\n                  }, perm.key, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          eventKey: \"projects\",\n          title: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-building\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), \" Quy\\u1EC1n d\\u1EF1 \\xE1n\", /*#__PURE__*/_jsxDEV(Badge, {\n              bg: \"success\",\n              className: \"ms-2\",\n              children: projectAssignments.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"add-project-form mb-4 p-3 border rounded bg-light\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 36\n              }, this), \" Assign user v\\xE0o d\\u1EF1 \\xE1n\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row g-2 align-items-end\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-8\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Ch\\u1ECDn d\\u1EF1 \\xE1n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                  value: selectedProject,\n                  onChange: e => setSelectedProject(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"-- Ch\\u1ECDn d\\u1EF1 \\xE1n --\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 21\n                  }, this), availableProjects.filter(p => !projectAssignments.some(pa => pa.project_id === p.id)).map(project => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: project.id,\n                    children: [project.name, \" (\", project.code, \")\"]\n                  }, project.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  onClick: handleAddProjectAssignment,\n                  disabled: !selectedProject,\n                  className: \"w-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-plus\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 21\n                  }, this), \" Th\\xEAm\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), projectAssignments.length === 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-info-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), \" User ch\\u01B0a \\u0111\\u01B0\\u1EE3c assign v\\xE0o d\\u1EF1 \\xE1n n\\xE0o. S\\u1EED d\\u1EE5ng form b\\xEAn tr\\xEAn \\u0111\\u1EC3 assign.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"project-assignments\",\n            children: projectAssignments.map(pa => {\n              const project = availableProjects.find(p => p.id === pa.project_id);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"project-card mb-3 p-3 border rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-start mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                      className: \"mb-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"bi bi-building\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 395,\n                        columnNumber: 29\n                      }, this), \" \", pa.project_name || (project === null || project === void 0 ? void 0 : project.name)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 27\n                    }, this), project && /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted\",\n                      children: [\"Code: \", project.code]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 398,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 393,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-danger\",\n                    size: \"sm\",\n                    onClick: () => handleRemoveProjectAssignment(pa.project_id),\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-trash\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 406,\n                      columnNumber: 27\n                    }, this), \" X\\xF3a\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"permissions-grid\",\n                  children: PROJECT_PERMISSIONS.map(perm => {\n                    const hasPermission = (pa.permissions || []).includes(perm.key);\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"permission-item\",\n                      children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                        type: \"checkbox\",\n                        id: `${pa.project_id}-${perm.key}`,\n                        label: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: perm.label\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 421,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 422,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                            className: \"text-muted\",\n                            children: perm.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 423,\n                            columnNumber: 37\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 420,\n                          columnNumber: 35\n                        }, this),\n                        checked: hasPermission,\n                        onChange: () => handleProjectPermissionToggle(pa.project_id, perm.key)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 416,\n                        columnNumber: 31\n                      }, this)\n                    }, perm.key, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 415,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 23\n                }, this)]\n              }, pa.project_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: onHide,\n        disabled: loading,\n        children: \"H\\u1EE7y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleSave,\n        disabled: loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-border spinner-border-sm me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this), \"\\u0110ang l\\u01B0u...\"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this), \" L\\u01B0u thay \\u0111\\u1ED5i\"]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 263,\n    columnNumber: 5\n  }, this);\n}\n_s(PermissionManager, \"4JU4p8mVc9RDHM8wSimK/EXSy64=\");\n_c = PermissionManager;\nexport default PermissionManager;\nvar _c;\n$RefreshReg$(_c, \"PermissionManager\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Modal","Button","Form","Table","Badge","Alert","Tabs","Tab","jsxDEV","_jsxDEV","Fragment","_Fragment","SYSTEM_PERMISSIONS","key","label","description","color","PROJECT_PERMISSIONS","PermissionManager","user","userId","show","onHide","onSave","_s","loading","setLoading","error","setError","success","setSuccess","systemPermissions","setSystemPermissions","projectAssignments","setProjectAssignments","availableProjects","setAvailableProjects","selectedProject","setSelectedProject","activeTab","setActiveTab","currentUserId","id","loadUserPermissions","loadAvailableProjects","console","log","Error","token","localStorage","getItem","response","fetch","headers","ok","status","statusText","data","json","_data$data","_data$data2","userData","permissions","project_permissions","message","_data$data$projects","projects","length","warn","handleSystemPermissionToggle","permissionKey","includes","prev","filter","p","handleAddProjectAssignment","some","pa","project_id","parseInt","project","find","project_name","name","handleRemoveProjectAssignment","projectId","handleProjectPermissionToggle","map","perms","handleSave","systemResponse","method","body","JSON","stringify","errorData","catch","projectResponse","setTimeout","hasAllPermission","size","centered","children","Header","closeButton","Title","className","fileName","_jsxFileName","lineNumber","columnNumber","style","fontSize","marginTop","username","full_name","Body","maxHeight","overflowY","variant","onClose","dismissible","activeKey","onSelect","eventKey","title","bg","hover","responsive","width","perm","hasPermission","isDisabled","Check","type","checked","onChange","disabled","Label","Select","value","e","target","code","onClick","Footer","_c","$RefreshReg$"],"sources":["D:/MinhVietGroup/InventoryProject/MVG_InventoryManagement/KinhDoanh/client/src/components/Users/PermissionManager.js"],"sourcesContent":["/**\r\n * Permission Manager Component\r\n * Quản lý quyền hạn user vào từng dự án và chức năng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Modal, Button, Form, Table, Badge, Alert, Tabs, Tab } from 'react-bootstrap';\r\nimport './PermissionManager.css';\r\n\r\nconst SYSTEM_PERMISSIONS = [\r\n  { key: 'all', label: 'Toàn quyền', description: 'Quyền admin - truy cập tất cả', color: 'danger' },\r\n  { key: 'project_view', label: 'Xem dự án', description: 'Xem thông tin dự án', color: 'info' },\r\n  { key: 'project_edit', label: 'Sửa dự án', description: 'Chỉnh sửa thông tin dự án', color: 'warning' },\r\n  { key: 'project_delete', label: 'Xóa dự án', description: 'Xóa dự án (nguy hiểm)', color: 'danger' },\r\n  { key: 'customer_view', label: 'Xem khách hàng', description: 'Xem thông tin khách hàng', color: 'info' },\r\n  { key: 'customer_edit', label: 'Sửa khách hàng', description: 'Chỉnh sửa khách hàng', color: 'warning' },\r\n  { key: 'contract_view', label: 'Xem hợp đồng', description: 'Xem hợp đồng', color: 'info' },\r\n  { key: 'contract_edit', label: 'Sửa hợp đồng', description: 'Chỉnh sửa hợp đồng', color: 'warning' },\r\n  { key: 'document_view', label: 'Xem tài liệu', description: 'Xem tài liệu', color: 'info' },\r\n  { key: 'document_upload', label: 'Upload tài liệu', description: 'Upload file tài liệu', color: 'warning' },\r\n  { key: 'user_view', label: 'Xem users', description: 'Xem danh sách users', color: 'info' },\r\n  { key: 'user_manage', label: 'Quản lý users', description: 'Tạo/sửa/xóa users', color: 'danger' },\r\n  { key: 'report_view', label: 'Xem báo cáo', description: 'Xem các báo cáo', color: 'info' },\r\n  { key: 'ai_use', label: 'Sử dụng AI', description: 'Sử dụng AI chatbot', color: 'primary' }\r\n];\r\n\r\nconst PROJECT_PERMISSIONS = [\r\n  { key: 'view', label: 'Xem', description: 'Xem thông tin dự án', color: 'info' },\r\n  { key: 'edit', label: 'Sửa', description: 'Chỉnh sửa dự án', color: 'warning' },\r\n  { key: 'manage_zones', label: 'Quản lý zones', description: 'Thêm/sửa/xóa zones', color: 'primary' },\r\n  { key: 'manage_contracts', label: 'Quản lý hợp đồng', description: 'Tạo/sửa hợp đồng', color: 'success' },\r\n  { key: 'view_financials', label: 'Xem tài chính', description: 'Xem thông tin tài chính', color: 'warning' }\r\n];\r\n\r\nfunction PermissionManager({ user, userId, show, onHide, onSave }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  \r\n  // System permissions\r\n  const [systemPermissions, setSystemPermissions] = useState([]);\r\n  \r\n  // Project assignments\r\n  const [projectAssignments, setProjectAssignments] = useState([]);\r\n  const [availableProjects, setAvailableProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState('');\r\n  const [, /* setProjectPermissions */] = useState([]);\r\n  \r\n  const [activeTab, setActiveTab] = useState('system');\r\n\r\n  // Load data khi mở modal\r\n\r\n  useEffect(() => {\r\n    const currentUserId = userId || user?.id;\r\n    if (show && currentUserId) {\r\n      loadUserPermissions();\r\n      loadAvailableProjects();\r\n    }\r\n  }, [show, userId, user?.id]); // Removed loadUserPermissions dependency\r\n\r\n  const loadUserPermissions = useCallback(async () => {\r\n    try {\r\n      const currentUserId = userId || user?.id;\r\n      console.log('Loading permissions for user ID:', currentUserId);\r\n      \r\n      if (!currentUserId) {\r\n        throw new Error('User ID not found');\r\n      }\r\n      \r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/users/${currentUserId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('User permissions data:', data);\r\n      \r\n      if (data.success) {\r\n        // System permissions\r\n        const userData = data.data?.user || data.data;\r\n        setSystemPermissions(userData.permissions || []);\r\n        \r\n        // Project permissions\r\n        setProjectAssignments(data.data?.project_permissions || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading permissions:', error);\r\n      setError('Không thể tải quyền hạn: ' + error.message);\r\n    }\r\n  }, [userId, user?.id]);\r\n\r\n  const loadAvailableProjects = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Loading available projects...');\r\n      \r\n      const response = await fetch('/api/projects?limit=1000', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setAvailableProjects(data.data.projects || []);\r\n          console.log('Projects loaded:', data.data.projects?.length || 0);\r\n        }\r\n      } else {\r\n        console.warn('Projects API not available:', response.status);\r\n        // Projects API might not be implemented yet, use empty array\r\n        setAvailableProjects([]);\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error loading projects:', error.message);\r\n      // Don't show error for projects as it's optional\r\n      setAvailableProjects([]);\r\n    }\r\n  };\r\n\r\n  const handleSystemPermissionToggle = (permissionKey) => {\r\n    if (systemPermissions.includes('all') && permissionKey !== 'all') {\r\n      // Nếu có quyền 'all', không cho toggle individual permissions\r\n      return;\r\n    }\r\n    \r\n    setSystemPermissions(prev => {\r\n      if (permissionKey === 'all') {\r\n        // Toggle 'all' sẽ clear tất cả permissions khác\r\n        return prev.includes('all') ? [] : ['all'];\r\n      }\r\n      \r\n      if (prev.includes(permissionKey)) {\r\n        return prev.filter(p => p !== permissionKey);\r\n      } else {\r\n        return [...prev, permissionKey];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleAddProjectAssignment = () => {\r\n    if (!selectedProject) {\r\n      setError('Vui lòng chọn dự án');\r\n      return;\r\n    }\r\n    \r\n    // Check nếu đã assign rồi\r\n    if (projectAssignments.some(pa => pa.project_id === parseInt(selectedProject))) {\r\n      setError('Dự án này đã được assign');\r\n      return;\r\n    }\r\n    \r\n    const project = availableProjects.find(p => p.id === parseInt(selectedProject));\r\n    \r\n    setProjectAssignments(prev => [...prev, {\r\n      project_id: parseInt(selectedProject),\r\n      project_name: project.name,\r\n      permissions: ['view'] // Default permission\r\n    }]);\r\n    \r\n    setSelectedProject('');\r\n    setError('');\r\n  };\r\n\r\n  const handleRemoveProjectAssignment = (projectId) => {\r\n    setProjectAssignments(prev => prev.filter(pa => pa.project_id !== projectId));\r\n  };\r\n\r\n  const handleProjectPermissionToggle = (projectId, permissionKey) => {\r\n    setProjectAssignments(prev => prev.map(pa => {\r\n      if (pa.project_id === projectId) {\r\n        const perms = pa.permissions || [];\r\n        if (perms.includes(permissionKey)) {\r\n          return { ...pa, permissions: perms.filter(p => p !== permissionKey) };\r\n        } else {\r\n          return { ...pa, permissions: [...perms, permissionKey] };\r\n        }\r\n      }\r\n      return pa;\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n    \r\n    try {\r\n      const currentUserId = userId || user?.id;\r\n      console.log('Saving permissions for user ID:', currentUserId);\r\n      \r\n      if (!currentUserId) {\r\n        throw new Error('User ID not found');\r\n      }\r\n      \r\n      const token = localStorage.getItem('token');\r\n      \r\n      // Save system permissions\r\n      console.log('Saving system permissions:', systemPermissions);\r\n      const systemResponse = await fetch(`/api/users/${currentUserId}/permissions`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          permissions: systemPermissions\r\n        })\r\n      });\r\n      \r\n      if (!systemResponse.ok) {\r\n        const errorData = await systemResponse.json().catch(() => ({}));\r\n        throw new Error(errorData.message || 'Không thể cập nhật quyền hệ thống');\r\n      }\r\n      \r\n      // Save project assignments (if any)\r\n      if (projectAssignments.length > 0) {\r\n        console.log('Saving project permissions:', projectAssignments);\r\n        const projectResponse = await fetch(`/api/users/${currentUserId}/project-permissions`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            projects: projectAssignments.map(pa => ({\r\n              project_id: pa.project_id,\r\n              permissions: pa.permissions\r\n            }))\r\n          })\r\n        });\r\n        \r\n        if (!projectResponse.ok) {\r\n          const errorData = await projectResponse.json().catch(() => ({}));\r\n          throw new Error(errorData.message || 'Không thể cập nhật quyền dự án');\r\n        }\r\n      }\r\n      \r\n      setSuccess('Cập nhật quyền hạn thành công!');\r\n      \r\n      setTimeout(() => {\r\n        if (onSave) onSave();\r\n        onHide();\r\n      }, 1500);\r\n      \r\n    } catch (error) {\r\n      console.error('Error saving permissions:', error);\r\n      setError(error.message || 'Có lỗi xảy ra khi lưu quyền hạn');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const hasAllPermission = systemPermissions.includes('all');\r\n\r\n  return (\r\n    <Modal show={show} onHide={onHide} size=\"xl\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <i className=\"bi bi-shield-lock\"></i> Quản lý quyền hạn\r\n          {user && (\r\n            <div className=\"text-muted\" style={{ fontSize: '14px', marginTop: '4px' }}>\r\n              User: <strong>{user.username}</strong> - {user.full_name}\r\n            </div>\r\n          )}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      \r\n      <Modal.Body style={{ maxHeight: '70vh', overflowY: 'auto' }}>\r\n        {error && <Alert variant=\"danger\" onClose={() => setError('')} dismissible>{error}</Alert>}\r\n        {success && <Alert variant=\"success\">{success}</Alert>}\r\n        \r\n        <Tabs activeKey={activeTab} onSelect={setActiveTab} className=\"mb-3\">\r\n          {/* System Permissions Tab */}\r\n          <Tab eventKey=\"system\" title={\r\n            <span>\r\n              <i className=\"bi bi-gear-fill\"></i> Quyền hệ thống\r\n              <Badge bg=\"primary\" className=\"ms-2\">{systemPermissions.length}</Badge>\r\n            </span>\r\n          }>\r\n            <div className=\"permission-matrix\">\r\n              {hasAllPermission && (\r\n                <Alert variant=\"warning\">\r\n                  <i className=\"bi bi-exclamation-triangle-fill\"></i> User này có quyền <strong>ADMIN</strong> - truy cập tất cả chức năng\r\n                </Alert>\r\n              )}\r\n              \r\n              <Table hover responsive>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: '50px' }}></th>\r\n                    <th>Quyền</th>\r\n                    <th>Mô tả</th>\r\n                    <th style={{ width: '100px' }}>Trạng thái</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {SYSTEM_PERMISSIONS.map(perm => {\r\n                    const hasPermission = systemPermissions.includes(perm.key);\r\n                    const isDisabled = hasAllPermission && perm.key !== 'all';\r\n                    \r\n                    return (\r\n                      <tr key={perm.key} className={hasPermission ? 'table-active' : ''}>\r\n                        <td>\r\n                          <Form.Check\r\n                            type=\"checkbox\"\r\n                            checked={hasPermission}\r\n                            onChange={() => handleSystemPermissionToggle(perm.key)}\r\n                            disabled={isDisabled}\r\n                          />\r\n                        </td>\r\n                        <td>\r\n                          <strong>{perm.label}</strong>\r\n                          <Badge bg={perm.color} className=\"ms-2\">{perm.key}</Badge>\r\n                        </td>\r\n                        <td className=\"text-muted\">{perm.description}</td>\r\n                        <td>\r\n                          {hasPermission ? (\r\n                            <Badge bg=\"success\">Có quyền</Badge>\r\n                          ) : (\r\n                            <Badge bg=\"secondary\">Không</Badge>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </Table>\r\n            </div>\r\n          </Tab>\r\n          \r\n          {/* Project Assignments Tab */}\r\n          <Tab eventKey=\"projects\" title={\r\n            <span>\r\n              <i className=\"bi bi-building\"></i> Quyền dự án\r\n              <Badge bg=\"success\" className=\"ms-2\">{projectAssignments.length}</Badge>\r\n            </span>\r\n          }>\r\n            {/* Add Project Form */}\r\n            <div className=\"add-project-form mb-4 p-3 border rounded bg-light\">\r\n              <h6 className=\"mb-3\"><i className=\"bi bi-plus-circle\"></i> Assign user vào dự án</h6>\r\n              <div className=\"row g-2 align-items-end\">\r\n                <div className=\"col-md-8\">\r\n                  <Form.Label>Chọn dự án</Form.Label>\r\n                  <Form.Select\r\n                    value={selectedProject}\r\n                    onChange={(e) => setSelectedProject(e.target.value)}\r\n                  >\r\n                    <option value=\"\">-- Chọn dự án --</option>\r\n                    {availableProjects\r\n                      .filter(p => !projectAssignments.some(pa => pa.project_id === p.id))\r\n                      .map(project => (\r\n                        <option key={project.id} value={project.id}>\r\n                          {project.name} ({project.code})\r\n                        </option>\r\n                      ))\r\n                    }\r\n                  </Form.Select>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleAddProjectAssignment}\r\n                    disabled={!selectedProject}\r\n                    className=\"w-100\"\r\n                  >\r\n                    <i className=\"bi bi-plus\"></i> Thêm\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Project List */}\r\n            {projectAssignments.length === 0 ? (\r\n              <Alert variant=\"info\">\r\n                <i className=\"bi bi-info-circle\"></i> User chưa được assign vào dự án nào. \r\n                Sử dụng form bên trên để assign.\r\n              </Alert>\r\n            ) : (\r\n              <div className=\"project-assignments\">\r\n                {projectAssignments.map(pa => {\r\n                  const project = availableProjects.find(p => p.id === pa.project_id);\r\n                  \r\n                  return (\r\n                    <div key={pa.project_id} className=\"project-card mb-3 p-3 border rounded\">\r\n                      <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                        <div>\r\n                          <h6 className=\"mb-1\">\r\n                            <i className=\"bi bi-building\"></i> {pa.project_name || project?.name}\r\n                          </h6>\r\n                          {project && (\r\n                            <small className=\"text-muted\">Code: {project.code}</small>\r\n                          )}\r\n                        </div>\r\n                        <Button\r\n                          variant=\"outline-danger\"\r\n                          size=\"sm\"\r\n                          onClick={() => handleRemoveProjectAssignment(pa.project_id)}\r\n                        >\r\n                          <i className=\"bi bi-trash\"></i> Xóa\r\n                        </Button>\r\n                      </div>\r\n                      \r\n                      <div className=\"permissions-grid\">\r\n                        {PROJECT_PERMISSIONS.map(perm => {\r\n                          const hasPermission = (pa.permissions || []).includes(perm.key);\r\n                          \r\n                          return (\r\n                            <div key={perm.key} className=\"permission-item\">\r\n                              <Form.Check\r\n                                type=\"checkbox\"\r\n                                id={`${pa.project_id}-${perm.key}`}\r\n                                label={\r\n                                  <span>\r\n                                    <strong>{perm.label}</strong>\r\n                                    <br />\r\n                                    <small className=\"text-muted\">{perm.description}</small>\r\n                                  </span>\r\n                                }\r\n                                checked={hasPermission}\r\n                                onChange={() => handleProjectPermissionToggle(pa.project_id, perm.key)}\r\n                              />\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </Tab>\r\n        </Tabs>\r\n      </Modal.Body>\r\n      \r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide} disabled={loading}>\r\n          Hủy\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleSave} disabled={loading}>\r\n          {loading ? (\r\n            <>\r\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n              Đang lưu...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <i className=\"bi bi-save\"></i> Lưu thay đổi\r\n            </>\r\n          )}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default PermissionManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
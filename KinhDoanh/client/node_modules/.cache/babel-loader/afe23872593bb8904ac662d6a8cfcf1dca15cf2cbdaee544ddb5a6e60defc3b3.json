{"ast":null,"code":"/**\r\n * Google Map Wrapper Component\r\n * Wrapper cho Google Maps với các settings cơ bản\r\n */import React from'react';import{GoogleMap,useJsApiLoader,MarkerF}from'@react-google-maps/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GOOGLE_MAPS_LIBRARIES=['drawing','geometry'];const mapContainerStyle={width:'100%',height:'600px'};const defaultCenter={lat:10.762622,// Hồ Chí Minh\nlng:106.660172};const mapOptions={disableDefaultUI:false,zoomControl:true,streetViewControl:true,mapTypeControl:true,fullscreenControl:true,clickableIcons:false,mapTypeId:'satellite',// satellite view for warehouses\ntilt:0};function GoogleMapWrapper(_ref){let{center,zoom=16,onMapLoad,onMapClick}=_ref;const googleMapsApiKey=process.env.REACT_APP_GOOGLE_MAPS_API_KEY||'';const{isLoaded,loadError}=useJsApiLoader({googleMapsApiKey,libraries:GOOGLE_MAPS_LIBRARIES});React.useEffect(()=>{if(!googleMapsApiKey){console.warn(\"Google Maps API key is missing. Please add REACT_APP_GOOGLE_MAPS_API_KEY to your .env file.\");}},[googleMapsApiKey]);const[,setMap]=React.useState(null);const mapRef=React.useRef(null);const onLoad=React.useCallback(mapInstance=>{setMap(mapInstance);mapRef.current=mapInstance;if(onMapLoad){onMapLoad(mapInstance);}},[onMapLoad]);const onUnmount=React.useCallback(()=>{setMap(null);mapRef.current=null;},[]);// Auto-center map when center prop changes\nReact.useEffect(()=>{if(mapRef.current&&center){mapRef.current.panTo(center);mapRef.current.setZoom(zoom);}},[center,zoom]);const handleMapClick=React.useCallback(event=>{if(onMapClick){onMapClick(event.latLng.lat(),event.latLng.lng());}},[onMapClick]);if(loadError){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center',color:'red'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u274C L\\u1ED7i t\\u1EA3i Google Maps\"}),/*#__PURE__*/_jsx(\"p\",{children:loadError.message}),/*#__PURE__*/_jsx(\"p\",{children:\"Vui l\\xF2ng ki\\u1EC3m tra:\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{textAlign:'left',display:'inline-block'},children:[/*#__PURE__*/_jsx(\"li\",{children:\"REACT_APP_GOOGLE_MAPS_API_KEY trong file .env\"}),/*#__PURE__*/_jsx(\"li\",{children:\"API key \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c enable Maps JavaScript API\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Billing \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c setup (n\\u1EBFu c\\u1EA7n)\"})]})]});}if(!isLoaded&&!loadError&&!googleMapsApiKey){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center',color:'orange'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u26A0\\uFE0F API Key b\\u1ECB thi\\u1EBFu\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vui l\\xF2ng cung c\\u1EA5p REACT_APP_GOOGLE_MAPS_API_KEY trong file .env \\u0111\\u1EC3 hi\\u1EC3n th\\u1ECB b\\u1EA3n \\u0111\\u1ED3.\"})]});}if(!isLoaded){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u0110ang t\\u1EA3i b\\u1EA3n \\u0111\\u1ED3...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"\\u0110ang t\\u1EA3i Google Maps...\"})]});}return/*#__PURE__*/_jsx(GoogleMap,{mapContainerStyle:mapContainerStyle,center:center||defaultCenter,zoom:zoom,onLoad:onLoad,onUnmount:onUnmount,onClick:handleMapClick,options:mapOptions,children:/*#__PURE__*/_jsx(MarkerF,{position:center||defaultCenter})});}export default GoogleMapWrapper;","map":{"version":3,"names":["React","GoogleMap","useJsApiLoader","MarkerF","jsx","_jsx","jsxs","_jsxs","GOOGLE_MAPS_LIBRARIES","mapContainerStyle","width","height","defaultCenter","lat","lng","mapOptions","disableDefaultUI","zoomControl","streetViewControl","mapTypeControl","fullscreenControl","clickableIcons","mapTypeId","tilt","GoogleMapWrapper","_ref","center","zoom","onMapLoad","onMapClick","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","isLoaded","loadError","libraries","useEffect","console","warn","setMap","useState","mapRef","useRef","onLoad","useCallback","mapInstance","current","onUnmount","panTo","setZoom","handleMapClick","event","latLng","style","padding","textAlign","color","children","message","display","className","role","onClick","options","position"],"sources":["C:/Users/Admin/Documents/GitHub/MVG_InventoryManagement/KinhDoanh/client/src/components/Map/GoogleMapWrapper.js"],"sourcesContent":["/**\r\n * Google Map Wrapper Component\r\n * Wrapper cho Google Maps với các settings cơ bản\r\n */\r\n\r\nimport React from 'react';\r\nimport { GoogleMap, useJsApiLoader, MarkerF } from '@react-google-maps/api';\r\n\r\nconst GOOGLE_MAPS_LIBRARIES = ['drawing', 'geometry'];\r\n\r\nconst mapContainerStyle = {\r\n  width: '100%',\r\n  height: '600px'\r\n};\r\n\r\nconst defaultCenter = {\r\n  lat: 10.762622, // Hồ Chí Minh\r\n  lng: 106.660172\r\n};\r\n\r\nconst mapOptions = {\r\n  disableDefaultUI: false,\r\n  zoomControl: true,\r\n  streetViewControl: true,\r\n  mapTypeControl: true,\r\n  fullscreenControl: true,\r\n  clickableIcons: false,\r\n  mapTypeId: 'satellite', // satellite view for warehouses\r\n  tilt: 0\r\n};\r\n\r\nfunction GoogleMapWrapper({ center, zoom = 16, onMapLoad, onMapClick }) {\r\n  const googleMapsApiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY || '';\r\n\r\n  const { isLoaded, loadError } = useJsApiLoader({\r\n    googleMapsApiKey,\r\n    libraries: GOOGLE_MAPS_LIBRARIES,\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (!googleMapsApiKey) {\r\n      console.warn(\"Google Maps API key is missing. Please add REACT_APP_GOOGLE_MAPS_API_KEY to your .env file.\");\r\n    }\r\n  }, [googleMapsApiKey]);\r\n\r\n  const [, setMap] = React.useState(null);\r\n  const mapRef = React.useRef(null);\r\n\r\n  const onLoad = React.useCallback((mapInstance) => {\r\n    setMap(mapInstance);\r\n    mapRef.current = mapInstance;\r\n    if (onMapLoad) {\r\n      onMapLoad(mapInstance);\r\n    }\r\n  }, [onMapLoad]);\r\n\r\n  const onUnmount = React.useCallback(() => {\r\n    setMap(null);\r\n    mapRef.current = null;\r\n  }, []);\r\n\r\n  // Auto-center map when center prop changes\r\n  React.useEffect(() => {\r\n    if (mapRef.current && center) {\r\n      mapRef.current.panTo(center);\r\n      mapRef.current.setZoom(zoom);\r\n    }\r\n  }, [center, zoom]);\r\n\r\n  const handleMapClick = React.useCallback((event) => {\r\n    if (onMapClick) {\r\n      onMapClick(event.latLng.lat(), event.latLng.lng());\r\n    }\r\n  }, [onMapClick]);\r\n\r\n  if (loadError) {\r\n    return (\r\n      <div style={{ padding: '20px', textAlign: 'center', color: 'red' }}>\r\n        <h4>❌ Lỗi tải Google Maps</h4>\r\n        <p>{loadError.message}</p>\r\n        <p>Vui lòng kiểm tra:</p>\r\n        <ul style={{ textAlign: 'left', display: 'inline-block' }}>\r\n          <li>REACT_APP_GOOGLE_MAPS_API_KEY trong file .env</li>\r\n          <li>API key đã được enable Maps JavaScript API</li>\r\n          <li>Billing đã được setup (nếu cần)</li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isLoaded && !loadError && !googleMapsApiKey) {\r\n    return (\r\n      <div style={{ padding: '20px', textAlign: 'center', color: 'orange' }}>\r\n        <h4>⚠️ API Key bị thiếu</h4>\r\n        <p>Vui lòng cung cấp REACT_APP_GOOGLE_MAPS_API_KEY trong file .env để hiển thị bản đồ.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isLoaded) {\r\n    return (\r\n      <div style={{ padding: '20px', textAlign: 'center' }}>\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n          <span className=\"visually-hidden\">Đang tải bản đồ...</span>\r\n        </div>\r\n        <p className=\"mt-2\">Đang tải Google Maps...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <GoogleMap\r\n      mapContainerStyle={mapContainerStyle}\r\n      center={center || defaultCenter}\r\n      zoom={zoom}\r\n      onLoad={onLoad}\r\n      onUnmount={onUnmount}\r\n      onClick={handleMapClick}\r\n      options={mapOptions}\r\n    >\r\n      {/* \r\n        The user requested to replace GoogleMap with AdvancedMarkerElement.\r\n        However, AdvancedMarkerElement is a marker, not a map container.\r\n        The correct usage is to place a marker component *inside* the GoogleMap.\r\n        Here, we use MarkerF (the functional component version of Marker) as an example.\r\n      */}\r\n      <MarkerF position={center || defaultCenter} />\r\n    </GoogleMap>\r\n  );\r\n}\r\n\r\nexport default GoogleMapWrapper;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
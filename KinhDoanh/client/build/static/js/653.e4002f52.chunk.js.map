{"version":3,"file":"static/js/653.e4002f52.chunk.js","mappings":"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","sources":["services/customerService.js","services/projectService.js","components/Contracts/ContractCreator.js","services/contractService.js"],"sourcesContent":["/**\r\n * Customer Service - API calls for customer management\r\n */\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\r\n\r\nclass CustomerService {\r\n  async getAuthHeaders(noCache = false) {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    // Debug thông tin auth\r\n    if (!token) {\r\n      console.warn('⚠️ No token found in localStorage');\r\n    } else {\r\n      console.log('✅ Token found, length:', token.length);\r\n    }\r\n    \r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    };\r\n    \r\n    if (noCache) {\r\n      headers['Cache-Control'] = 'no-cache';\r\n      headers['Pragma'] = 'no-cache';\r\n    }\r\n    \r\n    return headers;\r\n  }\r\n\r\n  async handleResponse(response) {\r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      // Debug thông tin chi tiết về lỗi\r\n      console.error('❌ CustomerService API Error:');\r\n      console.error('  Status:', response.status);\r\n      console.error('  Status Text:', response.statusText);\r\n      console.error('  Response Data:', data);\r\n      \r\n      // Kiểm tra lỗi validation cụ thể\r\n      if (response.status === 400 && data.errors) {\r\n        console.error('  Validation Errors:');\r\n        data.errors.forEach(err => {\r\n          console.error(`    - ${err.path || err.param}: ${err.msg}`);\r\n        });\r\n      }\r\n      \r\n      throw new Error(data.message || `HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    return data;\r\n  }\r\n\r\n  // Lấy danh sách khách hàng\r\n  async getCustomers(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders(true) // Force no-cache for fresh data\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy chi tiết khách hàng\r\n  async getCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Tạo khách hàng mới\r\n  async createCustomer(customerData) {\r\n    const response = await fetch(`${API_BASE}/customers`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Cập nhật khách hàng\r\n  async updateCustomer(id, customerData) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Xóa khách hàng\r\n  async deleteCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'DELETE',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy hợp đồng của khách hàng\r\n  async getCustomerContracts(customerId, status = null) {\r\n    const params = status ? { status } : {};\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers/${customerId}/contracts${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Tạo hợp đồng mới\r\n  async createContract(contractData) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy hợp đồng sắp hết hạn\r\n  async getExpiringContracts(days = 30) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts/expiring?days=${days}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy thống kê khách hàng\r\n  async getCustomerStats() {\r\n    const response = await fetch(`${API_BASE}/customers/stats`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n}\r\n\r\nconst customerService = new CustomerService();\r\nexport default customerService;","// ProjectService - API for projects and warehouse zones\r\nimport axios from 'axios';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL ? `${process.env.REACT_APP_API_URL}/projects` : '/api/projects';\r\n\r\nconst projectService = {\r\n  async getProjects(params = {}) {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.get(API_BASE, {\r\n        params,\r\n        headers: token ? { Authorization: `Bearer ${token}` } : undefined\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching projects:', error);\r\n      const msg = (error && error.response && error.response.data && error.response.data.message) || error.message || 'Loi tai danh sach du an';\r\n      throw new Error(msg);\r\n    }\r\n  },\r\n  async getZones(projectId) {\r\n    if (!projectId) return { zones: [] };\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.get(`${API_BASE}/${projectId}/zones`, {\r\n        headers: token ? { Authorization: `Bearer ${token}` } : undefined\r\n      });\r\n      const data = response.data;\r\n      const zones = (data && data.data && data.data.zones) || data.zones || data || [];\r\n      return { zones };\r\n    } catch (error) {\r\n      console.error('Error fetching zones:', error);\r\n      const msg = (error && error.response && error.response.data && error.response.data.message) || error.message || 'Loi tai danh sach kho';\r\n      throw new Error(msg);\r\n    }\r\n  }\r\n};\r\n\r\nexport default projectService;\r\n","/**\r\n * Contract Creator - Tạo hợp đồng từ mẫu với dữ liệu khách hàng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  Modal, Form, Row, Col, Button, Alert, Tabs, Tab,\r\n  Card \r\n} from 'react-bootstrap';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport contractService from '../../services/contractService';\r\nimport customerService from '../../services/customerService';\r\nimport projectService from '../../services/projectService';\r\n\r\nconst ContractCreator = ({ show, onHide, onSuccess, initialCustomerId = '' }) => {\r\n  const { user } = useAuth();\r\n  const { showSuccess, showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('basic');\r\n  \r\n  // Data states\r\n  const [customers, setCustomers] = useState([]);\r\n  const [customersLoaded, setCustomersLoaded] = useState(false);\r\n  const [templates, setTemplates] = useState([]);\r\n  const [projects, setProjects] = useState([]);\r\n  const [zones, setZones] = useState([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\r\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [selectedZone, setSelectedZone] = useState(null);\r\n  const [templatesLoaded, setTemplatesLoaded] = useState(false);\r\n  const [projectsLoaded, setProjectsLoaded] = useState(false);\r\n  \r\n  \r\n  // Form data\r\n  const [formData, setFormData] = useState({\r\n    // Basic contract info\r\n    contract_title: '',\r\n    customer_id: '',\r\n    customer_company_id: '',\r\n    template_id: '',\r\n    project_id: '',\r\n    zone_id: '',\r\n    \r\n    // Party A (Lessor) - Bên cho thuê\r\n    party_a_name: 'CÔNG TY KHO MVG',\r\n    party_a_address: 'Khu công nghiệp ABC, Bình Dương',\r\n    party_a_representative: 'Nguyễn Văn A',\r\n    party_a_position: 'Giám đốc',\r\n    party_a_id_number: '123456789',\r\n    \r\n    // Contract terms\r\n    warehouse_location: '',\r\n    warehouse_area: 0,\r\n    warehouse_purpose: '',\r\n    rental_price: 0,\r\n    deposit_amount: 0,\r\n    service_fee: 0,\r\n    \r\n    // Dates\r\n    start_date: '',\r\n    end_date: '',\r\n    auto_renewal: false,\r\n    renewal_period: 12,\r\n    \r\n    // Payment\r\n    payment_cycle: 'monthly',\r\n    payment_due_date: 5,\r\n    payment_method: 'Chuyển khoản',\r\n    late_fee_percentage: 2.0,\r\n    \r\n    // Additional terms\r\n    special_terms: '',\r\n    notes: '',\r\n    assigned_to: user?.id || '',\r\n    \r\n    // Template variables\r\n    variables: {}\r\n  });\r\n\r\n  const loadInitialData = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [customersResponse, templatesResponse, projectsResponse] = await Promise.all([\r\n        customerService.getCustomers({ limit: 100 }),\r\n        contractService.getContractTemplates({ is_active: true }),\r\n        projectService.getProjects({ limit: 100 })\r\n      ]);\r\n      // Customers: API shape { success, data: { customers: [...] } }\r\n      setCustomers(customersResponse?.data?.customers || customersResponse?.customers || []);\r\n      setCustomersLoaded(true);\r\n      // Templates: API shape can be: { success, data: [...] } or { success, data: { templates: [...] } } or { templates: [...] }\r\n      const loadedTemplates = \r\n        templatesResponse?.data?.templates || \r\n        templatesResponse?.data || \r\n        templatesResponse?.templates || \r\n        templatesResponse || [];\r\n      setTemplates(Array.isArray(loadedTemplates) ? loadedTemplates : []);\r\n      setTemplatesLoaded(true);\r\n      // Auto-select default template if available\r\n      const defaultTpl = Array.isArray(loadedTemplates) && loadedTemplates.find(t => t.is_default);\r\n      if (defaultTpl) {\r\n        setSelectedTemplate(defaultTpl);\r\n        setFormData(prev => ({ ...prev, template_id: String(defaultTpl.id) }));\r\n      }\r\n      // Projects: shape could be { success, data: { projects: [...] } } or { success, projects: [...] }\r\n      const loadedProjects = \r\n        projectsResponse?.data?.projects || \r\n        projectsResponse?.projects || \r\n        projectsResponse?.data || [];\r\n      setProjects(Array.isArray(loadedProjects) ? loadedProjects : (Array.isArray(projectsResponse?.data?.projects) ? projectsResponse.data.projects : []));\r\n      setProjectsLoaded(true);\r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error);\r\n      showError('Không thể tải dữ liệu: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showError]);\r\n\r\n  // Load initial data\r\n  useEffect(() => {\r\n    if (show) {\r\n      loadInitialData();\r\n    }\r\n  }, [show, loadInitialData]);\r\n\r\n  // Read customer id from URL if not provided via props\r\n  useEffect(() => {\r\n    if (!show) return;\r\n    if (initialCustomerId) return;\r\n    try {\r\n      const params = new URLSearchParams(window.location.search);\r\n      const fromUrl = params.get('customer') || params.get('customer_id');\r\n      if (fromUrl) {\r\n        handleCustomerSelect(fromUrl);\r\n      }\r\n    } catch (e) {\r\n      // no-op\r\n    }\r\n  }, [show, initialCustomerId]);\r\n\r\n  // If initialCustomerId is provided, preselect it after data loads\r\n  useEffect(() => {\r\n    async function ensureAndSelectInitialCustomer() {\r\n      if (!show || !initialCustomerId) return;\r\n      // If list already contains the customer, select it\r\n      const exists = customers.some(c => String(c.id) === String(initialCustomerId));\r\n      if (exists) {\r\n        handleCustomerSelect(initialCustomerId);\r\n        return;\r\n      }\r\n      // Otherwise fetch it and add to list\r\n      try {\r\n        const customerResponse = await customerService.getCustomer(initialCustomerId);\r\n        const customerData = customerResponse?.data?.customer || customerResponse?.data || customerResponse;\r\n        if (customerData && customerData.id) {\r\n          setCustomers(prev => {\r\n            const already = prev.some(c => String(c.id) === String(customerData.id));\r\n            return already ? prev : [customerData, ...prev];\r\n          });\r\n          handleCustomerSelect(customerData.id);\r\n        }\r\n      } catch (e) {\r\n        console.warn('Could not preload initial customer', e?.message || e);\r\n      }\r\n    }\r\n    ensureAndSelectInitialCustomer();\r\n  }, [show, initialCustomerId, customers, customersLoaded]);\r\n\r\n  // Load zones when project changes\r\n  useEffect(() => {\r\n    async function fetchZones() {\r\n      if (formData.project_id) {\r\n        const zonesResponse = await projectService.getZones(formData.project_id);\r\n        setZones(zonesResponse.zones || []);\r\n      } else {\r\n        setZones([]);\r\n      }\r\n    }\r\n    fetchZones();\r\n  }, [formData.project_id]);\r\n\r\n  // Handle customer selection\r\n  const handleCustomerSelect = async (customerId) => {\r\n    try {\r\n      const customer = customers.find(c => c.id === parseInt(customerId));\r\n      if (!customer) return;\r\n      \r\n      setSelectedCustomer(customer);\r\n      \r\n      // Load customer details\r\n      const customerResponse = await customerService.getCustomer(customerId);\r\n      const customerData = customerResponse?.data?.customer || customerResponse?.data || customerResponse;\r\n      \r\n      // Auto-fill contract data based on available fields from API\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        customer_id: customerId,\r\n        contract_title: `Hợp đồng thuê kho - ${customerData.name || customerData.full_name || 'Khách hàng'}`,\r\n        warehouse_purpose: customerData.warehouse_purpose || 'Lưu kho hàng hóa',\r\n        variables: {\r\n          ...prev.variables,\r\n          // Auto-fill Party B info\r\n          party_b_name: customerData.name || customerData.full_name,\r\n          party_b_address: customerData.address || '',\r\n          party_b_representative: customerData.representative_name || customerData.full_name || '',\r\n          party_b_position: 'Giám đốc',\r\n          party_b_tax_code: customerData.tax_code || '',\r\n          warehouse_purpose: customerData.warehouse_purpose || 'Lưu kho hàng hóa',\r\n          payment_cycle: prev.payment_cycle === 'monthly' ? 'Hàng tháng' :\r\n                        prev.payment_cycle === 'quarterly' ? 'Hàng quý' : 'Hàng năm',\r\n          payment_due_date: prev.payment_due_date\r\n        }\r\n      }));\r\n      \r\n    } catch (error) {\r\n      showError('Không thể tải thông tin khách hàng: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Handle template selection\r\n  const handleTemplateSelect = (templateId) => {\r\n    if (!templateId) {\r\n      setSelectedTemplate(null);\r\n      setFormData(prev => ({ ...prev, template_id: '' }));\r\n      return;\r\n    }\r\n    const template = templates.find(t => t.id === parseInt(templateId));\r\n    if (!template) return;\r\n    \r\n    setSelectedTemplate(template);\r\n    setFormData(prev => ({ ...prev, template_id: templateId }));\r\n    \r\n    // Parse template variables\r\n    if (template.variables) {\r\n      let templateVars = [];\r\n      try {\r\n        templateVars = typeof template.variables === 'string' \r\n          ? JSON.parse(template.variables) \r\n          : (Array.isArray(template.variables) ? template.variables : []);\r\n      } catch (e) {\r\n        console.warn('Invalid template variables JSON:', e?.message || e);\r\n        templateVars = [];\r\n      }\r\n      \r\n      // Initialize variables with current form data\r\n      const newVariables = { ...formData.variables };\r\n      templateVars.forEach(variable => {\r\n        if (!newVariables[variable.name]) {\r\n          // Auto-populate common variables\r\n          switch (variable.name) {\r\n            case 'party_a_name':\r\n              newVariables[variable.name] = formData.party_a_name;\r\n              break;\r\n            case 'party_a_representative':\r\n              newVariables[variable.name] = formData.party_a_representative;\r\n              break;\r\n            case 'start_date':\r\n              newVariables[variable.name] = formData.start_date;\r\n              break;\r\n            case 'end_date':\r\n              newVariables[variable.name] = formData.end_date;\r\n              break;\r\n            case 'warehouse_location':\r\n              newVariables[variable.name] = formData.warehouse_location;\r\n              break;\r\n            case 'rental_price':\r\n              newVariables[variable.name] = formData.rental_price.toLocaleString('vi-VN') + ' VNĐ';\r\n              break;\r\n            default:\r\n              newVariables[variable.name] = '';\r\n          }\r\n        }\r\n      });\r\n      \r\n      setFormData(prev => ({ ...prev, variables: newVariables }));\r\n      // Move to variables tab to let user fill missing variables\r\n      setActiveTab('variables');\r\n    }\r\n  };\r\n\r\n  // Generate contract number\r\n  const generateContractNumber = () => {\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = (now.getMonth() + 1).toString().padStart(2, '0');\r\n    const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\r\n    return `HD${year}${month}${random}`;\r\n  };\r\n\r\n  // Calculate contract end date\r\n  const calculateEndDate = (startDate, months = 12) => {\r\n    const start = new Date(startDate);\r\n    const end = new Date(start);\r\n    end.setMonth(end.getMonth() + months);\r\n    return end.toISOString().split('T')[0];\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Generate contract number if not provided\r\n      if (!formData.variables.contract_number) {\r\n        formData.variables.contract_number = generateContractNumber();\r\n      }\r\n      \r\n      // Create contract\r\n      const response = await contractService.createContract(formData);\r\n      \r\n      showSuccess('Tạo hợp đồng thành công');\r\n      onSuccess?.(response.data);\r\n      onHide();\r\n      resetForm();\r\n      \r\n    } catch (error) {\r\n      showError('Lỗi tạo hợp đồng: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reset form\r\n  const resetForm = () => {\r\n    setFormData({\r\n      contract_title: '',\r\n      customer_id: '',\r\n      customer_company_id: '',\r\n      template_id: '',\r\n      project_id: '',\r\n      zone_id: '',\r\n      party_a_name: 'CÔNG TY KHO MVG',\r\n      party_a_address: 'Khu công nghiệp ABC, Bình Dương',\r\n      party_a_representative: 'Nguyễn Văn A',\r\n      party_a_position: 'Giám đốc',\r\n      party_a_id_number: '123456789',\r\n      warehouse_location: '',\r\n      warehouse_area: 0,\r\n      warehouse_purpose: '',\r\n      rental_price: 0,\r\n      deposit_amount: 0,\r\n      service_fee: 0,\r\n      start_date: '',\r\n      end_date: '',\r\n      auto_renewal: false,\r\n      renewal_period: 12,\r\n      payment_cycle: 'monthly',\r\n      payment_due_date: 5,\r\n      payment_method: 'Chuyển khoản',\r\n      late_fee_percentage: 2.0,\r\n      special_terms: '',\r\n      notes: '',\r\n      assigned_to: user?.id || '',\r\n      variables: {}\r\n    });\r\n    setSelectedCustomer(null);\r\n    setSelectedTemplate(null);\r\n    setSelectedProject(null);\r\n    setSelectedZone(null);\r\n    setActiveTab('basic');\r\n  };\r\n\r\n  // Format currency for display (without currency symbol)\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN').format(amount);\r\n  };\r\n\r\n  // Format currency for variables (with currency symbol)\r\n  const formatCurrencyForVariable = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN').format(amount) + ' VNĐ';\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={onHide} size=\"xl\" scrollable>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <i className=\"fas fa-plus-circle me-2\"></i>\r\n          Tạo hợp đồng mới\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      \r\n      <Modal.Body>\r\n        {selectedCustomer && (\r\n          <Alert variant=\"info\" className=\"mb-3\">\r\n            <Row>\r\n              <Col md={4}>\r\n                <div><strong>Khách hàng:</strong> {selectedCustomer.name || selectedCustomer.full_name}</div>\r\n                {selectedCustomer.customer_code && (\r\n                  <div><small className=\"text-muted\">Mã KH: {selectedCustomer.customer_code}</small></div>\r\n                )}\r\n              </Col>\r\n              <Col md={4}>\r\n                <div><strong>Điện thoại:</strong> {selectedCustomer.phone || selectedCustomer.representative_phone || '—'}</div>\r\n                <div><strong>Email:</strong> {selectedCustomer.email || selectedCustomer.representative_email || '—'}</div>\r\n              </Col>\r\n              <Col md={4}>\r\n                <div><strong>Địa chỉ:</strong> {selectedCustomer.address || '—'}</div>\r\n              </Col>\r\n            </Row>\r\n          </Alert>\r\n        )}\r\n        <Form onSubmit={handleSubmit}>\r\n          <Tabs activeKey={activeTab} onSelect={setActiveTab} className=\"mb-3\">\r\n            {/* Tab 1: Thông tin hợp đồng (gộp cơ bản + điều khoản) */}\r\n            <Tab eventKey=\"basic\" title=\"Thông tin hợp đồng\">\r\n              <Row>\r\n                <Col md={6}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chọn khách hàng *</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.customer_id}\r\n                      onChange={e => handleCustomerSelect(e.target.value)}\r\n                      required\r\n                    >\r\n                      <option value=\"\">-- Chọn khách hàng --</option>\r\n                      {customers.map(customer => (\r\n                        <option key={customer.id} value={customer.id}>\r\n                          {(customer.name || customer.full_name || 'Khách hàng')} {customer.customer_code ? `(${customer.customer_code})` : ''}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                  {selectedCustomer && (\r\n                    <Alert variant=\"info\">\r\n                      <strong>Thông tin khách hàng:</strong><br/>\r\n                      <small>\r\n                        SĐT: {selectedCustomer.phone}<br/>\r\n                        Email: {selectedCustomer.email}<br/>\r\n                        Địa chỉ: {selectedCustomer.address}\r\n                      </small>\r\n                    </Alert>\r\n                  )}\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chọn dự án *</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.project_id || ''}\r\n                      onChange={e => {\r\n                        const projectId = e.target.value;\r\n                        const project = projects.find(p => p.id === parseInt(projectId));\r\n                        setSelectedProject(project || null);\r\n                        setFormData(prev => ({ ...prev, project_id: projectId, zone_id: '', warehouse_location: '' }));\r\n                      }}\r\n                      required\r\n                    >\r\n                      <option value=\"\">-- Chọn dự án --</option>\r\n                      {projects.map(project => (\r\n                        <option key={project.id} value={project.id}>{project.name}</option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Vị trí kho thuê *</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.zone_id || ''}\r\n                      onChange={e => {\r\n                        const zoneId = e.target.value;\r\n                        const selectedZone = zones.find(z => z.id === parseInt(zoneId));\r\n                        setFormData(prev => ({\r\n                          ...prev,\r\n                          zone_id: zoneId,\r\n                          warehouse_location: selectedZone ? `${selectedZone.zone_name || selectedZone.zone_code} - ${selectedProject?.name || ''}` : '',\r\n                          variables: {\r\n                            ...prev.variables,\r\n                            warehouse_location: selectedZone ? `${selectedZone.zone_name || selectedZone.zone_code} - ${selectedProject?.name || ''}` : ''\r\n                          }\r\n                        }));\r\n                        setSelectedZone(selectedZone || null);\r\n                      }}\r\n                      required\r\n                      disabled={!formData.project_id}\r\n                    >\r\n                      <option value=\"\">-- Chọn kho --</option>\r\n                      {zones.map(zone => (\r\n                        <option key={zone.id} value={zone.id}>{zone.zone_name} ({zone.zone_code})</option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Col>\r\n                <Col md={6}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chọn mẫu hợp đồng *</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.template_id}\r\n                      onChange={e => handleTemplateSelect(e.target.value)}\r\n                      required\r\n                    >\r\n                      <option value=\"\">-- Chọn mẫu hợp đồng --</option>\r\n                      {templates.map(template => (\r\n                        <option key={template.id} value={template.id}>\r\n                          {template.template_name}\r\n                          {template.is_default && ' (Mặc định)'}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                  {selectedTemplate && (\r\n                    <Alert variant=\"success\">\r\n                      <strong>Mẫu đã chọn:</strong><br/>\r\n                      <small>\r\n                        Mã: {selectedTemplate.template_code}<br/>\r\n                        Phiên bản: {selectedTemplate.version}<br/>\r\n                        Loại: {selectedTemplate.template_type}\r\n                      </small>\r\n                    </Alert>\r\n                  )}\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Tiêu đề hợp đồng *</Form.Label>\r\n                    <Form.Control\r\n                      type=\"text\"\r\n                      value={formData.contract_title}\r\n                      onChange={e => setFormData(prev => ({ ...prev, contract_title: e.target.value }))}\r\n                      placeholder=\"VD: Hợp đồng thuê kho - Công ty ABC\"\r\n                      required\r\n                    />\r\n                  </Form.Group>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Diện tích (m²) *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          step=\"0.1\"\r\n                          min=\"0\"\r\n                          value={formData.warehouse_area}\r\n                          onChange={(e) => {\r\n                            const value = parseFloat(e.target.value) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              warehouse_area: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                warehouse_area: value\r\n                              }\r\n                            }));\r\n                          }}\r\n                          required\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Giá thuê/tháng (VNĐ) *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          value={formData.rental_price ? formatCurrency(formData.rental_price) : ''}\r\n                          onChange={(e) => {\r\n                            // Remove all non-digits\r\n                            const numericValue = e.target.value.replace(/\\D/g, '');\r\n                            const value = parseInt(numericValue) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              rental_price: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                rental_price: formatCurrencyForVariable(value)\r\n                              }\r\n                            }));\r\n                          }}\r\n                          placeholder=\"VD: 10,000,000\"\r\n                          required\r\n                        />\r\n                        {formData.rental_price > 0 && formData.warehouse_area > 0 && (\r\n                          <Form.Text className=\"text-muted\">\r\n                            Giá/m²: {formatCurrency(Math.round(formData.rental_price / formData.warehouse_area))} VNĐ/m²\r\n                          </Form.Text>\r\n                        )}\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Tiền cọc (VNĐ)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          value={formData.deposit_amount ? formatCurrency(formData.deposit_amount) : ''}\r\n                          onChange={(e) => {\r\n                            // Remove all non-digits\r\n                            const numericValue = e.target.value.replace(/\\D/g, '');\r\n                            const value = parseInt(numericValue) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              deposit_amount: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                deposit_amount: formatCurrencyForVariable(value)\r\n                              }\r\n                            }));\r\n                          }}\r\n                          placeholder=\"VD: 5,000,000\"\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Phí dịch vụ (VNĐ)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          value={formData.service_fee ? formatCurrency(formData.service_fee) : ''}\r\n                          onChange={(e) => {\r\n                            // Remove all non-digits\r\n                            const numericValue = e.target.value.replace(/\\D/g, '');\r\n                            const value = parseInt(numericValue) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              service_fee: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                service_fee: formatCurrencyForVariable(value)\r\n                              }\r\n                            }));\r\n                          }}\r\n                          placeholder=\"VD: 500,000\"\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Ngày bắt đầu *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"date\"\r\n                          value={formData.start_date}\r\n                          onChange={(e) => {\r\n                            const startDate = e.target.value;\r\n                            const endDate = calculateEndDate(startDate, formData.renewal_period);\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              start_date: startDate,\r\n                              end_date: endDate,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                start_date: new Date(startDate).toLocaleDateString('vi-VN'),\r\n                                end_date: new Date(endDate).toLocaleDateString('vi-VN')\r\n                              }\r\n                            }));\r\n                          }}\r\n                          required\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Ngày kết thúc *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"date\"\r\n                          value={formData.end_date}\r\n                          onChange={(e) => {\r\n                            const value = e.target.value;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              end_date: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                end_date: new Date(value).toLocaleDateString('vi-VN')\r\n                              }\r\n                            }));\r\n                          }}\r\n                          min={formData.start_date}\r\n                          required\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chu kỳ thanh toán</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.payment_cycle}\r\n                      onChange={(e) => setFormData(prev => ({\r\n                        ...prev,\r\n                        payment_cycle: e.target.value,\r\n                        variables: {\r\n                          ...prev.variables,\r\n                          payment_cycle: e.target.value === 'monthly' ? 'Hàng tháng' :\r\n                                        e.target.value === 'quarterly' ? 'Hàng quý' : 'Hàng năm'\r\n                        }\r\n                      }))}\r\n                    >\r\n                      <option value=\"monthly\">Hàng tháng</option>\r\n                      <option value=\"quarterly\">Hàng quý</option>\r\n                      <option value=\"yearly\">Hàng năm</option>\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Hạn thanh toán (ngày)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          max=\"31\"\r\n                          value={formData.payment_due_date}\r\n                          onChange={(e) => {\r\n                            const value = parseInt(e.target.value) || 5;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              payment_due_date: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                payment_due_date: value\r\n                              }\r\n                            }));\r\n                          }}\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Phí trễ hạn (%)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          step=\"0.1\"\r\n                          min=\"0\"\r\n                          max=\"10\"\r\n                          value={formData.late_fee_percentage}\r\n                          onChange={(e) => setFormData(prev => ({\r\n                            ...prev,\r\n                            late_fee_percentage: parseFloat(e.target.value) || 2.0\r\n                          }))}\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Check\r\n                      type=\"checkbox\"\r\n                      id=\"auto_renewal\"\r\n                      label=\"Tự động gia hạn\"\r\n                      checked={formData.auto_renewal}\r\n                      onChange={(e) => setFormData(prev => ({\r\n                        ...prev,\r\n                        auto_renewal: e.target.checked\r\n                      }))}\r\n                    />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Mục đích sử dụng kho</Form.Label>\r\n                    <Form.Control\r\n                      type=\"text\"\r\n                      value={formData.warehouse_purpose}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setFormData(prev => ({\r\n                          ...prev,\r\n                          warehouse_purpose: value,\r\n                          variables: {\r\n                            ...prev.variables,\r\n                            warehouse_purpose: value\r\n                          }\r\n                        }));\r\n                      }}\r\n                      placeholder=\"VD: Lưu kho hàng hóa, Sản xuất, Phân phối...\"\r\n                    />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Điều khoản đặc biệt</Form.Label>\r\n                    <Form.Control\r\n                      as=\"textarea\"\r\n                      rows={3}\r\n                      value={formData.special_terms}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setFormData(prev => ({\r\n                          ...prev,\r\n                          special_terms: value,\r\n                          variables: {\r\n                            ...prev.variables,\r\n                            special_terms: value\r\n                          }\r\n                        }));\r\n                      }}\r\n                      placeholder=\"Các điều khoản đặc biệt khác...\"\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n            </Tab>\r\n\r\n            {/* Tab 2: Biến mẫu */}\r\n            <Tab eventKey=\"variables\" title=\"Biến mẫu\" disabled={!selectedTemplate}>\r\n              {selectedTemplate && selectedTemplate.variables && (\r\n                <div>\r\n                  <Alert variant=\"info\">\r\n                    <i className=\"fas fa-info-circle me-2\"></i>\r\n                    Các biến này sẽ được thay thế trong nội dung hợp đồng cuối cùng.\r\n                  </Alert>\r\n                  \r\n                  <Row>\r\n                    {(() => { let vars = []; try { vars = typeof selectedTemplate.variables === 'string' ? JSON.parse(selectedTemplate.variables) : (Array.isArray(selectedTemplate.variables) ? selectedTemplate.variables : []); } catch (e) { vars = []; } return vars; })().map(variable => (\r\n                      <Col md={6} key={variable.name}>\r\n                        <Form.Group className=\"mb-3\">\r\n                          <Form.Label>\r\n                            {variable.description || variable.name}\r\n                            {variable.required && <span className=\"text-danger\">*</span>}\r\n                          </Form.Label>\r\n                          \r\n                          {variable.type === 'boolean' ? (\r\n                            <Form.Check\r\n                              type=\"checkbox\"\r\n                              checked={formData.variables[variable.name] === 'true'}\r\n                              onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                variables: {\r\n                                  ...prev.variables,\r\n                                  [variable.name]: e.target.checked.toString()\r\n                                }\r\n                              }))}\r\n                            />\r\n                          ) : (\r\n                            <Form.Control\r\n                              type={variable.type === 'date' ? 'date' : \r\n                                   variable.type === 'number' ? 'number' : 'text'}\r\n                              value={formData.variables[variable.name] || ''}\r\n                              onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                variables: {\r\n                                  ...prev.variables,\r\n                                  [variable.name]: e.target.value\r\n                                }\r\n                              }))}\r\n                              required={variable.required}\r\n                              placeholder={`{{${variable.name}}}`}\r\n                            />\r\n                          )}\r\n                          \r\n                          <Form.Text className=\"text-muted\">\r\n                            Biến: <code>{`{{${variable.name}}}`}</code>\r\n                          </Form.Text>\r\n                        </Form.Group>\r\n                      </Col>\r\n                    ))}\r\n                  </Row>\r\n                </div>\r\n              )}\r\n            </Tab>\r\n\r\n            {/* Tab 3: Preview */}\r\n            <Tab eventKey=\"preview\" title=\"Xem trước\" disabled={!selectedTemplate}>\r\n              {selectedTemplate && (\r\n                <div>\r\n                  <Alert variant=\"success\">\r\n                    <i className=\"fas fa-eye me-2\"></i>\r\n                    Xem trước nội dung hợp đồng với dữ liệu đã nhập\r\n                  </Alert>\r\n                  \r\n                  <Card>\r\n                    <Card.Body>\r\n                      <div \r\n                        className=\"contract-preview\"\r\n                        dangerouslySetInnerHTML={{\r\n                          __html: String(selectedTemplate?.template_content || '').replace(\r\n                            /\\{\\{(\\w+)\\}\\}/g,\r\n                            (match, varName) => formData.variables[varName] || `[${varName}]`\r\n                          )\r\n                        }}\r\n                        style={{ \r\n                          border: '1px solid #ddd', \r\n                          padding: '20px',\r\n                          backgroundColor: 'white',\r\n                          fontFamily: 'Times New Roman, serif'\r\n                        }}\r\n                      />\r\n                    </Card.Body>\r\n                  </Card>\r\n                </div>\r\n              )}\r\n            </Tab>\r\n          </Tabs>\r\n\r\n          {/* Summary */}\r\n          {formData.customer_id && formData.template_id && (\r\n            <Alert variant=\"light\">\r\n              <Row>\r\n                <Col md={3}>\r\n                  <strong>Khách hàng:</strong><br/>\r\n                  {selectedCustomer?.name || selectedCustomer?.full_name}\r\n                </Col>\r\n                <Col md={3}>\r\n                  <strong>Mẫu hợp đồng:</strong><br/>\r\n                  {selectedTemplate?.template_name}\r\n                </Col>\r\n                <Col md={3}>\r\n                  <strong>Diện tích:</strong><br/>\r\n                  {formData.warehouse_area} m²\r\n                </Col>\r\n                <Col md={3}>\r\n                  <strong>Giá thuê:</strong><br/>\r\n                  {formatCurrency(formData.rental_price)} VNĐ/tháng\r\n                </Col>\r\n              </Row>\r\n            </Alert>\r\n          )}\r\n        </Form>\r\n      </Modal.Body>\r\n\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide} disabled={loading}>\r\n          Hủy\r\n        </Button>\r\n        \r\n        <Button \r\n          variant=\"primary\" \r\n          onClick={handleSubmit}\r\n          disabled={loading || !formData.customer_id || !formData.template_id}\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n              Đang tạo...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <i className=\"fas fa-save me-2\"></i>\r\n              Tạo hợp đồng\r\n            </>\r\n          )}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ContractCreator;","/**\r\n * Contract Service - API calls for contract management\r\n */\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\r\n\r\nclass ContractService {\r\n  async getAuthHeaders() {\r\n    const token = localStorage.getItem('token');\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    };\r\n  }\r\n\r\n  async handleResponse(response) {\r\n    const contentType = response.headers.get('content-type') || '';\r\n    // If response is JSON, parse it.\r\n    if (contentType.includes('application/json')) {\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(data.message || `HTTP error! status: ${response.status}`);\r\n      }\r\n      return data;\r\n    }\r\n\r\n    // For non-JSON responses (HTML/text), return text body for better error messages\r\n    const text = await response.text();\r\n    if (!response.ok) {\r\n      // try to extract useful message from HTML (strip tags)\r\n      const stripped = text.replace(/<[^>]+>/g, '').trim();\r\n      const message = stripped ? stripped : `HTTP error! status: ${response.status}`;\r\n      throw new Error(message);\r\n    }\r\n\r\n    // If OK but not JSON, return raw text\r\n    return { success: true, data: text };\r\n  }\r\n\r\n  // Contract Management\r\n  async getContracts(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contracts${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getContract(id) {\r\n    const response = await fetch(`${API_BASE}/contracts/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createContract(contractData) {\r\n    const response = await fetch(`${API_BASE}/contracts`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async updateContract(id, contractData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async updateContractStatus(id, statusData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${id}/status`, {\r\n      method: 'PATCH',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(statusData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Contract Templates\r\n  async getContractTemplates(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contract-templates${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getContractTemplate(id) {\r\n    const response = await fetch(`${API_BASE}/contract-templates/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createContractTemplate(templateData) {\r\n    const response = await fetch(`${API_BASE}/contract-templates`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(templateData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async generateDocumentFromTemplate(templateId, generateData) {\r\n    const response = await fetch(`${API_BASE}/contract-templates/${templateId}/generate`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(generateData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Contract Documents\r\n  async getDocumentCategories() {\r\n    const response = await fetch(`${API_BASE}/contract-documents/categories`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getContractDocuments(contractId, params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contract-documents/${contractId}${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getDocument(id) {\r\n    const response = await fetch(`${API_BASE}/contract-documents/document/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createDocument(documentData) {\r\n    const response = await fetch(`${API_BASE}/contract-documents`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(documentData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async updateDocument(id, documentData) {\r\n    const response = await fetch(`${API_BASE}/contract-documents/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(documentData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createDocumentVersion(id, versionData = {}) {\r\n    const response = await fetch(`${API_BASE}/contract-documents/${id}/create-version`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(versionData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Workflow & Reviews\r\n  async submitForReview(contractId, reviewData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${contractId}/submit-review`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(reviewData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async addReview(contractId, reviewData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${contractId}/reviews`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(reviewData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Statistics\r\n  async getContractStats(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contracts/stats${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n}\r\n\r\nconst contractService = new ContractService();\r\nexport default contractService;"],"names":["API_BASE","process","getAuthHeaders","noCache","arguments","length","undefined","token","localStorage","getItem","console","log","warn","headers","concat","handleResponse","response","data","json","ok","error","status","statusText","errors","forEach","err","path","param","msg","Error","message","getCustomers","queryString","URLSearchParams","toString","url","fetch","method","this","getCustomer","id","createCustomer","customerData","body","JSON","stringify","updateCustomer","deleteCustomer","getCustomerContracts","customerId","createContract","contractData","getExpiringContracts","days","getCustomerStats","getProjects","params","axios","get","Authorization","getZones","projectId","zones","_ref","show","onHide","onSuccess","initialCustomerId","user","useAuth","showSuccess","showError","useNotification","loading","setLoading","useState","activeTab","setActiveTab","customers","setCustomers","customersLoaded","setCustomersLoaded","templates","setTemplates","projects","setProjects","setZones","selectedCustomer","setSelectedCustomer","selectedTemplate","setSelectedTemplate","selectedProject","setSelectedProject","selectedZone","setSelectedZone","templatesLoaded","setTemplatesLoaded","projectsLoaded","setProjectsLoaded","formData","setFormData","contract_title","customer_id","customer_company_id","template_id","project_id","zone_id","party_a_name","party_a_address","party_a_representative","party_a_position","party_a_id_number","warehouse_location","warehouse_area","warehouse_purpose","rental_price","deposit_amount","service_fee","start_date","end_date","auto_renewal","renewal_period","payment_cycle","payment_due_date","payment_method","late_fee_percentage","special_terms","notes","assigned_to","variables","loadInitialData","useCallback","async","_customersResponse$da","_templatesResponse$da","_projectsResponse$dat","_projectsResponse$dat2","customersResponse","templatesResponse","projectsResponse","Promise","all","customerService","limit","contractService","getContractTemplates","is_active","projectService","loadedTemplates","Array","isArray","defaultTpl","find","t","is_default","prev","_objectSpread","String","loadedProjects","useEffect","window","location","search","fromUrl","handleCustomerSelect","e","some","c","_customerResponse$dat","customerResponse","customer","ensureAndSelectInitialCustomer","zonesResponse","fetchZones","_customerResponse$dat2","parseInt","name","full_name","party_b_name","party_b_address","address","party_b_representative","representative_name","party_b_position","party_b_tax_code","tax_code","handleSubmit","preventDefault","contract_number","generateContractNumber","now","Date","year","getFullYear","month","getMonth","padStart","random","Math","floor","resetForm","formatCurrency","amount","Intl","NumberFormat","format","formatCurrencyForVariable","_jsxs","Modal","size","scrollable","children","_jsx","Header","closeButton","Title","className","Body","Alert","variant","Row","Col","md","customer_code","phone","representative_phone","email","representative_email","Form","onSubmit","Tabs","activeKey","onSelect","Tab","eventKey","title","Group","Label","Select","value","onChange","target","required","map","project","p","zoneId","z","zone_name","zone_code","disabled","zone","templateId","template","templateVars","parse","newVariables","variable","toLocaleString","handleTemplateSelect","template_name","template_code","version","template_type","Control","type","placeholder","step","min","parseFloat","numericValue","replace","Text","round","startDate","endDate","months","start","end","setMonth","toISOString","split","calculateEndDate","toLocaleDateString","max","Check","label","checked","as","rows","vars","description","Card","dangerouslySetInnerHTML","__html","template_content","match","varName","style","border","padding","backgroundColor","fontFamily","Footer","Button","onClick","_Fragment","includes","text","stripped","trim","success","getContracts","getContract","updateContract","updateContractStatus","statusData","getContractTemplate","createContractTemplate","templateData","generateDocumentFromTemplate","generateData","getDocumentCategories","getContractDocuments","contractId","getDocument","createDocument","documentData","updateDocument","createDocumentVersion","versionData","submitForReview","reviewData","addReview","getContractStats"],"ignoreList":[],"sourceRoot":""}
{"version":3,"file":"static/js/805.0cfd44f8.chunk.js","mappings":"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","sources":["services/customerService.js","../node_modules/react-bootstrap/esm/Container.js","../node_modules/react-bootstrap/esm/Table.js","pages/Customers/index.js","components/Customers/PersonalInfoTab.js","components/Customers/CompanyInfoTab.js","components/Customers/CustomerFormTabs.js"],"sourcesContent":["/**\r\n * Customer Service - API calls for customer management\r\n */\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\r\n\r\nclass CustomerService {\r\n  async getAuthHeaders(noCache = false) {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    // Debug th√¥ng tin auth\r\n    if (!token) {\r\n      console.warn('‚ö†Ô∏è No token found in localStorage');\r\n    } else {\r\n      console.log('‚úÖ Token found, length:', token.length);\r\n    }\r\n    \r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    };\r\n    \r\n    if (noCache) {\r\n      headers['Cache-Control'] = 'no-cache';\r\n      headers['Pragma'] = 'no-cache';\r\n    }\r\n    \r\n    return headers;\r\n  }\r\n\r\n  async handleResponse(response) {\r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      // Debug th√¥ng tin chi ti·∫øt v·ªÅ l·ªói\r\n      console.error('‚ùå CustomerService API Error:');\r\n      console.error('  Status:', response.status);\r\n      console.error('  Status Text:', response.statusText);\r\n      console.error('  Response Data:', data);\r\n      \r\n      // Ki·ªÉm tra l·ªói validation c·ª• th·ªÉ\r\n      if (response.status === 400 && data.errors) {\r\n        console.error('  Validation Errors:');\r\n        data.errors.forEach(err => {\r\n          console.error(`    - ${err.path || err.param}: ${err.msg}`);\r\n        });\r\n      }\r\n      \r\n      throw new Error(data.message || `HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    return data;\r\n  }\r\n\r\n  // L·∫•y danh s√°ch kh√°ch h√†ng\r\n  async getCustomers(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders(true) // Force no-cache for fresh data\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // L·∫•y chi ti·∫øt kh√°ch h√†ng\r\n  async getCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // T·∫°o kh√°ch h√†ng m·ªõi\r\n  async createCustomer(customerData) {\r\n    const response = await fetch(`${API_BASE}/customers`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // C·∫≠p nh·∫≠t kh√°ch h√†ng\r\n  async updateCustomer(id, customerData) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // X√≥a kh√°ch h√†ng\r\n  async deleteCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'DELETE',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // L·∫•y h·ª£p ƒë·ªìng c·ªßa kh√°ch h√†ng\r\n  async getCustomerContracts(customerId, status = null) {\r\n    const params = status ? { status } : {};\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers/${customerId}/contracts${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // T·∫°o h·ª£p ƒë·ªìng m·ªõi\r\n  async createContract(contractData) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // L·∫•y h·ª£p ƒë·ªìng s·∫Øp h·∫øt h·∫°n\r\n  async getExpiringContracts(days = 30) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts/expiring?days=${days}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // L·∫•y th·ªëng k√™ kh√°ch h√†ng\r\n  async getCustomerStats() {\r\n    const response = await fetch(`${API_BASE}/customers/stats`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n}\r\n\r\nconst customerService = new CustomerService();\r\nexport default customerService;","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Container = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  fluid = false,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  className,\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'container');\n  const suffix = typeof fluid === 'string' ? `-${fluid}` : '-fluid';\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, fluid ? `${prefix}${suffix}` : prefix)\n  });\n});\nContainer.displayName = 'Container';\nexport default Container;","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  const classes = classNames(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-${typeof striped === 'string' ? `striped-${striped}` : 'striped'}`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n  const table = /*#__PURE__*/_jsx(\"table\", {\n    ...props,\n    className: classes,\n    ref: ref\n  });\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n  return table;\n});\nTable.displayName = 'Table';\nexport default Table;","/**\r\n * Customers Page - KHO MVG\r\n * Danh s√°ch v√† qu·∫£n l√Ω kh√°ch h√†ng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Container, Row, Col, Card, Button, Table, Badge, Form, Modal } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport CustomerFormTabs from '../../components/Customers/CustomerFormTabs';\r\nimport customerService from '../../services/customerService';\r\n\r\nfunction Customers() {\r\n  const navigate = useNavigate();\r\n  const { hasPermission } = useAuth();\r\n  const { showSuccess, showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(true);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [filteredCustomers, setFilteredCustomers] = useState([]);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editingCustomer, setEditingCustomer] = useState(null);\r\n  const [formLoading, setFormLoading] = useState(false);\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 20,\r\n    total: 0,\r\n    pages: 0\r\n  });\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    customer_type: '',\r\n    credit_rating: ''\r\n  });\r\n\r\n  // Load customers from API\r\n  const loadCustomers = useCallback(async (page = 1) => {\r\n    try {\r\n      setLoading(true);\r\n      const params = {\r\n        page,\r\n        limit: pagination.limit,\r\n        ...filters\r\n      };\r\n\r\n      // Remove empty filters\r\n      Object.keys(params).forEach(key => {\r\n        if (!params[key]) delete params[key];\r\n      });\r\n\r\n      const response = await customerService.getCustomers(params);\r\n      \r\n      setCustomers(response.data.customers);\r\n      setFilteredCustomers(response.data.customers);\r\n      setPagination(response.data.pagination);\r\n    } catch (error) {\r\n      // showError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch kh√°ch h√†ng: ' + error.message);\r\n      console.warn('Customer loading error:', error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filters, pagination.limit, showError]);\r\n\r\n  useEffect(() => {\r\n    if (hasPermission('customer_read')) {\r\n      loadCustomers(pagination.page);\r\n    }\r\n  }, [hasPermission, loadCustomers, pagination.page]);\r\n\r\n  useEffect(() => {\r\n    loadCustomers(pagination.page);\r\n  }, []);\r\n\r\n  // Handle filter changes\r\n  useEffect(() => {\r\n    // Debounce search to avoid too many API calls\r\n    const timeoutId = setTimeout(() => {\r\n      if (pagination.page === 1) {\r\n        loadCustomers(1);\r\n      } else {\r\n        setPagination(prev => ({ ...prev, page: 1 }));\r\n        loadCustomers(1);\r\n      }\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [filters]);\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      [key]: value\r\n    }));\r\n  };\r\n\r\n  const getCreditRatingBadge = (rating) => {\r\n    const ratingMap = {\r\n      A: { variant: 'success', label: 'A - T·ªët' },\r\n      B: { variant: 'primary', label: 'B - Kh√°' },\r\n      C: { variant: 'warning', label: 'C - Trung b√¨nh' },\r\n      D: { variant: 'danger', label: 'D - K√©m' }\r\n    };\r\n    \r\n    const ratingInfo = ratingMap[rating] || { variant: 'secondary', label: rating };\r\n    return <Badge bg={ratingInfo.variant}>{ratingInfo.label}</Badge>;\r\n  };\r\n\r\n  const getCustomerTypeBadge = (type) => {\r\n    return type === 'company' ? \r\n      <Badge bg=\"info\">Doanh nghi·ªáp</Badge> : \r\n      <Badge bg=\"secondary\">C√° nh√¢n</Badge>;\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN', {\r\n      style: 'currency',\r\n      currency: 'VND'\r\n    }).format(amount).replace('‚Ç´', 'ƒë');\r\n  };\r\n\r\n  const handleViewCustomer = (customerId) => {\r\n    navigate(`/customers/${customerId}`);\r\n  };\r\n\r\n  const handleCreateCustomer = () => {\r\n    if (!hasPermission('customer_create')) {\r\n      showError('B·∫°n kh√¥ng c√≥ quy·ªÅn t·∫°o kh√°ch h√†ng m·ªõi');\r\n      return;\r\n    }\r\n    setEditingCustomer(null);\r\n    setShowCreateModal(true);\r\n  };\r\n\r\n  const handleEditCustomer = async (customer) => {\r\n    if (!hasPermission('customer_update')) {\r\n      showError('B·∫°n kh√¥ng c√≥ quy·ªÅn ch·ªânh s·ª≠a kh√°ch h√†ng');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setFormLoading(true);\r\n      console.log('üîç Loading full customer data including contracts...');\r\n      \r\n      // Load full customer data with contracts from API\r\n      const fullCustomerData = await customerService.getCustomer(customer.id);\r\n      console.log('‚úÖ Full customer data loaded:', fullCustomerData.data);\r\n      \r\n      // Merge customer info with contracts data\r\n      const customerWithContracts = {\r\n        ...fullCustomerData.data.customer,  // Customer personal/company info\r\n        contracts: fullCustomerData.data.contracts || [],  // Contracts array\r\n        statistics: fullCustomerData.data.statistics\r\n      };\r\n      \r\n      console.log('‚úÖ Merged customer data for form:', customerWithContracts);\r\n      setEditingCustomer(customerWithContracts);\r\n      setShowEditModal(true);\r\n    } catch (error) {\r\n      console.error('‚ùå Failed to load customer details:', error);\r\n      // Fallback to using basic customer data if API fails\r\n      setEditingCustomer(customer);\r\n      setShowEditModal(true);\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCustomer = async (customer) => {\r\n    if (!hasPermission('customer_delete')) {\r\n      showError('B·∫°n kh√¥ng c√≥ quy·ªÅn x√≥a kh√°ch h√†ng');\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√°ch h√†ng \"${customer.company_name || customer.contact_person}\"?`)) {\r\n      try {\r\n        await customerService.deleteCustomer(customer.id);\r\n        showSuccess('X√≥a kh√°ch h√†ng th√†nh c√¥ng');\r\n        loadCustomers(pagination.page);\r\n      } catch (error) {\r\n        showError('Kh√¥ng th·ªÉ x√≥a kh√°ch h√†ng: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Transform form data to API format\r\n  const transformFormDataToAPI = (formData) => {\r\n    console.log('üîç Raw form data received:', formData);\r\n    \r\n    // Safety checks for form data structure\r\n    if (!formData || typeof formData !== 'object') {\r\n      console.error('‚ùå Invalid form data structure:', formData);\r\n      throw new Error('Invalid form data received');\r\n    }\r\n    \r\n    const { personal = {}, companies = [] } = formData;\r\n    const primaryCompany = companies[0] || {};\r\n    \r\n    console.log('üìã Form data breakdown:', {\r\n      personal,\r\n      primaryCompany,\r\n      companiesLength: companies.length\r\n    });\r\n    \r\n    const apiData = {\r\n      // Map from personal tab\r\n      name: primaryCompany.company_name || personal.full_name || '',\r\n      full_name: personal.full_name || '',\r\n      representative_name: personal.full_name || '',\r\n      phone: personal.phone || '',\r\n      email: personal.email || '',\r\n      address: personal.address || primaryCompany.invoice_address || '',\r\n      customer_type: personal.customer_type || 'individual', \r\n      notes: personal.notes || '',\r\n      id_number: personal.id_number || '',\r\n      warehouse_purpose: primaryCompany.warehouse_purpose || '',\r\n      \r\n      // Map from company tab  \r\n      tax_code: primaryCompany.tax_code || '',\r\n      representative_phone: personal.phone || '', \r\n      representative_email: personal.email || ''\r\n    };\r\n    \r\n    console.log('üìä Field mapping details:');\r\n    console.log('  personal.full_name ‚Üí', apiData.full_name, '& representative_name ‚Üí', apiData.representative_name);\r\n    console.log('  personal.id_number ‚Üí', apiData.id_number);\r\n    console.log('  personal.phone ‚Üí', apiData.phone);\r\n    console.log('  personal.email ‚Üí', apiData.email);\r\n    console.log('  personal.address ‚Üí', apiData.address);\r\n    console.log('  primaryCompany.company_name ‚Üí', apiData.name);\r\n    console.log('  primaryCompany.warehouse_purpose ‚Üí', apiData.warehouse_purpose);\r\n    console.log('  primaryCompany.tax_code ‚Üí', apiData.tax_code);\r\n    \r\n    console.log('‚úÖ Transformed API data:', apiData);\r\n    \r\n    // Validation checks\r\n    if (!apiData.representative_name || !apiData.phone) {\r\n      console.error('‚ùå Missing required fields:', {\r\n        representative_name: apiData.representative_name,\r\n        phone: apiData.phone\r\n      });\r\n      throw new Error('Missing required fields: representative_name or phone');\r\n    }\r\n    \r\n    return apiData;\r\n  };\r\n\r\n  const handleSaveCustomer = async (customerData) => {\r\n    try {\r\n      setFormLoading(true);\r\n      \r\n      // Transform the nested form data to flat API format\r\n      const apiData = transformFormDataToAPI(customerData);\r\n      console.log('Transformed customer data:', apiData);\r\n      \r\n      if (editingCustomer) {\r\n        await customerService.updateCustomer(editingCustomer.id, apiData);\r\n        showSuccess('C·∫≠p nh·∫≠t kh√°ch h√†ng th√†nh c√¥ng');\r\n        setShowEditModal(false);\r\n        \r\n        // Force reload customer data to show updated info\r\n        console.log('üîÑ Reloading customers list after update...');\r\n        await loadCustomers(pagination.page);\r\n        console.log('‚úÖ Customers list reloaded successfully');\r\n      } else {\r\n        await customerService.createCustomer(apiData);\r\n        showSuccess('T·∫°o kh√°ch h√†ng m·ªõi th√†nh c√¥ng');\r\n        setShowCreateModal(false);\r\n        \r\n        // Reload list to show new customer\r\n        await loadCustomers(pagination.page);\r\n      }\r\n      \r\n      setEditingCustomer(null);\r\n    } catch (error) {\r\n      throw error; // Let the form handle the error\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n  // const handlePageChange = (newPage) => {\r\n  //   setPagination(prev => ({ ...prev, page: newPage }));\r\n  //   loadCustomers(newPage);\r\n  // };\r\n\r\n  const totalRevenue = customers.reduce((sum, customer) => sum + customer.monthly_revenue, 0);\r\n  const activeCustomers = customers.filter(c => c.active_contracts > 0).length;\r\n  const averageRevenue = customers.length > 0 ? totalRevenue / customers.length : 0;\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner text=\"ƒêang t·∫£i danh s√°ch kh√°ch h√†ng...\" />;\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"p-4\">\r\n      {/* Page Header */}\r\n      <Row className=\"mb-4\">\r\n        <Col>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <div>\r\n              <h2 className=\"mb-1\">Qu·∫£n l√Ω Kh√°ch h√†ng</h2>\r\n              <p className=\"text-muted mb-0\">\r\n                Qu·∫£n l√Ω th√¥ng tin kh√°ch h√†ng v√† h·ª£p ƒë·ªìng\r\n              </p>\r\n            </div>\r\n            {hasPermission('customer_create') && (\r\n              <Button variant=\"primary\" onClick={handleCreateCustomer}>\r\n                <i className=\"fas fa-plus me-2\"></i>\r\n                Th√™m kh√°ch h√†ng\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Statistics Cards */}\r\n      <Row className=\"mb-4\">\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">T·ªïng kh√°ch h√†ng</h6>\r\n                  <h4 className=\"mb-0 text-primary\">{customers.length}</h4>\r\n                </div>\r\n                <i className=\"fas fa-users fa-2x text-primary opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">ƒêang ho·∫°t ƒë·ªông</h6>\r\n                  <h4 className=\"mb-0 text-success\">{activeCustomers}</h4>\r\n                </div>\r\n                <i className=\"fas fa-user-check fa-2x text-success opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">T·ªïng doanh thu/th√°ng</h6>\r\n                  <h4 className=\"mb-0 text-warning\">{formatCurrency(totalRevenue)}</h4>\r\n                </div>\r\n                <i className=\"fas fa-chart-line fa-2x text-warning opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        <Col md={3} className=\"mb-3\">\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h6 className=\"text-muted mb-1\">TB doanh thu/KH</h6>\r\n                  <h4 className=\"mb-0 text-info\">{formatCurrency(averageRevenue)}</h4>\r\n                </div>\r\n                <i className=\"fas fa-calculator fa-2x text-info opacity-25\"></i>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"border-0 shadow-sm mb-4\">\r\n        <Card.Body>\r\n          <Row>\r\n            <Col md={4}>\r\n              <Form.Group>\r\n                <Form.Label>T√¨m ki·∫øm</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder=\"T√¨m theo m√£, t√™n, SƒêT, email...\"\r\n                  value={filters.search}\r\n                  onChange={(e) => handleFilterChange('search', e.target.value)}\r\n                />\r\n              </Form.Group>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Form.Group>\r\n                <Form.Label>Lo·∫°i kh√°ch h√†ng</Form.Label>\r\n                <Form.Select\r\n                  value={filters.customer_type}\r\n                  onChange={(e) => handleFilterChange('customer_type', e.target.value)}\r\n                >\r\n                  <option value=\"\">T·∫•t c·∫£ lo·∫°i</option>\r\n                  <option value=\"company\">Doanh nghi·ªáp</option>\r\n                  <option value=\"individual\">C√° nh√¢n</option>\r\n                </Form.Select>\r\n              </Form.Group>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Form.Group>\r\n                <Form.Label>X·∫øp h·∫°ng t√≠n d·ª•ng</Form.Label>\r\n                <Form.Select\r\n                  value={filters.credit_rating}\r\n                  onChange={(e) => handleFilterChange('credit_rating', e.target.value)}\r\n                >\r\n                  <option value=\"\">T·∫•t c·∫£ x·∫øp h·∫°ng</option>\r\n                  <option value=\"A\">A - T·ªët</option>\r\n                  <option value=\"B\">B - Kh√°</option>\r\n                  <option value=\"C\">C - Trung b√¨nh</option>\r\n                  <option value=\"D\">D - K√©m</option>\r\n                </Form.Select>\r\n              </Form.Group>\r\n            </Col>\r\n          </Row>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* Customers Table */}\r\n      <Card className=\"border-0 shadow-sm\">\r\n        <Card.Header className=\"bg-white border-0\">\r\n          <h5 className=\"mb-0\">\r\n            <i className=\"fas fa-list me-2\"></i>\r\n            Danh s√°ch kh√°ch h√†ng ({filteredCustomers.length})\r\n          </h5>\r\n        </Card.Header>\r\n        <Card.Body className=\"p-0\">\r\n          <div className=\"table-responsive\">\r\n            <Table hover className=\"mb-0\">\r\n              <thead className=\"bg-light\">\r\n                <tr>\r\n                  <th>Kh√°ch h√†ng</th>\r\n                  <th>Li√™n h·ªá</th>\r\n                  <th>Lo·∫°i</th>\r\n                  <th>X·∫øp h·∫°ng</th>\r\n                  <th>H·ª£p ƒë·ªìng</th>\r\n                  <th>Doanh thu/th√°ng</th>\r\n                  <th>Thao t√°c</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredCustomers.length > 0 ? (\r\n                  filteredCustomers.map((customer) => (\r\n                    <tr key={customer.id}>\r\n                      <td>\r\n                        <div>\r\n                          <div className=\"fw-bold\">\r\n                            {customer.company_name || customer.contact_person}\r\n                          </div>\r\n                          <small className=\"text-muted\">{customer.customer_code}</small>\r\n                          {customer.company_name && (\r\n                            <div>\r\n                              <small className=\"text-muted\">{customer.contact_person}</small>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div>\r\n                          <div>\r\n                            <i className=\"fas fa-phone fa-sm me-1\"></i>\r\n                            {customer.phone}\r\n                          </div>\r\n                          {customer.email && (\r\n                            <div>\r\n                              <i className=\"fas fa-envelope fa-sm me-1\"></i>\r\n                              <small>{customer.email}</small>\r\n                            </div>\r\n                          )}\r\n                          <div className=\"text-muted\">\r\n                            <small>{customer.address}</small>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td>{getCustomerTypeBadge(customer.customer_type)}</td>\r\n                      <td>{getCreditRatingBadge(customer.credit_rating)}</td>\r\n                      <td>\r\n                        <div>\r\n                          <div>\r\n                            <span className=\"fw-medium text-success\">\r\n                              {customer.active_contracts}\r\n                            </span>\r\n                            <span className=\"text-muted\">/{customer.total_contracts}</span>\r\n                          </div>\r\n                          <small className=\"text-muted\">Hi·ªáu l·ª±c/T·ªïng</small>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"fw-bold text-success\">\r\n                          {formatCurrency(customer.monthly_revenue)}\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"btn-group\">\r\n                          <Button\r\n                            variant=\"outline-primary\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleViewCustomer(customer.id)}\r\n                          >\r\n                            <i className=\"fas fa-eye\"></i>\r\n                          </Button>\r\n                          {hasPermission('customer_update') && (\r\n                            <Button\r\n                              variant=\"outline-secondary\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleEditCustomer(customer)}\r\n                              title=\"Ch·ªânh s·ª≠a\"\r\n                            >\r\n                              <i className=\"fas fa-edit\"></i>\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('customer_delete') && (\r\n                            <Button\r\n                              variant=\"outline-danger\"\r\n                              size=\"sm\"\r\n                              className=\"ms-1\"\r\n                              onClick={() => handleDeleteCustomer(customer)}\r\n                              title=\"X√≥a kh√°ch h√†ng\"\r\n                            >\r\n                              <i className=\"fas fa-trash\"></i>\r\n                            </Button>\r\n                          )}\r\n                          {hasPermission('contract_create') && (\r\n                            <Button\r\n                              variant=\"outline-success\"\r\n                              size=\"sm\"\r\n                              onClick={() => navigate(`/contracts/create?customer=${customer.id}`)}\r\n                              title=\"T·∫°o h·ª£p ƒë·ªìng m·ªõi\"\r\n                            >\r\n                              <i className=\"fas fa-file-contract\"></i>\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"text-center py-4\">\r\n                      <div className=\"text-muted\">\r\n                        <i className=\"fas fa-search fa-2x mb-3\"></i>\r\n                        <p>Kh√¥ng t√¨m th·∫•y kh√°ch h√†ng n√†o ph√π h·ª£p v·ªõi b·ªô l·ªçc</p>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* Quick Actions */}\r\n      <Row className=\"mt-4\">\r\n        <Col md={6}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Header className=\"bg-white border-0\">\r\n              <h6 className=\"mb-0\">\r\n                <i className=\"fas fa-exclamation-triangle text-warning me-2\"></i>\r\n                Kh√°ch h√†ng c·∫ßn ch√∫ √Ω\r\n              </h6>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>X·∫øp h·∫°ng D (K√©m)</span>\r\n                <Badge bg=\"danger\">{customers.filter(c => c.credit_rating === 'D').length}</Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>Kh√¥ng c√≥ h·ª£p ƒë·ªìng hi·ªáu l·ª±c</span>\r\n                <Badge bg=\"warning\">{customers.filter(c => c.active_contracts === 0).length}</Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <span>Doanh thu = 0</span>\r\n                <Badge bg=\"secondary\">{customers.filter(c => c.monthly_revenue === 0).length}</Badge>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n        \r\n        <Col md={6}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Header className=\"bg-white border-0\">\r\n              <h6 className=\"mb-0\">\r\n                <i className=\"fas fa-chart-pie text-info me-2\"></i>\r\n                Th·ªëng k√™ nhanh\r\n              </h6>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>Doanh nghi·ªáp</span>\r\n                <Badge bg=\"info\">\r\n                  {customers.filter(c => c.customer_type === 'company').length}\r\n                  <span className=\"ms-1\">\r\n                    ({Math.round(customers.filter(c => c.customer_type === 'company').length / customers.length * 100)}%)\r\n                  </span>\r\n                </Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                <span>C√° nh√¢n</span>\r\n                <Badge bg=\"secondary\">\r\n                  {customers.filter(c => c.customer_type === 'individual').length}\r\n                  <span className=\"ms-1\">\r\n                    ({Math.round(customers.filter(c => c.customer_type === 'individual').length / customers.length * 100)}%)\r\n                  </span>\r\n                </Badge>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <span>X·∫øp h·∫°ng A (T·ªët)</span>\r\n                <Badge bg=\"success\">{customers.filter(c => c.credit_rating === 'A').length}</Badge>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Create Customer Modal */}\r\n      <Modal show={showCreateModal} onHide={() => setShowCreateModal(false)} size=\"xl\" scrollable>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Th√™m kh√°ch h√†ng m·ªõi</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"p-0\">\r\n          <div style={{ maxHeight: '80vh', overflowY: 'auto', padding: '1rem' }}>\r\n            <CustomerFormTabs\r\n              customer={null}\r\n              onSave={handleSaveCustomer}\r\n              onCancel={() => setShowCreateModal(false)}\r\n              isLoading={formLoading}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n      </Modal>\r\n\r\n      {/* Edit Customer Modal */}\r\n      <Modal show={showEditModal} onHide={() => setShowEditModal(false)} size=\"xl\" scrollable>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Ch·ªânh s·ª≠a kh√°ch h√†ng</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"p-0\">\r\n          <div style={{ maxHeight: '80vh', overflowY: 'auto', padding: '1rem' }}>\r\n            <CustomerFormTabs\r\n              customer={editingCustomer}\r\n              onSave={handleSaveCustomer}\r\n              onCancel={() => setShowEditModal(false)}\r\n              isLoading={formLoading}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n      </Modal>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Customers;","/**\r\n * Personal Info Tab - Th√¥ng tin c√° nh√¢n c∆° b·∫£n\r\n */\r\n\r\nimport React from 'react';\r\nimport { Form, Row, Col, Card, Button, InputGroup, Alert } from 'react-bootstrap';\r\n\r\nfunction PersonalInfoTab({ data, errors, touched, onDataChange, onGenerateCode }) {\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const newData = { ...data, [name]: value };\r\n    onDataChange(newData);\r\n  };\r\n\r\n  // const _validateField = (name, value) => {\r\n  //   switch (name) {\r\n  //     case 'customer_code':\r\n  //       if (!value.trim()) return 'M√£ kh√°ch h√†ng l√† b·∫Øt bu·ªôc';\r\n  //       if (!/^(CN|DN)\\d{6}$/.test(value)) return 'M√£ kh√°ch h√†ng ph·∫£i c√≥ format: CN/DN + 6 s·ªë';\r\n  //       break;\r\n  //     case 'full_name':\r\n  //       if (!value.trim()) return 'H·ªç t√™n l√† b·∫Øt bu·ªôc';\r\n  //       if (value.length < 2) return 'H·ªç t√™n ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±';\r\n  //       break;\r\n  //     case 'phone':\r\n  //       if (!value.trim()) return 'S·ªë ƒëi·ªán tho·∫°i l√† b·∫Øt bu·ªôc';\r\n  //       if (!/^[0-9+\\-\\s()]{10,15}$/.test(value)) return 'S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá';\r\n  //       break;\r\n  //     case 'email':\r\n  //       if (value && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n  //         return 'Email kh√¥ng h·ª£p l·ªá';\r\n  //       }\r\n  //       break;\r\n  //     case 'id_number':\r\n  //       if (value && !/^[0-9]{9,12}$/.test(value)) {\r\n  //         return 'CMND/CCCD ph·∫£i c√≥ 9-12 s·ªë';\r\n  //       }\r\n  //       break;\r\n  //     default:\r\n  //       break;\r\n  //   }\r\n  //   return '';\r\n  // };\r\n\r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <h5 className=\"mb-0\">\r\n          <i className=\"fas fa-user me-2\"></i>\r\n          Th√¥ng tin c√° nh√¢n c∆° b·∫£n\r\n        </h5>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        <Row>\r\n          <Col md={6}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Lo·∫°i kh√°ch h√†ng *</Form.Label>\r\n              <Form.Select\r\n                name=\"customer_type\"\r\n                value={data.customer_type}\r\n                onChange={handleInputChange}\r\n              >\r\n                <option value=\"individual\">C√° nh√¢n (CN)</option>\r\n                <option value=\"company\">Doanh nghi·ªáp (DN)</option>\r\n              </Form.Select>\r\n              <Form.Text className=\"text-muted\">\r\n                M√£ kh√°ch h√†ng s·∫Ω b·∫Øt ƒë·∫ßu b·∫±ng CN (C√° nh√¢n) ho·∫∑c DN (Doanh nghi·ªáp)\r\n              </Form.Text>\r\n            </Form.Group>\r\n          </Col>\r\n          \r\n          <Col md={6}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>M√£ kh√°ch h√†ng *</Form.Label>\r\n              <InputGroup>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  name=\"customer_code\"\r\n                  value={data.customer_code}\r\n                  onChange={handleInputChange}\r\n                  placeholder={`VD: ${data.customer_type === 'individual' ? 'CN' : 'DN'}123456`}\r\n                  isInvalid={touched.customer_code && errors.customer_code}\r\n                />\r\n                <Button \r\n                  variant=\"outline-secondary\" \r\n                  onClick={onGenerateCode}\r\n                  title=\"T·ª± ƒë·ªông t·∫°o m√£\"\r\n                >\r\n                  <i className=\"fas fa-magic\"></i>\r\n                </Button>\r\n              </InputGroup>\r\n              {touched.customer_code && errors.customer_code && (\r\n                <div className=\"invalid-feedback d-block\">{errors.customer_code}</div>\r\n              )}\r\n              <Form.Text className=\"text-muted\">\r\n                Format: 2 k√Ω t·ª± ph√¢n lo·∫°i + 6 k√Ω t·ª± s·ªë t·ª± ƒë·ªông\r\n              </Form.Text>\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row>\r\n          <Col md={8}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>H·ªç v√† t√™n ƒë·∫ßy ƒë·ªß *</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"full_name\"\r\n                value={data.full_name}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Nh·∫≠p h·ªç t√™n ƒë·∫ßy ƒë·ªß\"\r\n                isInvalid={touched.full_name && errors.full_name}\r\n              />\r\n              {touched.full_name && errors.full_name && (\r\n                <div className=\"invalid-feedback\">{errors.full_name}</div>\r\n              )}\r\n            </Form.Group>\r\n          </Col>\r\n          \r\n          <Col md={4}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>S·ªë ƒëi·ªán tho·∫°i *</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"phone\"\r\n                value={data.phone}\r\n                onChange={handleInputChange}\r\n                placeholder=\"0123456789\"\r\n                isInvalid={touched.phone && errors.phone}\r\n              />\r\n              {touched.phone && errors.phone && (\r\n                <div className=\"invalid-feedback\">{errors.phone}</div>\r\n              )}\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row>\r\n          <Col md={6}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={data.email}\r\n                onChange={handleInputChange}\r\n                placeholder=\"email@example.com\"\r\n                isInvalid={touched.email && errors.email}\r\n              />\r\n              {touched.email && errors.email && (\r\n                <div className=\"invalid-feedback\">{errors.email}</div>\r\n              )}\r\n            </Form.Group>\r\n          </Col>\r\n          \r\n          <Col md={6}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>CMND/CCCD</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"id_number\"\r\n                value={data.id_number}\r\n                onChange={handleInputChange}\r\n                placeholder=\"S·ªë CMND/CCCD\"\r\n                isInvalid={touched.id_number && errors.id_number}\r\n              />\r\n              {touched.id_number && errors.id_number && (\r\n                <div className=\"invalid-feedback\">{errors.id_number}</div>\r\n              )}\r\n            </Form.Group>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>ƒê·ªãa ch·ªâ li√™n h·ªá</Form.Label>\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            rows={2}\r\n            name=\"address\"\r\n            value={data.address}\r\n            onChange={handleInputChange}\r\n            placeholder=\"ƒê·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß (s·ªë nh√†, ƒë∆∞·ªùng, ph∆∞·ªùng/x√£, qu·∫≠n/huy·ªán, t·ªânh/th√†nh)\"\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>Ghi ch√∫</Form.Label>\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            rows={3}\r\n            name=\"notes\"\r\n            value={data.notes}\r\n            onChange={handleInputChange}\r\n            placeholder=\"Ghi ch√∫ th√™m v·ªÅ kh√°ch h√†ng...\"\r\n          />\r\n        </Form.Group>\r\n\r\n        {data.customer_type === 'individual' && (\r\n          <Alert variant=\"info\">\r\n            <i className=\"fas fa-info-circle me-2\"></i>\r\n            <strong>L∆∞u √Ω cho kh√°ch h√†ng c√° nh√¢n:</strong> M·ªôt c√° nh√¢n c√≥ th·ªÉ thu√™ kho th√¥ng qua nhi·ªÅu c√¥ng ty kh√°c nhau. \r\n            Vui l√≤ng ƒëi·ªÅn th√¥ng tin c√¥ng ty ·ªü tab ti·∫øp theo.\r\n          </Alert>\r\n        )}\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default PersonalInfoTab;","/**\r\n * Company Info Tab - Th√¥ng tin c√¥ng ty\r\n * M·ªôt c√° nh√¢n c√≥ th·ªÉ thu√™ nhi·ªÅu kho b·∫±ng nhi·ªÅu c√¥ng ty kh√°c nhau\r\n */\r\n\r\nimport React from 'react';\r\nimport { Form, Row, Col, Card, Button, Alert, Badge } from 'react-bootstrap';\r\n\r\nfunction CompanyInfoTab({ companies, errors, touched, onCompaniesChange }) {\r\n  \r\n  const addCompany = () => {\r\n    const newCompany = {\r\n      id: null,\r\n      tax_code: '',\r\n      company_name: '',\r\n      invoice_address: '',\r\n      warehouse_purpose: '',\r\n      is_primary: companies.length === 0 // First company is primary\r\n    };\r\n    onCompaniesChange([...companies, newCompany]);\r\n  };\r\n\r\n  const removeCompany = (index) => {\r\n    if (companies.length <= 1) {\r\n      alert('Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt c√¥ng ty');\r\n      return;\r\n    }\r\n    \r\n    if (window.confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a c√¥ng ty n√†y?')) {\r\n      const newCompanies = companies.filter((_, i) => i !== index);\r\n      // If removing primary company, make first one primary\r\n      if (companies[index].is_primary && newCompanies.length > 0) {\r\n        newCompanies[0].is_primary = true;\r\n      }\r\n      onCompaniesChange(newCompanies);\r\n    }\r\n  };\r\n\r\n  const updateCompany = (index, field, value) => {\r\n    const newCompanies = [...companies];\r\n    newCompanies[index] = {\r\n      ...newCompanies[index],\r\n      [field]: value\r\n    };\r\n    onCompaniesChange(newCompanies);\r\n  };\r\n\r\n  const setPrimaryCompany = (index) => {\r\n    const newCompanies = companies.map((company, i) => ({\r\n      ...company,\r\n      is_primary: i === index\r\n    }));\r\n    onCompaniesChange(newCompanies);\r\n  };\r\n\r\n  const validateTaxCode = (taxCode) => {\r\n    if (!taxCode.trim()) return 'M√£ s·ªë thu·∫ø l√† b·∫Øt bu·ªôc';\r\n    if (!/^[0-9]{10}(-[0-9]{3})?$/.test(taxCode)) {\r\n      return 'M√£ s·ªë thu·∫ø ph·∫£i c√≥ 10 s·ªë ho·∫∑c 10 s·ªë + 3 s·ªë m√£ chi nh√°nh (VD: 0123456789 ho·∫∑c 0123456789-001)';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const warehousePurposes = [\r\n    'Kho h√†ng h√≥a t·ªïng h·ª£p',\r\n    'Kho nguy√™n li·ªáu s·∫£n xu·∫•t', \r\n    'Kho th√†nh ph·∫©m',\r\n    'Kho ph·ª• t√πng, linh ki·ªán',\r\n    'Kho thi·∫øt b·ªã, m√°y m√≥c',\r\n    'Kho h√†ng ƒëi·ªán t·ª≠',\r\n    'Kho h√†ng th·ªùi trang',\r\n    'Kho h√†ng th·ª±c ph·∫©m',\r\n    'Kho h√†ng d∆∞·ª£c ph·∫©m',\r\n    'Kho h√†ng h√≥a ch·∫•t',\r\n    'Kho vƒÉn ph√≤ng ph·∫©m',\r\n    'Kho t√†i li·ªáu, h·ªì s∆°',\r\n    'Kh√°c'\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h5 className=\"mb-0\">\r\n          <i className=\"fas fa-building me-2\"></i>\r\n          Th√¥ng tin c√¥ng ty ({companies.length})\r\n        </h5>\r\n        <Button variant=\"outline-primary\" size=\"sm\" onClick={addCompany}>\r\n          <i className=\"fas fa-plus me-2\"></i>\r\n          Th√™m c√¥ng ty\r\n        </Button>\r\n      </div>\r\n\r\n      <Alert variant=\"info\" className=\"mb-3\">\r\n        <i className=\"fas fa-info-circle me-2\"></i>\r\n        <strong>L∆∞u √Ω:</strong> M·ªôt c√° nh√¢n c√≥ th·ªÉ thu√™ nhi·ªÅu kho b·∫±ng nhi·ªÅu c√¥ng ty kh√°c nhau. \r\n        M·ªói c√¥ng ty s·∫Ω c√≥ th√¥ng tin ri√™ng ƒë·ªÉ xu·∫•t h√≥a ƒë∆°n v√† k√Ω h·ª£p ƒë·ªìng.\r\n      </Alert>\r\n\r\n      {companies.map((company, index) => (\r\n        <Card key={index} className=\"mb-3\">\r\n          <Card.Header className=\"d-flex justify-content-between align-items-center\">\r\n            <div>\r\n              <strong>C√¥ng ty {index + 1}</strong>\r\n              {company.is_primary && (\r\n                <Badge bg=\"primary\" className=\"ms-2\">C√¥ng ty ch√≠nh</Badge>\r\n              )}\r\n            </div>\r\n            <div>\r\n              {!company.is_primary && companies.length > 1 && (\r\n                <Button\r\n                  variant=\"outline-success\"\r\n                  size=\"sm\"\r\n                  className=\"me-2\"\r\n                  onClick={() => setPrimaryCompany(index)}\r\n                  title=\"ƒê·∫∑t l√†m c√¥ng ty ch√≠nh\"\r\n                >\r\n                  <i className=\"fas fa-star\"></i>\r\n                </Button>\r\n              )}\r\n              {companies.length > 1 && (\r\n                <Button\r\n                  variant=\"outline-danger\"\r\n                  size=\"sm\"\r\n                  onClick={() => removeCompany(index)}\r\n                  title=\"X√≥a c√¥ng ty\"\r\n                >\r\n                  <i className=\"fas fa-trash\"></i>\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </Card.Header>\r\n          <Card.Body>\r\n            <Row>\r\n              <Col md={6}>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>M√£ s·ªë thu·∫ø *</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    value={company.tax_code}\r\n                    onChange={(e) => updateCompany(index, 'tax_code', e.target.value)}\r\n                    placeholder=\"0123456789 ho·∫∑c 0123456789-001\"\r\n                    isInvalid={validateTaxCode(company.tax_code)}\r\n                  />\r\n                  <Form.Text className=\"text-muted\">\r\n                    10 s·ªë cho tr·ª• s·ªü ch√≠nh, th√™m -001, -002... cho chi nh√°nh\r\n                  </Form.Text>\r\n                  {validateTaxCode(company.tax_code) && (\r\n                    <div className=\"invalid-feedback d-block\">\r\n                      {validateTaxCode(company.tax_code)}\r\n                    </div>\r\n                  )}\r\n                </Form.Group>\r\n              </Col>\r\n              \r\n              <Col md={6}>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>T√™n c√¥ng ty *</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    value={company.company_name}\r\n                    onChange={(e) => updateCompany(index, 'company_name', e.target.value)}\r\n                    placeholder=\"T√™n c√¥ng ty ƒë·∫ßy ƒë·ªß\"\r\n                    isInvalid={!company.company_name.trim()}\r\n                  />\r\n                  {!company.company_name.trim() && (\r\n                    <div className=\"invalid-feedback d-block\">\r\n                      T√™n c√¥ng ty l√† b·∫Øt bu·ªôc\r\n                    </div>\r\n                  )}\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>ƒê·ªãa ch·ªâ xu·∫•t h√≥a ƒë∆°n *</Form.Label>\r\n              <Form.Control\r\n                as=\"textarea\"\r\n                rows={2}\r\n                value={company.invoice_address}\r\n                onChange={(e) => updateCompany(index, 'invoice_address', e.target.value)}\r\n                placeholder=\"ƒê·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß ƒë·ªÉ xu·∫•t h√≥a ƒë∆°n VAT\"\r\n                isInvalid={!company.invoice_address.trim()}\r\n              />\r\n              {!company.invoice_address.trim() && (\r\n                <div className=\"invalid-feedback d-block\">\r\n                  ƒê·ªãa ch·ªâ xu·∫•t h√≥a ƒë∆°n l√† b·∫Øt bu·ªôc\r\n                </div>\r\n              )}\r\n            </Form.Group>\r\n\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>M·ª•c ƒë√≠ch s·ª≠ d·ª•ng kho *</Form.Label>\r\n              <Form.Select\r\n                value={company.warehouse_purpose}\r\n                onChange={(e) => updateCompany(index, 'warehouse_purpose', e.target.value)}\r\n                isInvalid={!company.warehouse_purpose}\r\n              >\r\n                <option value=\"\">-- Ch·ªçn m·ª•c ƒë√≠ch s·ª≠ d·ª•ng --</option>\r\n                {warehousePurposes.map(purpose => (\r\n                  <option key={purpose} value={purpose}>{purpose}</option>\r\n                ))}\r\n              </Form.Select>\r\n              {!company.warehouse_purpose && (\r\n                <div className=\"invalid-feedback d-block\">\r\n                  Vui l√≤ng ch·ªçn m·ª•c ƒë√≠ch s·ª≠ d·ª•ng kho\r\n                </div>\r\n              )}\r\n              <Form.Text className=\"text-muted\">\r\n                Th√¥ng tin n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng trong h·ª£p ƒë·ªìng thu√™ kho\r\n              </Form.Text>\r\n            </Form.Group>\r\n          </Card.Body>\r\n        </Card>\r\n      ))}\r\n\r\n      {companies.length === 0 && (\r\n        <Alert variant=\"warning\">\r\n          <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n          Ch∆∞a c√≥ th√¥ng tin c√¥ng ty n√†o. Vui l√≤ng th√™m √≠t nh·∫•t m·ªôt c√¥ng ty ƒë·ªÉ ti·∫øp t·ª•c.\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CompanyInfoTab;","/**\r\n * Customer Form with Tabs - KHO MVG\r\n * Tab 1: Th√¥ng tin c√° nh√¢n c∆° b·∫£n\r\n * Tab 2: Th√¥ng tin c√¥ng ty \r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Button, Nav, Tab } from 'react-bootstrap';\r\n// import { useAuth } from '../../contexts/AuthContext';\r\nimport PersonalInfoTab from './PersonalInfoTab';\r\nimport CompanyInfoTab from './CompanyInfoTab';\r\n\r\nfunction CustomerFormTabs({ customer = null, onSave, onCancel, isLoading = false }) {\r\n  // const { hasPermission } = useAuth();\r\n  \r\n  const [activeTab, setActiveTab] = useState('personal');\r\n  const [formData, setFormData] = useState({\r\n    // Tab 1: Th√¥ng tin c√° nh√¢n c∆° b·∫£n\r\n    personal: {\r\n      customer_code: '',\r\n      customer_type: 'individual', // 'individual' ho·∫∑c 'company'\r\n      full_name: '', // H·ªç t√™n ƒë·∫ßy ƒë·ªß\r\n      phone: '',\r\n      email: '',\r\n      address: '',\r\n      id_number: '', // CMND/CCCD\r\n      notes: ''\r\n    },\r\n    // Tab 2: Th√¥ng tin c√¥ng ty (m·ªôt c√° nh√¢n c√≥ th·ªÉ c√≥ nhi·ªÅu c√¥ng ty)\r\n    companies: [\r\n      {\r\n        id: null,\r\n        tax_code: '',\r\n        company_name: '',\r\n        invoice_address: '',\r\n        warehouse_purpose: '', // M·ª•c ƒë√≠ch s·ª≠ d·ª•ng kho\r\n        is_primary: true // C√¥ng ty ch√≠nh\r\n      }\r\n    ]\r\n  });\r\n  \r\n  const [errors] = useState({});\r\n  const [touched] = useState({});\r\n\r\n  // Generate customer code based on type\r\n  const generateCustomerCode = () => {\r\n    const prefix = formData.personal.customer_type === 'individual' ? 'CN' : 'DN';\r\n    const timestamp = Date.now().toString();\r\n    const randomNum = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\r\n    const sequence = (timestamp.slice(-2) + randomNum).slice(0, 6);\r\n    const newCode = `${prefix}${sequence}`;\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      personal: {\r\n        ...prev.personal,\r\n        customer_code: newCode\r\n      }\r\n    }));\r\n  };\r\n\r\n  // Helper function to safely format dates\r\n  const formatDateForInput = (dateString) => {\r\n    if (!dateString) return '';\r\n    try {\r\n      // Handle both ISO format and already formatted dates\r\n      if (dateString.includes('T')) {\r\n        return dateString.split('T')[0];\r\n      }\r\n      if (dateString.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n        return dateString; // Already in correct format\r\n      }\r\n      // Try to parse and format\r\n      const date = new Date(dateString);\r\n      if (!isNaN(date.getTime())) {\r\n        return date.toISOString().split('T')[0];\r\n      }\r\n      return '';\r\n    } catch (error) {\r\n      console.warn('Date formatting error:', error, 'for date:', dateString);\r\n      return '';\r\n    }\r\n  };\r\n\r\n  // Load customer data n·∫øu ƒëang edit\r\n  useEffect(() => {\r\n    if (customer) {\r\n      console.log('üîç Loading customer data for edit:', customer);\r\n      \r\n      // Map database customer object to form tabs structure\r\n      setFormData({\r\n        personal: {\r\n          customer_code: customer.customer_code || '',\r\n          customer_type: customer.customer_type || 'individual',\r\n          // Map from database fields - ensure correct mapping\r\n          full_name: customer.representative_name || customer.name || '',\r\n          phone: customer.phone || '',\r\n          email: customer.email || '',\r\n          address: customer.address || '',\r\n          id_number: customer.id_number || '',\r\n          notes: customer.notes || ''\r\n        },\r\n        companies: [\r\n          {\r\n            id: null,\r\n            // Map from database fields - prioritize name for company\r\n            tax_code: customer.tax_code || '',\r\n            company_name: customer.name || '',  // Always use customer.name as company name\r\n            invoice_address: customer.address || '',\r\n            warehouse_purpose: customer.warehouse_purpose || '',\r\n            is_primary: true\r\n          }\r\n        ]\r\n      });\r\n      \r\n      console.log('‚úÖ Form data populated for customer:', customer.customer_code);\r\n    } else {\r\n      console.log('üÜï Creating new customer - using default form structure');\r\n    }\r\n  }, [customer]);\r\n\r\n  return (\r\n    <div>\r\n      <Tab.Container activeKey={activeTab} onSelect={(k) => setActiveTab(k)}>\r\n        {/* Tab Navigation */}\r\n        <Nav variant=\"tabs\" className=\"mb-3\">\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"personal\">\r\n              <i className=\"fas fa-user me-2\"></i>\r\n              Th√¥ng tin c∆° b·∫£n\r\n            </Nav.Link>\r\n          </Nav.Item>\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"company\">\r\n              <i className=\"fas fa-building me-2\"></i>\r\n              Th√¥ng tin c√¥ng ty\r\n            </Nav.Link>\r\n          </Nav.Item>\r\n        </Nav>\r\n\r\n        {/* Tab Content */}\r\n        <Tab.Content>\r\n          {/* Tab 1: Th√¥ng tin c√° nh√¢n c∆° b·∫£n */}\r\n          <Tab.Pane eventKey=\"personal\">\r\n            <PersonalInfoTab \r\n              data={formData.personal}\r\n              errors={errors}\r\n              touched={touched}\r\n              onDataChange={(newData) => setFormData(prev => ({ ...prev, personal: newData }))}\r\n              onGenerateCode={generateCustomerCode}\r\n            />\r\n          </Tab.Pane>\r\n\r\n          {/* Tab 2: Th√¥ng tin c√¥ng ty */}\r\n          <Tab.Pane eventKey=\"company\">\r\n            <CompanyInfoTab \r\n              companies={formData.companies}\r\n              errors={errors}\r\n              touched={touched}\r\n              onCompaniesChange={(companies) => setFormData(prev => ({ ...prev, companies }))}\r\n            />\r\n          </Tab.Pane>\r\n        </Tab.Content>\r\n      </Tab.Container>\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"d-flex justify-content-between mt-4\">\r\n        <Button \r\n          variant=\"outline-secondary\"\r\n          onClick={onCancel}\r\n          disabled={isLoading}\r\n        >\r\n          <i className=\"fas fa-times me-2\"></i>\r\n          H·ªßy b·ªè\r\n        </Button>\r\n        \r\n        <div>\r\n          {activeTab !== 'personal' && (\r\n            <Button \r\n              variant=\"outline-primary\"\r\n              className=\"me-2\"\r\n              onClick={() => setActiveTab('personal')}\r\n            >\r\n              <i className=\"fas fa-arrow-left me-2\"></i>\r\n              Quay l·∫°i\r\n            </Button>\r\n          )}\r\n          <Button \r\n            variant=\"success\"\r\n            onClick={() => {\r\n              try {\r\n                if (typeof onSave !== 'function') {\r\n                  throw new Error('onSave is not a function');\r\n                }\r\n                onSave(formData);\r\n              } catch (error) {\r\n                console.error('‚ùå CustomerFormTabs onClick error:', error);\r\n                alert('Error: ' + error.message);\r\n              }\r\n            }}\r\n            disabled={isLoading}\r\n            size=\"lg\"\r\n          >\r\n            {isLoading ? (\r\n              <>\r\n                <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n                ƒêang l∆∞u...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <i className=\"fas fa-save me-2\"></i>\r\n                {customer ? 'C·∫≠p nh·∫≠t' : 'L∆∞u th√¥ng tin'}\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CustomerFormTabs;"],"names":["API_BASE","process","getAuthHeaders","noCache","arguments","length","undefined","token","localStorage","getItem","console","log","warn","headers","concat","handleResponse","response","data","json","ok","error","status","statusText","errors","forEach","err","path","param","msg","Error","message","getCustomers","queryString","URLSearchParams","toString","url","fetch","method","this","getCustomer","id","createCustomer","customerData","body","JSON","stringify","updateCustomer","deleteCustomer","getCustomerContracts","customerId","createContract","contractData","getExpiringContracts","days","getCustomerStats","_excluded","Container","React","_ref","ref","bsPrefix","fluid","as","Component","className","props","_objectWithoutProperties","prefix","useBootstrapPrefix","suffix","_jsx","_objectSpread","classNames","displayName","Table","striped","bordered","borderless","hover","size","variant","responsive","decoratedBsPrefix","classes","table","responsiveClass","children","navigate","useNavigate","hasPermission","useAuth","showSuccess","showError","useNotification","loading","setLoading","useState","customers","setCustomers","filteredCustomers","setFilteredCustomers","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","editingCustomer","setEditingCustomer","formLoading","setFormLoading","pagination","setPagination","page","limit","total","pages","filters","setFilters","search","customer_type","credit_rating","loadCustomers","useCallback","async","params","Object","keys","key","customerService","useEffect","timeoutId","setTimeout","prev","clearTimeout","handleFilterChange","value","getCreditRatingBadge","rating","ratingInfo","A","label","B","C","D","Badge","bg","formatCurrency","amount","Intl","NumberFormat","style","currency","format","replace","handleSaveCustomer","apiData","formData","personal","companies","primaryCompany","companiesLength","name","company_name","full_name","representative_name","phone","email","address","invoice_address","notes","id_number","warehouse_purpose","tax_code","representative_phone","representative_email","transformFormDataToAPI","totalRevenue","reduce","sum","customer","monthly_revenue","activeCustomers","filter","c","active_contracts","averageRevenue","LoadingSpinner","text","_jsxs","Row","Col","Button","onClick","handleCreateCustomer","md","Card","Body","Form","Group","Label","Control","type","placeholder","onChange","e","target","Select","Header","map","contact_person","customer_code","total_contracts","handleViewCustomer","fullCustomerData","customerWithContracts","contracts","statistics","handleEditCustomer","title","window","confirm","handleDeleteCustomer","colSpan","Math","round","Modal","show","onHide","scrollable","closeButton","Title","maxHeight","overflowY","padding","CustomerFormTabs","onSave","onCancel","isLoading","touched","onDataChange","onGenerateCode","handleInputChange","newData","Text","InputGroup","isInvalid","rows","Alert","onCompaniesChange","updateCompany","index","field","newCompanies","validateTaxCode","taxCode","trim","test","warehousePurposes","addCompany","newCompany","is_primary","company","i","setPrimaryCompany","alert","_","removeCompany","purpose","activeTab","setActiveTab","setFormData","Tab","activeKey","onSelect","k","Nav","Item","Link","eventKey","Content","Pane","PersonalInfoTab","generateCustomerCode","timestamp","Date","now","randomNum","floor","random","padStart","sequence","slice","newCode","CompanyInfoTab","disabled","_Fragment"],"ignoreList":[],"sourceRoot":""}
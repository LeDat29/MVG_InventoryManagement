"use strict";(self.webpackChunkkho_mvg_client=self.webpackChunkkho_mvg_client||[]).push([[579],{706:(e,s,n)=>{n.d(s,{A:()=>m});var a=n(9379),t=n(45),i=n(5043),l=n(8139),c=n.n(l),r=n(7852),d=n(579);const o=["className","bsPrefix","as"],h=i.forwardRef((e,s)=>{let{className:n,bsPrefix:i,as:l="div"}=e,h=(0,t.A)(e,o);return i=(0,r.oU)(i,"tab-content"),(0,d.jsx)(l,(0,a.A)({ref:s,className:c()(n,i)},h))});h.displayName="TabContent";const m=h},1392:(e,s,n)=>{n.d(s,{A:()=>o});var a=n(5043),t=n(9942),i=n(579);const l=["drawing","geometry"],c={width:"100%",height:"600px"},r={lat:10.762622,lng:106.660172},d={disableDefaultUI:!1,zoomControl:!0,streetViewControl:!0,mapTypeControl:!0,fullscreenControl:!0,clickableIcons:!1,mapTypeId:"satellite",tilt:0};const o=function(e){let{center:s,zoom:n=16,onMapLoad:o,onMapClick:h}=e;const m="AIzaSyCyoFgxYpYDlP-rRapfN5tfcKxOTz8fgU8",{isLoaded:x,loadError:j}=(0,t.KD)({googleMapsApiKey:m,libraries:l});a.useEffect(()=>{0},[m]);const[,u]=a.useState(null),g=a.useRef(null),p=a.useCallback(e=>{u(e),g.current=e,o&&o(e)},[o]),v=a.useCallback(()=>{u(null),g.current=null},[]);a.useEffect(()=>{g.current&&s&&(g.current.panTo(s),g.current.setZoom(n))},[s,n]);const f=a.useCallback(e=>{h&&h(e.latLng.lat(),e.latLng.lng())},[h]);return j?(0,i.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"red"},children:[(0,i.jsx)("h4",{children:"\u274c L\u1ed7i t\u1ea3i Google Maps"}),(0,i.jsx)("p",{children:j.message}),(0,i.jsx)("p",{children:"Vui l\xf2ng ki\u1ec3m tra:"}),(0,i.jsxs)("ul",{style:{textAlign:"left",display:"inline-block"},children:[(0,i.jsx)("li",{children:"REACT_APP_GOOGLE_MAPS_API_KEY trong file .env"}),(0,i.jsx)("li",{children:"API key \u0111\xe3 \u0111\u01b0\u1ee3c enable Maps JavaScript API"}),(0,i.jsx)("li",{children:"Billing \u0111\xe3 \u0111\u01b0\u1ee3c setup (n\u1ebfu c\u1ea7n)"})]})]}):x?(0,i.jsx)(t.u6,{mapContainerStyle:c,center:s||r,zoom:n,onLoad:p,onUnmount:v,onClick:f,options:d,children:(0,i.jsx)(t.X0,{position:s||r})}):(0,i.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,i.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,i.jsx)("span",{className:"visually-hidden",children:"\u0110ang t\u1ea3i b\u1ea3n \u0111\u1ed3..."})}),(0,i.jsx)("p",{className:"mt-2",children:"\u0110ang t\u1ea3i Google Maps..."})]})}},3519:(e,s,n)=>{n.d(s,{A:()=>m});var a=n(9379),t=n(45),i=n(8139),l=n.n(i),c=n(5043),r=n(7852),d=n(579);const o=["bsPrefix","fluid","as","className"],h=c.forwardRef((e,s)=>{let{bsPrefix:n,fluid:i=!1,as:c="div",className:h}=e,m=(0,t.A)(e,o);const x=(0,r.oU)(n,"container"),j="string"===typeof i?"-".concat(i):"-fluid";return(0,d.jsx)(c,(0,a.A)((0,a.A)({ref:s},m),{},{className:l()(h,i?"".concat(x).concat(j):x)}))});h.displayName="Container";const m=h},3579:(e,s,n)=>{n.r(s),n.d(s,{default:()=>G});var a=n(9379),t=n(5043),i=n(4063),l=n(3519),c=n(1719),r=n(4282),d=n(1072),o=n(8602),h=n(8628),m=n(5328),x=n(326),j=n(4196),u=n(2557),g=n(3722),p=n(3216),v=n(5016),f=n(6471),b=n(9722),N=n(2550),y=n(9942),A=n(1392),_=n(579);const k={available:{fillColor:"#dc3545",strokeColor:"#721c24",label:"C\xf2n tr\u1ed1ng"},rented:{fillColor:"#28a745",strokeColor:"#155724",label:"\u0110\xe3 thu\xea"},deposited:{fillColor:"#fd7e14",strokeColor:"#dc3545",label:"\u0110\xe3 c\u1ecdc"},fixed_service:{fillColor:"#ffffff",strokeColor:"#6c757d",label:"D\u1ecbch v\u1ee5 c\u1ed1 \u0111\u1ecbnh"},maintenance:{fillColor:"#ffc107",strokeColor:"#856404",label:"B\u1ea3o tr\xec"}};const w=function(e){let{zone:s,onClick:n,isSelected:a}=e;const[i,l]=t.useState(!1),[c,r]=t.useState(null),d=t.useMemo(()=>{if(!s.coordinates)return[];try{const e="string"===typeof s.coordinates?JSON.parse(s.coordinates):s.coordinates;return Array.isArray(e)?e.map(e=>({lat:parseFloat(e.lat||e.latitude),lng:parseFloat(e.lng||e.longitude)})):[]}catch(e){return console.error("Error parsing coordinates:",e),[]}},[s.coordinates]),o=t.useCallback(()=>{if(0===d.length)return null;return{lat:d.reduce((e,s)=>e+s.lat,0)/d.length,lng:d.reduce((e,s)=>e+s.lng,0)/d.length}},[d]),h=k[s.status]||k.available,m={fillColor:h.fillColor,fillOpacity:a?.6:.4,strokeColor:a?"#000000":h.strokeColor,strokeOpacity:a?1:.8,strokeWeight:a?3:2,clickable:!0,draggable:!1,editable:!1,geodesic:!1,zIndex:a?100:1};return 0===d.length?null:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.tS,{paths:d,options:m,onClick:()=>{const e=o();e&&(r(e),l(!0)),n&&n(s)},onMouseOver:()=>{if(!a){l(!0);const e=o();e&&r(e)}},onMouseOut:()=>{a||l(!1)}}),i&&c&&(0,_.jsx)(y.Fu,{position:c,onCloseClick:()=>l(!1),children:(0,_.jsxs)("div",{style:{maxWidth:"250px"},children:[(0,_.jsxs)("h6",{className:"mb-2",children:[(0,_.jsx)("strong",{children:s.zone_code}),s.zone_name&&" - ".concat(s.zone_name)]}),(0,_.jsx)("div",{className:"mb-2",children:(0,_.jsx)("span",{className:"badge",style:{backgroundColor:h.fillColor,color:"fixed_service"===s.status?"#000":"#fff"},children:h.label})}),(0,_.jsxs)("div",{style:{fontSize:"13px"},children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("strong",{children:"Di\u1ec7n t\xedch:"})," ",s.area," m\xb2"]}),s.zone_type&&(0,_.jsxs)("div",{children:[(0,_.jsx)("strong",{children:"Lo\u1ea1i:"})," ","rental"===s.zone_type?"Cho thu\xea":"fixed_service"===s.zone_type?"D\u1ecbch v\u1ee5 c\u1ed1 \u0111\u1ecbnh":"Khu v\u1ef1c chung"]}),s.rental_price&&"fixed_service"!==s.status&&(0,_.jsxs)("div",{children:[(0,_.jsx)("strong",{children:"Gi\xe1 thu\xea:"})," ",s.rental_price.toLocaleString("vi-VN")," VN\u0110/m\xb2"]}),s.customer_info&&"rented"===s.status&&(0,_.jsxs)("div",{className:"mt-2 pt-2",style:{borderTop:"1px solid #ddd"},children:[(0,_.jsx)("strong",{children:"Kh\xe1ch thu\xea:"}),(0,_.jsx)("div",{children:s.customer_info.name}),s.customer_info.phone&&(0,_.jsxs)("div",{children:["\ud83d\udcde ",s.customer_info.phone]}),s.customer_info.contract_end&&(0,_.jsx)("div",{children:(0,_.jsxs)("small",{children:["H\u1ebft h\u1ea1n: ",new Date(s.customer_info.contract_end).toLocaleDateString("vi-VN")]})})]}),s.facilities&&Object.keys(s.facilities).length>0&&(0,_.jsxs)("div",{className:"mt-2",children:[(0,_.jsx)("strong",{children:"Ti\u1ec7n \xedch:"}),(0,_.jsx)("div",{style:{fontSize:"12px"},children:Object.entries(s.facilities).map(e=>{let[s,n]=e;return n&&(0,_.jsx)("span",{className:"badge bg-secondary me-1",children:s},s)})})]})]}),n&&(0,_.jsx)("button",{className:"btn btn-sm btn-primary mt-2 w-100",onClick:()=>n(s),children:"Xem chi ti\u1ebft"})]})})]})},C=[{status:"rented",color:"#28a745",label:"\u0110\xe3 cho thu\xea",icon:"\u25a0"},{status:"available",color:"#dc3545",label:"C\xf2n tr\u1ed1ng",icon:"\u25a0"},{status:"deposited",color:"#fd7e14",label:"\u0110\xe3 nh\u1eadn c\u1ecdc",icon:"\u25a0"},{status:"fixed_service",color:"#ffffff",label:"D\u1ecbch v\u1ee5 c\u1ed1 \u0111\u1ecbnh",icon:"\u25a1",textColor:"#000"}];const T=function(e){let{stats:s}=e;return(0,_.jsxs)("div",{className:"map-legend",children:[(0,_.jsx)("div",{className:"legend-header",children:(0,_.jsx)("strong",{children:"Ch\xfa th\xedch"})}),(0,_.jsx)("div",{className:"legend-items",children:C.map(e=>(0,_.jsxs)("div",{className:"legend-item",children:[(0,_.jsx)("span",{className:"legend-color",style:{color:e.color,textShadow:"fixed_service"===e.status?"0 0 2px #000":"none"},children:e.icon}),(0,_.jsx)("span",{className:"legend-label",children:e.label}),s&&(0,_.jsxs)("span",{className:"legend-count",children:["(",s[e.status]||0,")"]})]},e.status))}),(0,_.jsx)("div",{className:"legend-footer",children:(0,_.jsxs)("small",{className:"text-muted",children:[(0,_.jsx)("i",{className:"bi bi-info-circle"})," Click v\xe0o zone \u0111\u1ec3 xem chi ti\u1ebft"]})})]})};const E=function(e){var s,n;let{project:a,zones:i,onZoneClick:l,showLegend:c=!0}=e;const[r,d]=(0,t.useState)(null),[o,h]=(0,t.useState)(null),[m,x]=(0,t.useState)(i||[]),[j,u]=(0,t.useState)("all");(0,t.useEffect)(()=>{null!==a&&void 0!==a&&a.latitude&&null!==a&&void 0!==a&&a.longitude&&h({lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)})},[a]),(0,t.useEffect)(()=>{x("all"===j?i||[]:(i||[]).filter(e=>e.status===j))},[i,j]);const g=e=>{d(e),l&&l(e)},p=t.useMemo(()=>{if(!i||0===i.length)return null;const e=i.reduce((e,s)=>e+(parseFloat(s.area)||0),0),s=i.filter(e=>"available"===e.status),n=i.filter(e=>"rented"===e.status),a=i.filter(e=>"deposited"===e.status),t=i.filter(e=>"fixed_service"===e.status),l=s.reduce((e,s)=>e+(parseFloat(s.area)||0),0),c=n.reduce((e,s)=>e+(parseFloat(s.area)||0),0);return{total:i.length,totalArea:e,available:s.length,rented:n.length,deposited:a.length,fixedService:t.length,availableArea:l,rentedArea:c,occupancyRate:e>0?(c/e*100).toFixed(1):0}},[i]);return o?(0,_.jsxs)("div",{className:"project-map-view",children:[(0,_.jsx)("div",{className:"map-header mb-3",children:(0,_.jsxs)("div",{className:"row align-items-center",children:[(0,_.jsxs)("div",{className:"col-md-6",children:[(0,_.jsxs)("h5",{className:"mb-0",children:[(0,_.jsx)("i",{className:"bi bi-map"})," B\u1ea3n \u0111\u1ed3 d\u1ef1 \xe1n"]}),(null===a||void 0===a?void 0:a.address)&&(0,_.jsxs)("small",{className:"text-muted",children:["\ud83d\udccd ",a.address]})]}),(0,_.jsx)("div",{className:"col-md-6 text-end",children:(0,_.jsxs)("select",{className:"form-select form-select-sm d-inline-block w-auto",value:j,onChange:e=>u(e.target.value),children:[(0,_.jsxs)("option",{value:"all",children:["T\u1ea5t c\u1ea3 zones (",(null===i||void 0===i?void 0:i.length)||0,")"]}),(0,_.jsxs)("option",{value:"available",children:["C\xf2n tr\u1ed1ng (",(null===p||void 0===p?void 0:p.available)||0,")"]}),(0,_.jsxs)("option",{value:"rented",children:["\u0110\xe3 thu\xea (",(null===p||void 0===p?void 0:p.rented)||0,")"]}),(0,_.jsxs)("option",{value:"deposited",children:["\u0110\xe3 c\u1ecdc (",(null===p||void 0===p?void 0:p.deposited)||0,")"]}),(0,_.jsxs)("option",{value:"fixed_service",children:["D\u1ecbch v\u1ee5 c\u1ed1 \u0111\u1ecbnh (",(null===p||void 0===p?void 0:p.fixedService)||0,")"]})]})})]})}),p&&(0,_.jsx)("div",{className:"map-stats mb-3",children:(0,_.jsxs)("div",{className:"row g-2",children:[(0,_.jsx)("div",{className:"col-md-3",children:(0,_.jsxs)("div",{className:"stat-card",children:[(0,_.jsx)("div",{className:"stat-label",children:"T\u1ed5ng zones"}),(0,_.jsx)("div",{className:"stat-value",children:p.total})]})}),(0,_.jsx)("div",{className:"col-md-3",children:(0,_.jsxs)("div",{className:"stat-card",children:[(0,_.jsx)("div",{className:"stat-label",children:"T\u1ed5ng di\u1ec7n t\xedch"}),(0,_.jsxs)("div",{className:"stat-value",children:[p.totalArea.toLocaleString("vi-VN")," m\xb2"]})]})}),(0,_.jsx)("div",{className:"col-md-3",children:(0,_.jsxs)("div",{className:"stat-card",children:[(0,_.jsx)("div",{className:"stat-label",children:"\u0110\xe3 cho thu\xea"}),(0,_.jsxs)("div",{className:"stat-value text-success",children:[p.rentedArea.toLocaleString("vi-VN")," m\xb2"]})]})}),(0,_.jsx)("div",{className:"col-md-3",children:(0,_.jsxs)("div",{className:"stat-card",children:[(0,_.jsx)("div",{className:"stat-label",children:"T\u1ef7 l\u1ec7 l\u1ea5p \u0111\u1ea7y"}),(0,_.jsxs)("div",{className:"stat-value text-primary",children:[p.occupancyRate,"%"]})]})})]})}),(0,_.jsxs)("div",{className:"map-container-wrapper",children:[(0,_.jsxs)(A.A,{center:o,zoom:(null===a||void 0===a?void 0:a.map_zoom)||18,children:[(0,_.jsx)(y.pH,{position:o,title:null===a||void 0===a?void 0:a.name,icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",scaledSize:null!==(s=window.google)&&void 0!==s&&null!==(n=s.maps)&&void 0!==n&&n.Size?new window.google.maps.Size(40,40):void 0}}),m.map(e=>(0,_.jsx)(w,{zone:e,onClick:g,isSelected:(null===r||void 0===r?void 0:r.id)===e.id},e.id))]}),c&&(0,_.jsx)("div",{className:"map-legend-overlay",children:(0,_.jsx)(T,{stats:p})})]}),r&&(0,_.jsx)("div",{className:"selected-zone-info mt-3",children:(0,_.jsx)("div",{className:"card",children:(0,_.jsxs)("div",{className:"card-body",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("h6",{className:"card-title mb-1",children:[r.zone_code,r.zone_name&&" - ".concat(r.zone_name)]}),(0,_.jsx)("p",{className:"text-muted mb-2",children:(0,_.jsxs)("small",{children:["Zone ID: #",r.id]})})]}),(0,_.jsx)("button",{className:"btn-close",onClick:()=>d(null),"aria-label":"Close"})]}),(0,_.jsxs)("div",{className:"row g-3",children:[(0,_.jsxs)("div",{className:"col-md-4",children:[(0,_.jsx)("strong",{children:"Tr\u1ea1ng th\xe1i:"}),(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:"badge bg-".concat("rented"===r.status?"success":"deposited"===r.status?"warning":"available"===r.status?"danger":"secondary"),children:"rented"===r.status?"\u0110\xe3 thu\xea":"deposited"===r.status?"\u0110\xe3 c\u1ecdc":"available"===r.status?"C\xf2n tr\u1ed1ng":"D\u1ecbch v\u1ee5 c\u1ed1 \u0111\u1ecbnh"})})]}),(0,_.jsxs)("div",{className:"col-md-4",children:[(0,_.jsx)("strong",{children:"Di\u1ec7n t\xedch:"}),(0,_.jsxs)("div",{children:[r.area," m\xb2"]})]}),r.rental_price&&(0,_.jsxs)("div",{className:"col-md-4",children:[(0,_.jsx)("strong",{children:"Gi\xe1 thu\xea:"}),(0,_.jsxs)("div",{children:[r.rental_price.toLocaleString("vi-VN")," VN\u0110/m\xb2"]})]})]}),r.customer_info&&(0,_.jsxs)("div",{className:"mt-3 pt-3 border-top",children:[(0,_.jsx)("strong",{children:"Th\xf4ng tin kh\xe1ch thu\xea:"}),(0,_.jsxs)("div",{className:"mt-2",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("strong",{children:"T\xean:"})," ",r.customer_info.name]}),r.customer_info.phone&&(0,_.jsxs)("div",{children:[(0,_.jsx)("strong",{children:"S\u0110T:"})," ",r.customer_info.phone]}),r.customer_info.email&&(0,_.jsxs)("div",{children:[(0,_.jsx)("strong",{children:"Email:"})," ",r.customer_info.email]})]})]})]})})})]}):(0,_.jsxs)("div",{className:"alert alert-warning",children:[(0,_.jsx)("strong",{children:"\u26a0\ufe0f Ch\u01b0a c\xf3 t\u1ecda \u0111\u1ed9"}),(0,_.jsx)("p",{className:"mb-0",children:"Vui l\xf2ng c\u1eadp nh\u1eadt t\u1ecda \u0111\u1ed9 (latitude, longitude) cho d\u1ef1 \xe1n \u0111\u1ec3 hi\u1ec3n th\u1ecb b\u1ea3n \u0111\u1ed3."})]})},S=[{value:"fire_safety",label:"\ud83d\udd25 Ph\xf2ng ch\xe1y ch\u1eefa ch\xe1y"},{value:"security",label:"\ud83d\udd12 An ninh"},{value:"maintenance",label:"\ud83d\udd27 B\u1ea3o tr\xec"},{value:"inspection",label:"\ud83d\udd0d Ki\u1ec3m tra"},{value:"cleaning",label:"\ud83e\uddf9 V\u1ec7 sinh"},{value:"equipment_check",label:"\u2699\ufe0f Ki\u1ec3m tra thi\u1ebft b\u1ecb"},{value:"other",label:"\ud83d\udccb Kh\xe1c"}],z=[{value:"daily",label:"H\xe0ng ng\xe0y"},{value:"weekly",label:"H\xe0ng tu\u1ea7n"},{value:"biweekly",label:"2 tu\u1ea7n/l\u1ea7n"},{value:"monthly",label:"H\xe0ng th\xe1ng"},{value:"quarterly",label:"H\xe0ng qu\xfd"},{value:"semiannual",label:"6 th\xe1ng/l\u1ea7n"},{value:"yearly",label:"H\xe0ng n\u0103m"},{value:"one_time",label:"M\u1ed9t l\u1ea7n"}],D=[{value:"low",label:"Th\u1ea5p"},{value:"medium",label:"Trung b\xecnh"},{value:"high",label:"Cao"},{value:"critical",label:"Kh\u1ea9n c\u1ea5p"}];const K=function(e){let{show:s,onHide:n,projectId:i,task:l,onSave:h}=e;const[m,x]=(0,t.useState)({title:"",description:"",task_type:"maintenance",frequency:"monthly",start_date:(new Date).toISOString().split("T")[0],due_date:"",assigned_to:"",priority:"medium",is_recurring:!1,notify_before_days:3}),[j,p]=(0,t.useState)([]),[v,f]=(0,t.useState)(!1),[b,N]=(0,t.useState)("");(0,t.useEffect)(()=>{s&&(y(),x(l?{title:l.title||"",description:l.description||"",task_type:l.task_type||"maintenance",frequency:l.frequency||"monthly",start_date:l.start_date?l.start_date.split("T")[0]:(new Date).toISOString().split("T")[0],due_date:l.due_date?l.due_date.split("T")[0]:"",assigned_to:l.assigned_to||"",priority:l.priority||"medium",is_recurring:l.is_recurring||!1,notify_before_days:l.notify_before_days||3}:{title:"",description:"",task_type:"maintenance",frequency:"monthly",start_date:(new Date).toISOString().split("T")[0],due_date:"",assigned_to:"",priority:"medium",is_recurring:!1,notify_before_days:3}))},[s,l]);const y=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/users?limit=100",{headers:{Authorization:"Bearer ".concat(e)}}),n=await s.json();n.success&&p(n.data.users||[])}catch(b){console.error("Error loading users:",b)}},A=(e,s)=>{x(n=>(0,a.A)((0,a.A)({},n),{},{[e]:s}))};return(0,_.jsx)(u.A,{show:s,onHide:n,size:"lg",backdrop:"static",children:(0,_.jsxs)(g.A,{onSubmit:async e=>{e.preventDefault(),f(!0),N("");try{const e=localStorage.getItem("token"),s=l?"/api/projects/".concat(i,"/tasks/").concat(l.id):"/api/projects/".concat(i,"/tasks"),n=l?"PUT":"POST",a=await fetch(s,{method:n,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(m)}),t=await a.json();t.success?h():N(t.message||"C\xf3 l\u1ed7i x\u1ea3y ra")}catch(b){console.error("Error saving task:",b),N("Kh\xf4ng th\u1ec3 l\u01b0u c\xf4ng vi\u1ec7c. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{f(!1)}},children:[(0,_.jsx)(u.A.Header,{closeButton:!0,children:(0,_.jsx)(u.A.Title,{children:l?"\u270f\ufe0f S\u1eeda c\xf4ng vi\u1ec7c":"\u2795 Th\xeam c\xf4ng vi\u1ec7c m\u1edbi"})}),(0,_.jsxs)(u.A.Body,{children:[b&&(0,_.jsx)(c.A,{variant:"danger",dismissible:!0,onClose:()=>N(""),children:b}),(0,_.jsx)(d.A,{children:(0,_.jsx)(o.A,{md:12,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsxs)(g.A.Label,{children:["Ti\xeau \u0111\u1ec1 ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(g.A.Control,{type:"text",placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 c\xf4ng vi\u1ec7c",value:m.title,onChange:e=>A("title",e.target.value),required:!0})]})})}),(0,_.jsx)(d.A,{children:(0,_.jsx)(o.A,{md:12,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"M\xf4 t\u1ea3"}),(0,_.jsx)(g.A.Control,{as:"textarea",rows:3,placeholder:"Nh\u1eadp m\xf4 t\u1ea3 chi ti\u1ebft c\xf4ng vi\u1ec7c",value:m.description,onChange:e=>A("description",e.target.value)})]})})}),(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsxs)(g.A.Label,{children:["Lo\u1ea1i c\xf4ng vi\u1ec7c ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(g.A.Select,{value:m.task_type,onChange:e=>A("task_type",e.target.value),required:!0,children:S.map(e=>(0,_.jsx)("option",{value:e.value,children:e.label},e.value))})]})}),(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsxs)(g.A.Label,{children:["\u01afu ti\xean ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(g.A.Select,{value:m.priority,onChange:e=>A("priority",e.target.value),required:!0,children:D.map(e=>(0,_.jsx)("option",{value:e.value,children:e.label},e.value))})]})})]}),(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsxs)(g.A.Label,{children:["Ng\xe0y b\u1eaft \u0111\u1ea7u ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(g.A.Control,{type:"date",value:m.start_date,onChange:e=>A("start_date",e.target.value),required:!0})]})}),(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsxs)(g.A.Label,{children:["H\u1ea1n ch\xf3t ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(g.A.Control,{type:"date",value:m.due_date,onChange:e=>A("due_date",e.target.value),min:m.start_date,required:!0})]})})]}),(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsxs)(g.A.Label,{children:["T\u1ea7n su\u1ea5t ",(0,_.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_.jsx)(g.A.Select,{value:m.frequency,onChange:e=>A("frequency",e.target.value),required:!0,children:z.map(e=>(0,_.jsx)("option",{value:e.value,children:e.label},e.value))})]})}),(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n"}),(0,_.jsxs)(g.A.Select,{value:m.assigned_to,onChange:e=>A("assigned_to",e.target.value),children:[(0,_.jsx)("option",{value:"",children:"-- Ch\u01b0a g\xe1n --"}),j.map(e=>(0,_.jsxs)("option",{value:e.id,children:[e.full_name," (",e.role,")"]},e.id))]})]})})]}),(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{md:6,children:(0,_.jsx)(g.A.Group,{className:"mb-3",children:(0,_.jsx)(g.A.Check,{type:"checkbox",label:"C\xf4ng vi\u1ec7c l\u1eb7p l\u1ea1i",checked:m.is_recurring,onChange:e=>A("is_recurring",e.target.checked)})})}),(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"Nh\u1eafc tr\u01b0\u1edbc (ng\xe0y)"}),(0,_.jsx)(g.A.Control,{type:"number",min:"0",max:"30",value:m.notify_before_days,onChange:e=>A("notify_before_days",parseInt(e.target.value))}),(0,_.jsx)(g.A.Text,{className:"text-muted",children:"G\u1eedi th\xf4ng b\xe1o tr\u01b0\u1edbc h\u1ea1n ch\xf3t bao nhi\xeau ng\xe0y"})]})})]}),"one_time"!==m.frequency&&(0,_.jsxs)(c.A,{variant:"info",children:[(0,_.jsx)("i",{className:"fas fa-info-circle me-2"}),(0,_.jsx)("strong",{children:"L\u01b0u \xfd:"}),' C\xf4ng vi\u1ec7c n\xe0y s\u1ebd t\u1ef1 \u0111\u1ed9ng t\u1ea1o l\u1ecbch k\u1ebf ti\u1ebfp sau khi ho\xe0n th\xe0nh (n\u1ebfu ch\u1ecdn "C\xf4ng vi\u1ec7c l\u1eb7p l\u1ea1i").']})]}),(0,_.jsxs)(u.A.Footer,{children:[(0,_.jsx)(r.A,{variant:"secondary",onClick:n,disabled:v,children:"H\u1ee7y"}),(0,_.jsx)(r.A,{variant:"primary",type:"submit",disabled:v,children:v?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"\u0110ang l\u01b0u..."]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("i",{className:"fas fa-save me-2"}),l?"C\u1eadp nh\u1eadt":"T\u1ea1o m\u1edbi"]})})]})]})})},L={fire_safety:{icon:"\ud83d\udd25",color:"danger"},security:{icon:"\ud83d\udd12",color:"warning"},maintenance:{icon:"\ud83d\udd27",color:"info"},inspection:{icon:"\ud83d\udd0d",color:"primary"},cleaning:{icon:"\ud83e\uddf9",color:"success"},equipment_check:{icon:"\u2699\ufe0f",color:"secondary"},other:{icon:"\ud83d\udccb",color:"dark"}};const B=function(e){let{tasks:s,onTaskClick:n}=e;const[a,l]=(0,t.useState)(new Date),c=e=>{const n=e.toISOString().split("T")[0];return s.filter(e=>new Date(e.due_date).toISOString().split("T")[0]===n)},{daysInMonth:r,startingDayOfWeek:d,year:o,month:m}=(e=>{const s=e.getFullYear(),n=e.getMonth(),a=new Date(s,n,1);return{daysInMonth:new Date(s,n+1,0).getDate(),startingDayOfWeek:a.getDay(),year:s,month:n}})(a),x=new Date,j=e=>x.getDate()===e&&x.getMonth()===m&&x.getFullYear()===o,u=[],g=7*Math.ceil((r+d)/7);for(let t=0;t<g;t++){const e=t-d+1;if(e>0&&e<=r){const s=new Date(o,m,e),n=c(s);u.push({day:e,date:s,tasks:n,isToday:j(e),isCurrentMonth:!0})}else u.push({day:null,date:null,tasks:[],isToday:!1,isCurrentMonth:!1})}return(0,_.jsxs)("div",{className:"task-calendar",children:[(0,_.jsxs)("div",{className:"calendar-header d-flex justify-content-between align-items-center mb-3",children:[(0,_.jsxs)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{l(new Date(o,m-1,1))},children:[(0,_.jsx)("i",{className:"fas fa-chevron-left"})," Th\xe1ng tr\u01b0\u1edbc"]}),(0,_.jsxs)("h5",{className:"mb-0",children:[["Th\xe1ng 1","Th\xe1ng 2","Th\xe1ng 3","Th\xe1ng 4","Th\xe1ng 5","Th\xe1ng 6","Th\xe1ng 7","Th\xe1ng 8","Th\xe1ng 9","Th\xe1ng 10","Th\xe1ng 11","Th\xe1ng 12"][m]," ",o]}),(0,_.jsxs)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{l(new Date(o,m+1,1))},children:["Th\xe1ng sau ",(0,_.jsx)("i",{className:"fas fa-chevron-right"})]})]}),(0,_.jsxs)("div",{className:"calendar-grid",children:[["CN","T2","T3","T4","T5","T6","T7"].map(e=>(0,_.jsx)("div",{className:"calendar-day-header",children:e},e)),u.map((e,s)=>(0,_.jsx)("div",{className:"calendar-day ".concat(e.isCurrentMonth?"":"other-month"," ").concat(e.isToday?"today":""),children:e.day&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"day-number",children:e.day}),(0,_.jsxs)("div",{className:"day-tasks",children:[e.tasks.slice(0,3).map(e=>{const s=L[e.task_type]||L.other;return(0,_.jsxs)("div",{className:"task-item task-".concat(e.status),onClick:()=>n&&n(e.id),title:e.title,children:[(0,_.jsx)("span",{className:"task-icon",children:s.icon}),(0,_.jsx)("span",{className:"task-title",children:e.title})]},e.id)}),e.tasks.length>3&&(0,_.jsxs)("div",{className:"more-tasks",children:["+",e.tasks.length-3," kh\xe1c"]})]})]})},s))]}),(0,_.jsx)(h.A,{className:"mt-3",children:(0,_.jsxs)(h.A.Body,{children:[(0,_.jsx)("h6",{className:"mb-2",children:"Ch\xfa th\xedch:"}),(0,_.jsxs)("div",{className:"d-flex flex-wrap gap-2",children:[(0,_.jsx)(i.A,{bg:"secondary",children:"\u26aa Ch\u1edd x\u1eed l\xfd"}),(0,_.jsx)(i.A,{bg:"primary",children:"\ud83d\udd35 \u0110ang l\xe0m"}),(0,_.jsx)(i.A,{bg:"success",children:"\u2705 Ho\xe0n th\xe0nh"}),(0,_.jsx)(i.A,{bg:"danger",children:"\ud83d\udd34 Qu\xe1 h\u1ea1n"})]})]})})]})},O={fire_safety:{label:"Ph\xf2ng ch\xe1y",icon:"\ud83d\udd25",color:"danger"},security:{label:"An ninh",icon:"\ud83d\udd12",color:"warning"},maintenance:{label:"B\u1ea3o tr\xec",icon:"\ud83d\udd27",color:"info"},inspection:{label:"Ki\u1ec3m tra",icon:"\ud83d\udd0d",color:"primary"},cleaning:{label:"V\u1ec7 sinh",icon:"\ud83e\uddf9",color:"success"},equipment_check:{label:"Thi\u1ebft b\u1ecb",icon:"\u2699\ufe0f",color:"secondary"},other:{label:"Kh\xe1c",icon:"\ud83d\udccb",color:"dark"}},I={pending:{label:"Ch\u1edd x\u1eed l\xfd",variant:"secondary"},in_progress:{label:"\u0110ang l\xe0m",variant:"primary"},completed:{label:"Ho\xe0n th\xe0nh",variant:"success"},overdue:{label:"Qu\xe1 h\u1ea1n",variant:"danger"},cancelled:{label:"\u0110\xe3 h\u1ee7y",variant:"dark"}},P={low:{label:"Th\u1ea5p",variant:"secondary"},medium:{label:"Trung b\xecnh",variant:"info"},high:{label:"Cao",variant:"warning"},critical:{label:"Kh\u1ea9n c\u1ea5p",variant:"danger"}};const H=function(e){var s,n,l,c;let{projectId:p,projectName:v}=e;const[f,b]=(0,t.useState)([]),[N,y]=(0,t.useState)(!0),[A,k]=(0,t.useState)(!1),[w,C]=(0,t.useState)(null),[T,E]=(0,t.useState)(null),[S,z]=(0,t.useState)(!1),[D,L]=(0,t.useState)("list"),[H,G]=(0,t.useState)({status:"",task_type:"",assigned_to:""}),[M,F]=(0,t.useState)({total:0,pending:0,in_progress:0,completed:0,overdue:0});(0,t.useEffect)(()=>{p&&V()},[p,H]);const V=async()=>{y(!0);try{const e=localStorage.getItem("token"),s=new URLSearchParams(H),n=await fetch("/api/projects/".concat(p,"/tasks?").concat(s),{headers:{Authorization:"Bearer ".concat(e)}});if(!n)return console.error("Error loading tasks: Response is null"),void alert("Could not retrieve tasks. The server response was empty.");const a=n.headers.get("content-type");if(!a||!a.includes("application/json")){console.error("Error loading tasks: Invalid content type");const e=await n.text();return console.error("Response:",e),void alert("Could not retrieve tasks. The server sent an invalid response.")}const t=await n.json();t.success&&(b(t.data.tasks||[]),R(t.data.tasks||[]))}catch(e){console.error("Error loading tasks:",e)}finally{y(!1)}},R=e=>{const s={total:e.length,pending:e.filter(e=>"pending"===e.status).length,in_progress:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,overdue:e.filter(e=>"overdue"===e.status).length};F(s)},q=async e=>{try{const s=localStorage.getItem("token"),n=await fetch("/api/projects/".concat(p,"/tasks/").concat(e),{headers:{Authorization:"Bearer ".concat(s)}}),a=await n.json();a.success&&(E(a.data),z(!0))}catch(s){console.error("Error loading task detail:",s)}},X=e=>e?new Date(e).toLocaleDateString("vi-VN"):"N/A",U=e=>O[e]||O.other;return(0,_.jsxs)("div",{className:"task-manager",children:[(0,_.jsx)("div",{className:"task-header mb-4",children:(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("h4",{className:"mb-1",children:"\ud83d\udccb Qu\u1ea3n l\xfd c\xf4ng vi\u1ec7c"}),(0,_.jsx)("p",{className:"text-muted mb-0",children:v})]}),(0,_.jsxs)(r.A,{variant:"primary",onClick:()=>{C(null),k(!0)},children:[(0,_.jsx)("i",{className:"fas fa-plus me-2"}),"Th\xeam c\xf4ng vi\u1ec7c"]})]})}),(0,_.jsxs)(d.A,{className:"mb-4",children:[(0,_.jsx)(o.A,{md:2,children:(0,_.jsx)(h.A,{className:"stat-card",children:(0,_.jsxs)(h.A.Body,{className:"text-center",children:[(0,_.jsx)("h3",{className:"mb-1",children:M.total}),(0,_.jsx)("small",{className:"text-muted",children:"T\u1ed5ng s\u1ed1"})]})})}),(0,_.jsx)(o.A,{md:2,children:(0,_.jsx)(h.A,{className:"stat-card border-secondary",children:(0,_.jsxs)(h.A.Body,{className:"text-center",children:[(0,_.jsx)("h3",{className:"mb-1 text-secondary",children:M.pending}),(0,_.jsx)("small",{className:"text-muted",children:"Ch\u1edd x\u1eed l\xfd"})]})})}),(0,_.jsx)(o.A,{md:2,children:(0,_.jsx)(h.A,{className:"stat-card border-primary",children:(0,_.jsxs)(h.A.Body,{className:"text-center",children:[(0,_.jsx)("h3",{className:"mb-1 text-primary",children:M.in_progress}),(0,_.jsx)("small",{className:"text-muted",children:"\u0110ang l\xe0m"})]})})}),(0,_.jsx)(o.A,{md:2,children:(0,_.jsx)(h.A,{className:"stat-card border-success",children:(0,_.jsxs)(h.A.Body,{className:"text-center",children:[(0,_.jsx)("h3",{className:"mb-1 text-success",children:M.completed}),(0,_.jsx)("small",{className:"text-muted",children:"Ho\xe0n th\xe0nh"})]})})}),(0,_.jsx)(o.A,{md:2,children:(0,_.jsx)(h.A,{className:"stat-card border-danger",children:(0,_.jsxs)(h.A.Body,{className:"text-center",children:[(0,_.jsx)("h3",{className:"mb-1 text-danger",children:M.overdue}),(0,_.jsx)("small",{className:"text-muted",children:"Qu\xe1 h\u1ea1n"})]})})})]}),(0,_.jsx)(m.A.Container,{activeKey:D,onSelect:L,children:(0,_.jsxs)(h.A,{className:"border-0 shadow-sm",children:[(0,_.jsx)(h.A.Header,{className:"bg-white",children:(0,_.jsxs)(x.A,{variant:"tabs",className:"border-0",children:[(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"list",children:[(0,_.jsx)("i",{className:"fas fa-list me-2"}),"Danh s\xe1ch"]})}),(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"calendar",children:[(0,_.jsx)("i",{className:"fas fa-calendar me-2"}),"L\u1ecbch"]})})]})}),(0,_.jsxs)(h.A.Body,{children:[(0,_.jsxs)(d.A,{className:"mb-3",children:[(0,_.jsx)(o.A,{md:3,children:(0,_.jsxs)(g.A.Select,{size:"sm",value:H.status,onChange:e=>G((0,a.A)((0,a.A)({},H),{},{status:e.target.value})),children:[(0,_.jsx)("option",{value:"",children:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"}),Object.entries(I).map(e=>{let[s,n]=e;return(0,_.jsx)("option",{value:s,children:n.label},s)})]})}),(0,_.jsx)(o.A,{md:3,children:(0,_.jsxs)(g.A.Select,{size:"sm",value:H.task_type,onChange:e=>G((0,a.A)((0,a.A)({},H),{},{task_type:e.target.value})),children:[(0,_.jsx)("option",{value:"",children:"T\u1ea5t c\u1ea3 lo\u1ea1i c\xf4ng vi\u1ec7c"}),Object.entries(O).map(e=>{let[s,n]=e;return(0,_.jsxs)("option",{value:s,children:[n.icon," ",n.label]},s)})]})}),(0,_.jsx)(o.A,{md:3,children:(0,_.jsxs)(r.A,{variant:"outline-secondary",size:"sm",onClick:()=>G({status:"",task_type:"",assigned_to:""}),children:[(0,_.jsx)("i",{className:"fas fa-times me-1"}),"X\xf3a b\u1ed9 l\u1ecdc"]})})]}),(0,_.jsxs)(m.A.Content,{children:[(0,_.jsx)(m.A.Pane,{eventKey:"list",children:N?(0,_.jsxs)("div",{className:"text-center py-5",children:[(0,_.jsx)("div",{className:"spinner-border text-primary"}),(0,_.jsx)("p",{className:"mt-2 text-muted",children:"\u0110ang t\u1ea3i..."})]}):0===f.length?(0,_.jsxs)("div",{className:"text-center py-5",children:[(0,_.jsx)("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),(0,_.jsx)("p",{className:"text-muted",children:"Ch\u01b0a c\xf3 c\xf4ng vi\u1ec7c n\xe0o."})]}):(0,_.jsx)("div",{className:"table-responsive",children:(0,_.jsxs)(j.A,{hover:!0,children:[(0,_.jsx)("thead",{className:"bg-light",children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("th",{style:{width:"50px"},children:"\u01afu ti\xean"}),(0,_.jsx)("th",{children:"C\xf4ng vi\u1ec7c"}),(0,_.jsx)("th",{style:{width:"120px"},children:"Lo\u1ea1i"}),(0,_.jsx)("th",{style:{width:"120px"},children:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n"}),(0,_.jsx)("th",{style:{width:"100px"},children:"H\u1ea1n"}),(0,_.jsx)("th",{style:{width:"100px"},children:"Tr\u1ea1ng th\xe1i"}),(0,_.jsx)("th",{style:{width:"150px"},children:"Thao t\xe1c"})]})}),(0,_.jsx)("tbody",{children:f.map(e=>{var s,n,a;const t=(e=>{const s=new Date,n=new Date(e)-s;return Math.ceil(n/864e5)})(e.due_date),l=U(e.task_type);return(0,_.jsxs)("tr",{className:"overdue"===e.status?"table-danger":"",children:[(0,_.jsx)("td",{children:(0,_.jsx)(i.A,{bg:(null===(s=P[e.priority])||void 0===s?void 0:s.variant)||"secondary",children:"critical"===e.priority?"\ud83d\udd34":"high"===e.priority?"\ud83d\udfe0":"medium"===e.priority?"\ud83d\udfe1":"\u26aa"})}),(0,_.jsxs)("td",{children:[(0,_.jsx)("div",{className:"fw-bold",children:e.title}),e.description&&(0,_.jsxs)("small",{className:"text-muted",children:[e.description.substring(0,50),"..."]})]}),(0,_.jsx)("td",{children:(0,_.jsxs)(i.A,{bg:l.color,children:[l.icon," ",l.label]})}),(0,_.jsx)("td",{children:(0,_.jsx)("small",{children:e.assigned_to_name||"Ch\u01b0a g\xe1n"})}),(0,_.jsxs)("td",{children:[(0,_.jsx)("div",{children:X(e.due_date)}),t>=0&&t<=7&&"completed"!==e.status&&(0,_.jsxs)("small",{className:"text-warning",children:["C\xf2n ",t," ng\xe0y"]}),t<0&&"completed"!==e.status&&(0,_.jsxs)("small",{className:"text-danger",children:["Tr\u1ec5 ",Math.abs(t)," ng\xe0y"]})]}),(0,_.jsx)("td",{children:(0,_.jsx)(i.A,{bg:(null===(n=I[e.status])||void 0===n?void 0:n.variant)||"secondary",children:(null===(a=I[e.status])||void 0===a?void 0:a.label)||e.status})}),(0,_.jsx)("td",{children:(0,_.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,_.jsx)(r.A,{variant:"outline-info",size:"sm",onClick:()=>q(e.id),title:"Xem chi ti\u1ebft",children:(0,_.jsx)("i",{className:"fas fa-eye"})}),"completed"!==e.status&&(0,_.jsx)(r.A,{variant:"outline-success",size:"sm",onClick:()=>(async e=>{const s=prompt("Ghi ch\xfa ho\xe0n th\xe0nh (t\xf9y ch\u1ecdn):");try{const n=localStorage.getItem("token");(await fetch("/api/projects/".concat(p,"/tasks/").concat(e,"/complete"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({completion_notes:s})})).ok&&V()}catch(n){console.error("Error completing task:",n)}})(e.id),title:"Ho\xe0n th\xe0nh",children:(0,_.jsx)("i",{className:"fas fa-check"})}),(0,_.jsx)(r.A,{variant:"outline-primary",size:"sm",onClick:()=>(e=>{C(e),k(!0)})(e),title:"S\u1eeda",children:(0,_.jsx)("i",{className:"fas fa-edit"})}),(0,_.jsx)(r.A,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a c\xf4ng vi\u1ec7c n\xe0y?"))try{const s=localStorage.getItem("token");(await fetch("/api/projects/".concat(p,"/tasks/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}})).ok&&V()}catch(s){console.error("Error deleting task:",s)}})(e.id),title:"X\xf3a",children:(0,_.jsx)("i",{className:"fas fa-trash"})})]})})]},e.id)})})]})})}),(0,_.jsx)(m.A.Pane,{eventKey:"calendar",children:(0,_.jsx)(B,{tasks:f,onTaskClick:q})})]})]})]})}),(0,_.jsx)(K,{show:A,onHide:()=>k(!1),projectId:p,task:w,onSave:()=>{k(!1),V()}}),T&&(0,_.jsxs)(u.A,{show:S,onHide:()=>z(!1),size:"lg",children:[(0,_.jsx)(u.A.Header,{closeButton:!0,children:(0,_.jsx)(u.A.Title,{children:"Chi ti\u1ebft c\xf4ng vi\u1ec7c"})}),(0,_.jsxs)(u.A.Body,{children:[(0,_.jsxs)(d.A,{children:[(0,_.jsxs)(o.A,{md:6,children:[(0,_.jsx)("h6",{children:"Th\xf4ng tin chung"}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Ti\xeau \u0111\u1ec1:"})," ",T.task.title]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"M\xf4 t\u1ea3:"})," ",T.task.description||"N/A"]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Lo\u1ea1i:"})," ",(0,_.jsx)(i.A,{bg:U(T.task.task_type).color,children:U(T.task.task_type).label})]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"\u01afu ti\xean:"})," ",(0,_.jsx)(i.A,{bg:null===(s=P[T.task.priority])||void 0===s?void 0:s.variant,children:null===(n=P[T.task.priority])||void 0===n?void 0:n.label})]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Tr\u1ea1ng th\xe1i:"})," ",(0,_.jsx)(i.A,{bg:null===(l=I[T.task.status])||void 0===l?void 0:l.variant,children:null===(c=I[T.task.status])||void 0===c?void 0:c.label})]})]}),(0,_.jsxs)(o.A,{md:6,children:[(0,_.jsx)("h6",{children:"L\u1ecbch tr\xecnh"}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Ng\xe0y b\u1eaft \u0111\u1ea7u:"})," ",X(T.task.start_date)]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"H\u1ea1n ch\xf3t:"})," ",X(T.task.due_date)]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"T\u1ea7n su\u1ea5t:"})," ",T.task.frequency]}),T.task.is_recurring&&(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"L\u1ea7n k\u1ebf ti\u1ebfp:"})," ",X(T.task.next_due_date)]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n:"})," ",T.task.assigned_to_name||"Ch\u01b0a g\xe1n"]})]})]}),T.task.completed_at&&(0,_.jsxs)("div",{className:"mt-3 pt-3 border-top",children:[(0,_.jsx)("h6",{children:"Th\xf4ng tin ho\xe0n th\xe0nh"}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Ho\xe0n th\xe0nh l\xfac:"})," ",X(T.task.completed_at)]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Ng\u01b0\u1eddi ho\xe0n th\xe0nh:"})," ",T.task.completed_by_name]}),T.task.completion_notes&&(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("strong",{children:"Ghi ch\xfa:"})," ",T.task.completion_notes]})]}),T.comments&&T.comments.length>0&&(0,_.jsxs)("div",{className:"mt-3 pt-3 border-top",children:[(0,_.jsxs)("h6",{children:["B\xecnh lu\u1eadn (",T.comments.length,")"]}),T.comments.map(e=>(0,_.jsxs)("div",{className:"mb-2 p-2 bg-light rounded",children:[(0,_.jsxs)("small",{className:"text-muted",children:[e.user_name," - ",X(e.created_at)]}),(0,_.jsx)("div",{children:e.comment})]},e.id))]})]}),(0,_.jsx)(u.A.Footer,{children:(0,_.jsx)(r.A,{variant:"secondary",onClick:()=>z(!1),children:"\u0110\xf3ng"})})]})]})};const G=function(){var e,s,n,y,A,k,w,C,T,S,z,D,K,L;const{id:B}=(0,p.g)(),O=(0,p.Zp)(),{hasPermission:I}=(0,v.As)(),{showNotification:P}=(0,f.hN)(),[G,M]=(0,t.useState)(!0),[F,V]=(0,t.useState)(null),[R,q]=(0,t.useState)([]),[X,U]=(0,t.useState)("overview"),[J,Q]=(0,t.useState)(!1),[Y,Z]=(0,t.useState)(null),[W,$]=(0,t.useState)(!1),[ee,se]=(0,t.useState)(!1),[ne,ae]=(0,t.useState)([]),[te,ie]=(0,t.useState)(!0),[le,ce]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e;const s=()=>{clearTimeout(e),e=setTimeout(()=>{window.scrollY>500?ce(!0):ce(!1)},50)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s),clearTimeout(e)}},[]);const re={id:parseInt(B),name:"Kho x\u01b0\u1edfng B\xecnh D\u01b0\u01a1ng",code:"KX-BD-001",description:"Khu kho x\u01b0\u1edfng hi\u1ec7n \u0111\u1ea1i v\u1edbi \u0111\u1ea7y \u0111\u1ee7 ti\u1ec7n \xedch v\xe0 h\u1ea1 t\u1ea7ng logistics.",address:"123 \u0110\u01b0\u1eddng ABC, Thu\u1eadn An, B\xecnh D\u01b0\u01a1ng",province:"B\xecnh D\u01b0\u01a1ng",district:"Thu\u1eadn An",ward:"Ph\u01b0\u1eddng An Th\u1ea1nh",latitude:10.9045,longitude:106.7213,status:"operational",total_area:15e3,used_area:12e3,available_area:3e3,fixed_area:500,owner_info:{name:"C\xf4ng ty TNHH ABC",phone:"0123456789",email:"contact@abc.com"},project_director:{name:"Nguy\u1ec5n V\u0103n Ki\xean",phone:"0987654321",email:"kien@abc.com",position:"Gi\xe1m \u0111\u1ed1c d\u1ef1 \xe1n"},project_manager:{name:"Tr\u1ea7n Th\u1ecb Li\xean",phone:"0976543210",email:"lien@abc.com",position:"Ng\u01b0\u1eddi qu\u1ea3n l\xfd d\u1ef1 \xe1n"},legal_documents:{business_license:"GP-123456789",construction_permit:"XD-987654321",fire_safety_cert:"PCCC-111222333"},created_at:"2024-01-15",created_by_username:"admin"},de=[{id:1,zone_code:"A1",zone_name:"Khu v\u1ef1c A1",area:500,status:"rented",rental_price:15e4,tenant_info:{customer_code:"KH001",company_name:"C\xf4ng ty XYZ",contact_person:"Nguy\u1ec5n V\u0103n A",contract_number:"HD240001",end_date:"2024-12-31"}},{id:2,zone_code:"A2",zone_name:"Khu v\u1ef1c A2",area:750,status:"available",rental_price:14e4,tenant_info:null},{id:3,zone_code:"B1",zone_name:"Khu v\u1ef1c B1",area:600,status:"deposited",rental_price:16e4,tenant_info:{customer_code:"KH002",company_name:"C\xf4ng ty DEF",contact_person:"Tr\u1ea7n Th\u1ecb B",contract_number:"HD240002",end_date:"2024-06-30"}},{id:4,zone_code:"C1",zone_name:"Khu v\u1ef1c C1 - V\u0103n ph\xf2ng",area:200,status:"maintenance",rental_price:0,tenant_info:null}];(0,t.useEffect)(()=>{setTimeout(()=>{V(re),q(de),M(!1)},1e3)},[B,re,de]),(0,t.useEffect)(()=>{(async()=>{try{const e=await b.A.get("/api/documents",{params:{resource_type:"project",resource_id:B}});if(e.data&&e.data.success){const s=e.data.data.files.map(e=>({id:e._id||e.id,name:e.originalname||e.name||e.filename,filename:e.filename,size:e.size,mimetype:e.mimetype,uploadedAt:e.uploaded_at||e.uploadedAt,category_id:e.category_id,resource_type:e.resource_type,resource_id:e.resource_id}));ae(s)}}catch(e){console.error("Error fetching documents",e),ie(!1),P("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c danh s\xe1ch t\xe0i li\u1ec7u. Vui l\xf2ng th\u1eed l\u1ea1i sau.","warning")}})()},[B,P]);const oe=e=>{const s={operational:{variant:"success",label:"Ho\u1ea1t \u0111\u1ed9ng"},construction:{variant:"warning",label:"X\xe2y d\u1ef1ng"},planning:{variant:"info",label:"L\xean k\u1ebf ho\u1ea1ch"},maintenance:{variant:"secondary",label:"B\u1ea3o tr\xec"}}[e]||{variant:"secondary",label:e};return(0,_.jsx)(i.A,{bg:s.variant,children:s.label})},he=e=>{const s={available:{variant:"danger",label:"Ch\u01b0a cho thu\xea",color:"#dc3545"},rented:{variant:"success",label:"\u0110\xe3 cho thu\xea",color:"#28a745"},deposited:{variant:"warning",label:"\u0110\xe3 c\u1ecdc",color:"#ffc107"},maintenance:{variant:"secondary",label:"B\u1ea3o tr\xec",color:"#6c757d"}}[e]||{variant:"secondary",label:e,color:"#6c757d"};return(0,_.jsx)(i.A,{bg:s.variant,style:{color:"deposited"===e?"#000":"#fff"},children:s.label})},me=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e).replace("\u20ab","\u0111"),xe=e=>new Intl.NumberFormat("vi-VN").format(e)+" m\xb2",je=e=>{Z(e),Q(!0)},ue=(()=>{const e={total:R.length,available:R.filter(e=>"available"===e.status).length,rented:R.filter(e=>"rented"===e.status).length,deposited:R.filter(e=>"deposited"===e.status).length,maintenance:R.filter(e=>"maintenance"===e.status).length},s=R.reduce((e,s)=>e+s.area,0),n=R.filter(e=>"rented"===e.status).reduce((e,s)=>e+s.area,0),t=s>0?Math.round(n/s*100):0;return(0,a.A)((0,a.A)({},e),{},{occupancyRate:t,totalArea:s,rentedArea:n})})();return G?(0,_.jsx)(N.A,{text:"\u0110ang t\u1ea3i th\xf4ng tin d\u1ef1 \xe1n..."}):F?(0,_.jsxs)("div",{className:"project-detail-page p-4",children:[(0,_.jsxs)("div",{className:"sticky-top-container ".concat(le?"collapsed":""),children:[(0,_.jsx)("div",{className:"project-header mb-4 ".concat(le?"collapsed":""),children:(0,_.jsx)(d.A,{children:(0,_.jsx)(o.A,{children:(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,_.jsx)(r.A,{variant:"outline-secondary",size:"sm",className:"me-3",onClick:()=>O("/projects"),children:(0,_.jsx)("i",{className:"fas fa-arrow-left"})}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h2",{className:"mb-0",children:F.name}),(0,_.jsxs)("div",{className:"d-flex align-items-center mt-1",children:[(0,_.jsxs)("span",{className:"text-muted me-3",children:["M\xe3: ",F.code]}),oe(F.status)]})]})]}),(0,_.jsx)("p",{className:"text-muted mb-0",children:F.address})]}),(0,_.jsxs)("div",{className:"d-flex gap-2",children:[I("project_update")&&(0,_.jsxs)(r.A,{variant:"outline-primary",onClick:()=>O("/projects/".concat(B,"/edit")),children:[(0,_.jsx)("i",{className:"fas fa-edit me-2"}),"Ch\u1ec9nh s\u1eeda"]}),(0,_.jsxs)(r.A,{variant:"outline-secondary",children:[(0,_.jsx)("i",{className:"fas fa-download me-2"}),"Xu\u1ea5t b\xe1o c\xe1o"]})]})]})})})}),(0,_.jsx)("div",{className:"statistics-container mb-4 ".concat(le?"collapsed":""),children:(0,_.jsxs)(d.A,{className:"g-3",children:[(0,_.jsx)(o.A,{lg:3,md:6,sm:12,children:(0,_.jsx)(h.A,{className:"border-0 shadow-sm h-100",children:(0,_.jsxs)(h.A.Body,{children:[(0,_.jsx)("h6",{className:"text-muted mb-3",children:"T\u1ed5ng Di\u1ec7n T\xedch"}),(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-end mb-2",children:[(0,_.jsx)("span",{className:"fw-bold text-primary",children:xe(F.total_area)}),(0,_.jsx)("i",{className:"fas fa-expand-arrows-alt fa-lg text-primary opacity-25"})]})}),(0,_.jsxs)("div",{className:"small",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,_.jsx)("span",{className:"text-success",children:"\u0110\xe3 cho thu\xea:"}),(0,_.jsx)("span",{className:"fw-bold text-success",children:xe(R.filter(e=>"rented"===e.status).reduce((e,s)=>e+s.area,0))})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,_.jsx)("span",{className:"text-warning",children:"\u0110\xe3 c\u1ecdc:"}),(0,_.jsx)("span",{className:"fw-bold text-warning",children:xe(R.filter(e=>"deposited"===e.status).reduce((e,s)=>e+s.area,0))})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("span",{className:"text-danger",children:"C\xf2n tr\u1ed1ng:"}),(0,_.jsx)("span",{className:"fw-bold text-danger",children:xe(R.filter(e=>"available"===e.status).reduce((e,s)=>e+s.area,0))})]})]})]})})}),(0,_.jsx)(o.A,{lg:3,md:6,sm:12,children:(0,_.jsx)(h.A,{className:"border-0 shadow-sm h-100",children:(0,_.jsxs)(h.A.Body,{children:[(0,_.jsx)("h6",{className:"text-muted mb-3",children:"T\u1ef7 L\u1ec7 Thu\xea"}),(0,_.jsxs)("div",{className:"mb-3",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-end mb-2",children:[(0,_.jsxs)("span",{className:"fw-bold text-success",children:[ue.occupancyRate,"%"]}),(0,_.jsx)("i",{className:"fas fa-percentage fa-lg text-success opacity-25"})]}),(0,_.jsx)("div",{className:"progress",style:{height:"8px"},children:(0,_.jsx)("div",{className:"progress-bar bg-success",style:{width:"".concat(ue.occupancyRate,"%")}})})]}),(0,_.jsxs)("div",{className:"small",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,_.jsx)("span",{children:"\u0110\xe3 thu\xea:"}),(0,_.jsxs)("span",{className:"fw-bold",children:[ue.rented," kho"]})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,_.jsx)("span",{children:"\u0110\xe3 c\u1ecdc:"}),(0,_.jsxs)("span",{className:"fw-bold",children:[ue.deposited," kho"]})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("span",{children:"C\xf2n tr\u1ed1ng:"}),(0,_.jsxs)("span",{className:"fw-bold",children:[ue.available," kho"]})]})]})]})})}),(0,_.jsx)(o.A,{lg:3,md:6,sm:12,children:(0,_.jsx)(h.A,{className:"border-0 shadow-sm h-100",children:(0,_.jsxs)(h.A.Body,{children:[(0,_.jsx)("h6",{className:"text-muted mb-3",children:"S\u1ed1 Kho"}),(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-end mb-2",children:[(0,_.jsx)("span",{className:"fw-bold text-info",children:ue.total}),(0,_.jsx)("i",{className:"fas fa-th-large fa-lg text-info opacity-25"})]})}),(0,_.jsxs)("div",{className:"small",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,_.jsx)("span",{className:"text-success",children:"\u0110\xe3 thu\xea:"}),(0,_.jsx)("span",{className:"fw-bold text-success",children:ue.rented})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,_.jsx)("span",{className:"text-warning",children:"\u0110\xe3 c\u1ecdc:"}),(0,_.jsx)("span",{className:"fw-bold text-warning",children:ue.deposited})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("span",{className:"text-danger",children:"C\xf2n tr\u1ed1ng:"}),(0,_.jsx)("span",{className:"fw-bold text-danger",children:ue.available})]})]})]})})}),(0,_.jsx)(o.A,{lg:3,md:6,sm:12,children:(0,_.jsx)(h.A,{className:"border-0 shadow-sm h-100",children:(0,_.jsxs)(h.A.Body,{children:[(0,_.jsx)("h6",{className:"text-muted mb-3",children:"Doanh Thu/Th\xe1ng"}),(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-end mb-2",children:[(0,_.jsx)("span",{className:"fw-bold text-warning",children:me(R.filter(e=>"rented"===e.status).reduce((e,s)=>e+s.rental_price*s.area,0))}),(0,_.jsx)("i",{className:"fas fa-chart-line fa-lg text-warning opacity-25"})]})}),(0,_.jsxs)("div",{className:"small",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[(0,_.jsx)("span",{children:"T\u1eeb cho thu\xea:"}),(0,_.jsx)("span",{className:"fw-bold",children:me(R.filter(e=>"rented"===e.status).reduce((e,s)=>e+s.rental_price*s.area,0))})]}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("span",{children:"Ti\u1ec1m n\u0103ng:"}),(0,_.jsx)("span",{className:"fw-bold",children:me(R.filter(e=>"available"===e.status).reduce((e,s)=>e+s.rental_price*s.area,0))})]})]})]})})})]})})]}),(0,_.jsxs)(h.A,{className:"border-0 shadow-sm",children:[(0,_.jsx)(h.A.Header,{className:"border-bottom-0",children:(0,_.jsx)(m.A.Container,{activeKey:X,onSelect:U,children:(0,_.jsxs)(x.A,{variant:"tabs",className:"border-0",children:[(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"overview",children:[(0,_.jsx)("i",{className:"fas fa-info-circle me-2"}),"Th\xf4ng tin chung"]})}),(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"zones",children:[(0,_.jsx)("i",{className:"fas fa-th-large me-2"}),"Qu\u1ea3n l\xfd kho (",R.length,")"]})}),(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"map",children:[(0,_.jsx)("i",{className:"fas fa-map me-2"}),"B\u1ea3n \u0111\u1ed3"]})}),(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"tasks",children:[(0,_.jsx)("i",{className:"fas fa-tasks me-2"}),"C\xf4ng vi\u1ec7c"]})}),(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"documents",children:[(0,_.jsx)("i",{className:"fas fa-folder me-2"}),"H\u1ed3 s\u01a1 ph\xe1p l\xfd"]})}),(0,_.jsx)(x.A.Item,{children:(0,_.jsxs)(x.A.Link,{eventKey:"team",children:[(0,_.jsx)("i",{className:"fas fa-users me-2"}),"\u0110\u1ed9i d\u1ef1 \xe1n"]})})]})})}),(0,_.jsx)(h.A.Body,{children:(0,_.jsx)(m.A.Container,{activeKey:X,children:(0,_.jsxs)(m.A.Content,{children:[(0,_.jsx)(m.A.Pane,{eventKey:"overview",children:(0,_.jsxs)(d.A,{children:[(0,_.jsxs)(o.A,{md:6,children:[(0,_.jsx)("h5",{className:"mb-3",children:"Th\xf4ng tin d\u1ef1 \xe1n"}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\xean d\u1ef1 \xe1n:"})," ",F.name]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"M\xe3 d\u1ef1 \xe1n:"})," ",F.code]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"M\xf4 t\u1ea3:"})," ",F.description]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110\u1ecba ch\u1ec9:"})," ",F.address]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\u1ec9nh/Th\xe0nh:"})," ",F.province]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Tr\u1ea1ng th\xe1i:"})," ",oe(F.status)]})]})]}),(0,_.jsxs)(o.A,{md:6,children:[(0,_.jsx)("h5",{className:"mb-3",children:"Th\xf4ng tin ch\u1ee7 s\u1edf h\u1eefu"}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\xean:"})," ",null===(e=F.owner_info)||void 0===e?void 0:e.name]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110i\u1ec7n tho\u1ea1i:"})," ",null===(s=F.owner_info)||void 0===s?void 0:s.phone]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Email:"})," ",null===(n=F.owner_info)||void 0===n?void 0:n.email]})]}),(0,_.jsx)("h5",{className:"mb-3 mt-4",children:"Gi\xe1m \u0111\u1ed1c d\u1ef1 \xe1n"}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\xean:"})," ",null===(y=F.project_director)||void 0===y?void 0:y.name]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Ch\u1ee9c v\u1ee5:"})," ",null===(A=F.project_director)||void 0===A?void 0:A.position]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110i\u1ec7n tho\u1ea1i:"})," ",null===(k=F.project_director)||void 0===k?void 0:k.phone]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Email:"})," ",null===(w=F.project_director)||void 0===w?void 0:w.email]})]}),(0,_.jsx)("h5",{className:"mb-3 mt-4",children:"Ng\u01b0\u1eddi qu\u1ea3n l\xfd d\u1ef1 \xe1n"}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\xean:"})," ",null===(C=F.project_manager)||void 0===C?void 0:C.name]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Ch\u1ee9c v\u1ee5:"})," ",null===(T=F.project_manager)||void 0===T?void 0:T.position]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110i\u1ec7n tho\u1ea1i:"})," ",null===(S=F.project_manager)||void 0===S?void 0:S.phone]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Email:"})," ",null===(z=F.project_manager)||void 0===z?void 0:z.email]})]}),(0,_.jsx)("h5",{className:"mb-3 mt-4",children:"Th\u1ed1ng k\xea di\u1ec7n t\xedch"}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\u1ed5ng di\u1ec7n t\xedch:"})," ",xe(F.total_area)]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110\xe3 s\u1eed d\u1ee5ng:"})," ",xe(F.used_area)]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"C\xf2n tr\u1ed1ng:"})," ",xe(F.available_area)]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"C\u1ed1 \u0111\u1ecbnh:"})," ",xe(F.fixed_area)]})]})]})]})}),(0,_.jsxs)(m.A.Pane,{eventKey:"zones",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,_.jsx)("h5",{className:"mb-0",children:"Danh s\xe1ch kho"}),(0,_.jsxs)("div",{className:"d-flex gap-2",children:[(0,_.jsxs)(r.A,{variant:"outline-success",size:"sm",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".dxf,.pdf,.dwg,.png,.jpg,.jpeg",e.onchange=e=>{const s=e.target.files[0];s&&alert("\u0110\xe3 import b\u1ea3n v\u1ebd: ".concat(s.name))},e.click()},children:[(0,_.jsx)("i",{className:"fas fa-file-import me-2"}),"Import b\u1ea3n v\u1ebd"]}),(0,_.jsxs)(r.A,{variant:"primary",size:"sm",onClick:()=>$(!0),children:[(0,_.jsx)("i",{className:"fas fa-plus me-2"}),"Th\xeam kho"]})]})]}),(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)("div",{className:"d-flex gap-3 flex-wrap",children:[(0,_.jsxs)("div",{className:"d-flex align-items-center",children:[(0,_.jsx)("div",{className:"me-2",style:{width:"16px",height:"16px",backgroundColor:"#dc3545",borderRadius:"2px"}}),(0,_.jsxs)("span",{className:"small",children:["Ch\u01b0a cho thu\xea (",ue.available,")"]})]}),(0,_.jsxs)("div",{className:"d-flex align-items-center",children:[(0,_.jsx)("div",{className:"me-2",style:{width:"16px",height:"16px",backgroundColor:"#28a745",borderRadius:"2px"}}),(0,_.jsxs)("span",{className:"small",children:["\u0110\xe3 cho thu\xea (",ue.rented,")"]})]}),(0,_.jsxs)("div",{className:"d-flex align-items-center",children:[(0,_.jsx)("div",{className:"me-2",style:{width:"16px",height:"16px",backgroundColor:"#ffc107",borderRadius:"2px"}}),(0,_.jsxs)("span",{className:"small",children:["\u0110\xe3 c\u1ecdc (",ue.deposited,")"]})]}),(0,_.jsxs)("div",{className:"d-flex align-items-center",children:[(0,_.jsx)("div",{className:"me-2",style:{width:"16px",height:"16px",backgroundColor:"#6c757d",borderRadius:"2px"}}),(0,_.jsxs)("span",{className:"small",children:["B\u1ea3o tr\xec (",ue.maintenance,")"]})]})]})}),(0,_.jsx)("div",{className:"table-responsive",children:(0,_.jsxs)(j.A,{hover:!0,children:[(0,_.jsx)("thead",{className:"bg-light",children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("th",{children:"M\xe3 kho"}),(0,_.jsx)("th",{children:"Di\u1ec7n t\xedch"}),(0,_.jsx)("th",{children:"Tr\u1ea1ng th\xe1i"}),(0,_.jsx)("th",{children:"Gi\xe1 thu\xea"}),(0,_.jsx)("th",{children:"Kh\xe1ch thu\xea"}),(0,_.jsx)("th",{children:"Thao t\xe1c"})]})}),(0,_.jsx)("tbody",{children:R.map(e=>(0,_.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>je(e),children:[(0,_.jsx)("td",{children:(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:"fw-bold",children:e.zone_code}),(0,_.jsx)("small",{className:"text-muted",children:e.zone_name})]})}),(0,_.jsx)("td",{children:xe(e.area)}),(0,_.jsx)("td",{children:he(e.status)}),(0,_.jsx)("td",{children:e.rental_price>0?me(e.rental_price)+"/m\xb2/th\xe1ng":"-"}),(0,_.jsx)("td",{children:e.tenant_info?(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:"fw-medium",children:e.tenant_info.company_name}),(0,_.jsx)("small",{className:"text-muted",children:e.tenant_info.contact_person})]}):(0,_.jsx)("span",{className:"text-muted",children:"-"})}),(0,_.jsx)("td",{children:(0,_.jsx)(r.A,{variant:"outline-primary",size:"sm",onClick:s=>{s.stopPropagation(),je(e)},children:(0,_.jsx)("i",{className:"fas fa-eye"})})})]},e.id))})]})})]}),(0,_.jsx)(m.A.Pane,{eventKey:"map",children:(0,_.jsx)(E,{project:F,zones:R,onZoneClick:e=>{Z(e),Q(!0)},showLegend:!0})}),(0,_.jsx)(m.A.Pane,{eventKey:"tasks",children:(0,_.jsx)(H,{projectId:B,projectName:null===F||void 0===F?void 0:F.name})}),(0,_.jsxs)(m.A.Pane,{eventKey:"documents",children:[(0,_.jsx)("h5",{className:"mb-3",children:"H\u1ed3 s\u01a1 ph\xe1p l\xfd"}),(0,_.jsx)(d.A,{className:"mb-4",children:(0,_.jsx)(o.A,{md:6,children:(0,_.jsx)(h.A,{className:"border-0 bg-light",children:(0,_.jsxs)(h.A.Body,{children:[(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("small",{className:"text-muted",children:"Gi\u1ea5y ph\xe9p kinh doanh"}),(0,_.jsx)("div",{className:"fw-bold",children:(null===(D=F.legal_documents)||void 0===D?void 0:D.business_license)||"Ch\u01b0a c\xf3"})]}),(0,_.jsxs)("div",{className:"mb-2",children:[(0,_.jsx)("small",{className:"text-muted",children:"Gi\u1ea5y ph\xe9p x\xe2y d\u1ef1ng"}),(0,_.jsx)("div",{className:"fw-bold",children:(null===(K=F.legal_documents)||void 0===K?void 0:K.construction_permit)||"Ch\u01b0a c\xf3"})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("small",{className:"text-muted",children:"Ch\u1ee9ng nh\u1eadn PCCC"}),(0,_.jsx)("div",{className:"fw-bold",children:(null===(L=F.legal_documents)||void 0===L?void 0:L.fire_safety_cert)||"Ch\u01b0a c\xf3"})]})]})})})}),(0,_.jsx)("h5",{className:"mb-3",children:"T\xe0i li\u1ec7u d\u1ef1 \xe1n"}),te?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)(r.A,{variant:"outline-primary",onClick:()=>se(!0),children:[(0,_.jsx)("i",{className:"fas fa-upload me-2"}),"Upload t\xe0i li\u1ec7u"]})}),ne.length>0?(0,_.jsx)("div",{className:"table-responsive",children:(0,_.jsxs)(j.A,{hover:!0,className:"border",children:[(0,_.jsx)("thead",{className:"bg-light",children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("th",{children:"T\xean t\xe0i li\u1ec7u"}),(0,_.jsx)("th",{children:"Dung l\u01b0\u1ee3ng"}),(0,_.jsx)("th",{children:"Ng\xe0y upload"}),(0,_.jsx)("th",{style:{width:"120px"},children:"Thao t\xe1c"})]})}),(0,_.jsx)("tbody",{children:ne.map(e=>(0,_.jsxs)("tr",{children:[(0,_.jsxs)("td",{children:[(0,_.jsx)("i",{className:"fas fa-file me-2 text-primary"}),e.name]}),(0,_.jsxs)("td",{children:[(e.size/1024).toFixed(2)," KB"]}),(0,_.jsx)("td",{children:new Date(e.uploadedAt).toLocaleDateString("vi-VN")}),(0,_.jsx)("td",{children:(0,_.jsxs)("div",{className:"d-flex gap-2",children:[(0,_.jsx)(r.A,{variant:"outline-primary",size:"sm",title:"Xem",onClick:()=>(e=>{try{if(e.filename){const s="/uploads/documents/".concat(e.filename);return window.open(s,"_blank"),void P("\u0110ang m\u1edf t\xe0i li\u1ec7u: ".concat(e.name),"info")}if(e.url)return window.open(e.url,"_blank"),void P("\u0110ang m\u1edf t\xe0i li\u1ec7u: ".concat(e.name),"info");P("Kh\xf4ng c\xf3 \u0111\u01b0\u1eddng d\u1eabn \u0111\u1ec3 m\u1edf t\xe0i li\u1ec7u.","warning")}catch(s){P("Kh\xf4ng th\u1ec3 m\u1edf t\xe0i li\u1ec7u.","danger")}})(e),children:(0,_.jsx)("i",{className:"fas fa-eye"})}),(0,_.jsx)(r.A,{variant:"outline-success",size:"sm",title:"T\u1ea3i xu\u1ed1ng",onClick:()=>(async e=>{try{if(e.id){const s=await b.A.get("/api/documents/download/".concat(e.id),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([s.data])),a=document.createElement("a");return a.href=n,a.download=e.name,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n),void P("\u0110ang t\u1ea3i xu\u1ed1ng t\xe0i li\u1ec7u: ".concat(e.name),"info")}if(e.url){const s=document.createElement("a");return s.href=e.url,s.download=e.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),void P("\u0110ang t\u1ea3i xu\u1ed1ng t\xe0i li\u1ec7u: ".concat(e.name),"info")}P("T\u1eadp tin kh\xf4ng t\u1ed3n t\u1ea1i \u0111\u1ec3 t\u1ea3i xu\u1ed1ng.","warning")}catch(s){console.error("Error downloading",s),P("T\u1ea3i xu\u1ed1ng th\u1ea5t b\u1ea1i.","danger")}})(e),children:(0,_.jsx)("i",{className:"fas fa-download"})}),(0,_.jsx)(r.A,{variant:"outline-danger",size:"sm",title:"X\xf3a",onClick:()=>(async e=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a t\xe0i li\u1ec7u n\xe0y?"))try{const s=await b.A.delete("/api/documents/".concat(e));s.data&&s.data.success&&(ae(s=>s.filter(s=>s.id!==e)),P("\u0110\xe3 x\xf3a t\xe0i li\u1ec7u.","success"))}catch(s){console.error("Delete failed",s),P("X\xf3a t\xe0i li\u1ec7u th\u1ea5t b\u1ea1i.","danger")}})(e.id),children:(0,_.jsx)("i",{className:"fas fa-trash"})})]})})]},e.id))})]})}):(0,_.jsxs)("div",{className:"text-center py-5 border rounded bg-light",children:[(0,_.jsx)("i",{className:"fas fa-file-alt fa-3x text-muted mb-3 d-block"}),(0,_.jsx)("p",{className:"text-muted mb-0",children:"Ch\u01b0a c\xf3 t\xe0i li\u1ec7u n\xe0o \u0111\u01b0\u1ee3c upload"})]})]}):(0,_.jsxs)(c.A,{variant:"warning",children:[(0,_.jsxs)(c.A.Heading,{children:[(0,_.jsx)("i",{className:"fas fa-exclamation-triangle me-2"}),"D\u1ecbch v\u1ee5 t\xe0i li\u1ec7u kh\xf4ng kh\u1ea3 d\u1ee5ng"]}),(0,_.jsx)("p",{children:"Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i \u0111\u1ebfn d\u1ecbch v\u1ee5 t\xe0i li\u1ec7u. Ch\u1ee9c n\u0103ng upload v\xe0 xem file s\u1ebd b\u1ecb v\xf4 hi\u1ec7u h\xf3a. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i k\u1ebft n\u1ed1i ho\u1eb7c li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean."})]})]}),(0,_.jsx)(m.A.Pane,{eventKey:"team",children:(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{lg:6,className:"mb-4",children:(0,_.jsxs)(h.A,{className:"border-0 shadow-sm",children:[(0,_.jsx)(h.A.Header,{className:"bg-light border-0",children:(0,_.jsxs)("h5",{className:"mb-0",children:[(0,_.jsx)("i",{className:"fas fa-user-tie me-2 text-primary"}),"Gi\xe1m \u0111\u1ed1c D\u1ef1 \xe1n"]})}),(0,_.jsx)(h.A.Body,{children:F.project_director?(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,_.jsx)("div",{className:"bg-primary text-white rounded-circle p-3 me-3",style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsx)("i",{className:"fas fa-user fa-lg"})}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h6",{className:"mb-0 fw-bold",children:F.project_director.name}),(0,_.jsx)("small",{className:"text-muted",children:F.project_director.position})]})]})}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Email:"})," ",F.project_director.email]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110i\u1ec7n tho\u1ea1i:"})," ",F.project_director.phone]})]})]}):(0,_.jsx)("p",{className:"text-muted text-center",children:"Ch\u01b0a c\xf3 gi\xe1m \u0111\u1ed1c \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh"})})]})}),(0,_.jsx)(o.A,{lg:6,className:"mb-4",children:(0,_.jsxs)(h.A,{className:"border-0 shadow-sm",children:[(0,_.jsx)(h.A.Header,{className:"bg-light border-0",children:(0,_.jsxs)("h5",{className:"mb-0",children:[(0,_.jsx)("i",{className:"fas fa-clipboard-list me-2 text-info"}),"Ng\u01b0\u1eddi Qu\u1ea3n l\xfd D\u1ef1 \xe1n"]})}),(0,_.jsx)(h.A.Body,{children:F.project_manager?(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,_.jsx)("div",{className:"bg-info text-white rounded-circle p-3 me-3",style:{width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsx)("i",{className:"fas fa-user fa-lg"})}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h6",{className:"mb-0 fw-bold",children:F.project_manager.name}),(0,_.jsx)("small",{className:"text-muted",children:F.project_manager.position})]})]})}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Email:"})," ",F.project_manager.email]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"\u0110i\u1ec7n tho\u1ea1i:"})," ",F.project_manager.phone]})]})]}):(0,_.jsx)("p",{className:"text-muted text-center",children:"Ch\u01b0a c\xf3 ng\u01b0\u1eddi qu\u1ea3n l\xfd \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh"})})]})})]})})]})})})]}),(0,_.jsxs)(u.A,{show:J,onHide:()=>Q(!1),size:"lg",children:[(0,_.jsx)(u.A.Header,{closeButton:!0,children:(0,_.jsxs)(u.A.Title,{children:["Chi ti\u1ebft Kho ",null===Y||void 0===Y?void 0:Y.zone_code]})}),(0,_.jsx)(u.A.Body,{children:Y&&(0,_.jsxs)(d.A,{children:[(0,_.jsxs)(o.A,{md:6,children:[(0,_.jsx)("h6",{children:"Th\xf4ng tin kho"}),(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"M\xe3 kho:"})," ",Y.zone_code]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"T\xean:"})," ",Y.zone_name]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Di\u1ec7n t\xedch:"})," ",xe(Y.area)]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Tr\u1ea1ng th\xe1i:"})," ",he(Y.status)]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Gi\xe1 thu\xea:"})," ",Y.rental_price>0?me(Y.rental_price)+"/m\xb2/th\xe1ng":"-"]})]})]}),(0,_.jsxs)(o.A,{md:6,children:[(0,_.jsx)("h6",{children:"Th\xf4ng tin kh\xe1ch thu\xea"}),Y.tenant_info?(0,_.jsxs)("div",{className:"info-group",children:[(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"C\xf4ng ty:"})," ",Y.tenant_info.company_name]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Ng\u01b0\u1eddi li\xean h\u1ec7:"})," ",Y.tenant_info.contact_person]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"S\u1ed1 h\u1ee3p \u0111\u1ed3ng:"})," ",Y.tenant_info.contract_number]}),(0,_.jsxs)("div",{className:"info-item",children:[(0,_.jsx)("strong",{children:"Ng\xe0y h\u1ebft h\u1ea1n:"})," ",new Date(Y.tenant_info.end_date).toLocaleDateString("vi-VN")]})]}):(0,_.jsx)("p",{className:"text-muted",children:"Ch\u01b0a c\xf3 kh\xe1ch thu\xea"})]})]})}),(0,_.jsxs)(u.A.Footer,{children:[(0,_.jsx)(r.A,{variant:"secondary",onClick:()=>Q(!1),children:"\u0110\xf3ng"}),I("zone_update")&&(0,_.jsx)(r.A,{variant:"primary",children:"Ch\u1ec9nh s\u1eeda kho"})]})]}),(0,_.jsxs)(u.A,{show:ee,onHide:()=>se(!1),size:"lg",children:[(0,_.jsx)(u.A.Header,{closeButton:!0,children:(0,_.jsx)(u.A.Title,{children:"Upload T\xe0i li\u1ec7u D\u1ef1 \xe1n"})}),(0,_.jsxs)(u.A.Body,{children:[(0,_.jsxs)("div",{className:"text-center py-5 border-2 border-dashed rounded",style:{borderStyle:"dashed"},children:[(0,_.jsx)("input",{type:"file",multiple:!0,onChange:async e=>{if(!te)return void P("D\u1ecbch v\u1ee5 t\xe0i li\u1ec7u kh\xf4ng kh\u1ea3 d\u1ee5ng. Vui l\xf2ng th\u1eed l\u1ea1i sau.","warning");const s=Array.from(e.target.files);if(0===s.length)return;const n=new FormData;s.forEach(e=>n.append("files",e)),n.append("resource_type","project"),n.append("resource_id",B);try{const e=await b.A.post("/api/documents/upload",n,{headers:{"Content-Type":"multipart/form-data"}});if(e.data&&e.data.success){const s=e.data.data.files.map(e=>({id:e.id||e._id,name:e.originalname||e.filename,filename:e.filename,size:e.size,mimetype:e.mimetype,uploadedAt:(new Date).toISOString(),resource_type:"project",resource_id:B}));ae(e=>[...s,...e]),P("\u0110\xe3 t\u1ea3i l\xean ".concat(s.length," t\xe0i li\u1ec7u."),"success")}}catch(a){console.error("Upload failed",a),P("T\u1ea3i l\xean th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.","danger")}finally{e.target.value=""}},style:{display:"none"},id:"fileInput"}),(0,_.jsxs)("label",{htmlFor:"fileInput",style:{cursor:"pointer",width:"100%"},children:[(0,_.jsx)("i",{className:"fas fa-cloud-upload-alt fa-3x text-primary mb-3 d-block"}),(0,_.jsx)("h6",{children:"K\xe9o th\u1ea3 ho\u1eb7c click \u0111\u1ec3 ch\u1ecdn t\xe0i li\u1ec7u"}),(0,_.jsx)("small",{className:"text-muted",children:"H\u1ed7 tr\u1ee3 c\xe1c \u0111\u1ecbnh d\u1ea1ng: PDF, DOC, DOCX, XLS, XLSX, IMG, JPG, PNG"})]})]}),ne.length>0&&(0,_.jsxs)("div",{className:"mt-3",children:[(0,_.jsxs)("h6",{children:["T\xe0i li\u1ec7u \u0111\xe3 ch\u1ecdn (",ne.length,"):"]}),(0,_.jsx)("ul",{className:"list-group",children:ne.map(e=>(0,_.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,_.jsxs)("span",{children:[(0,_.jsx)("i",{className:"fas fa-file me-2"}),e.name]}),(0,_.jsxs)(i.A,{bg:"secondary",children:[(e.size/1024).toFixed(2)," KB"]})]},e.id))})]})]}),(0,_.jsxs)(u.A.Footer,{children:[(0,_.jsx)(r.A,{variant:"secondary",onClick:()=>se(!1),children:"\u0110\xf3ng"}),(0,_.jsx)(r.A,{variant:"primary",onClick:()=>{se(!1),ne.length>0&&P("\u0110\xe3 upload ".concat(ne.length," t\xe0i li\u1ec7u th\xe0nh c\xf4ng!"),"success")},children:"Ho\xe0n t\u1ea5t upload"})]})]}),(0,_.jsxs)(u.A,{show:W,onHide:()=>$(!1),size:"lg",children:[(0,_.jsx)(u.A.Header,{closeButton:!0,children:(0,_.jsx)(u.A.Title,{children:"Th\xeam Kho M\u1edbi"})}),(0,_.jsxs)(u.A.Body,{children:[(0,_.jsxs)("div",{className:"alert alert-info mb-3",children:[(0,_.jsx)("i",{className:"fas fa-info-circle me-2"}),"Form th\xeam kho s\u1ebd \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb t\u1ea1i \u0111\xe2y"]}),(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"M\xe3 Kho"}),(0,_.jsx)(g.A.Control,{type:"text",placeholder:"V\xed d\u1ee5: A1"})]})}),(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"T\xean Kho"}),(0,_.jsx)(g.A.Control,{type:"text",placeholder:"V\xed d\u1ee5: Khu v\u1ef1c A1"})]})})]}),(0,_.jsxs)(d.A,{children:[(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"Di\u1ec7n t\xedch (m\xb2)"}),(0,_.jsx)(g.A.Control,{type:"number",placeholder:"500"})]})}),(0,_.jsx)(o.A,{md:6,children:(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"Gi\xe1 thu\xea (\u0111/m\xb2/th\xe1ng)"}),(0,_.jsx)(g.A.Control,{type:"number",placeholder:"150000"})]})})]}),(0,_.jsxs)(g.A.Group,{className:"mb-3",children:[(0,_.jsx)(g.A.Label,{children:"Tr\u1ea1ng th\xe1i"}),(0,_.jsxs)(g.A.Select,{children:[(0,_.jsx)("option",{value:"available",children:"Ch\u01b0a cho thu\xea"}),(0,_.jsx)("option",{value:"rented",children:"\u0110\xe3 cho thu\xea"}),(0,_.jsx)("option",{value:"deposited",children:"\u0110\xe3 c\u1ecdc"}),(0,_.jsx)("option",{value:"maintenance",children:"B\u1ea3o tr\xec"})]})]})]}),(0,_.jsxs)(u.A.Footer,{children:[(0,_.jsx)(r.A,{variant:"secondary",onClick:()=>$(!1),children:"H\u1ee7y"}),(0,_.jsx)(r.A,{variant:"primary",onClick:()=>$(!1),children:"L\u01b0u Kho"})]})]})]}):(0,_.jsx)(l.A,{className:"mt-5",children:(0,_.jsxs)(c.A,{variant:"danger",className:"text-center",children:[(0,_.jsx)("h4",{children:"Kh\xf4ng t\xecm th\u1ea5y d\u1ef1 \xe1n"}),(0,_.jsxs)("p",{children:["D\u1ef1 \xe1n v\u1edbi ID ",B," kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c \u0111\xe3 b\u1ecb x\xf3a."]}),(0,_.jsx)(r.A,{variant:"primary",onClick:()=>O("/projects"),children:"Quay l\u1ea1i danh s\xe1ch d\u1ef1 \xe1n"})]})})}},3599:(e,s,n)=>{n.d(s,{A:()=>i});var a=n(8187),t=n(8072);function i(e){return"boolean"===typeof e?e?t.A:a.A:e}},3612:(e,s,n)=>{n.d(s,{A:()=>h});var a=n(5043),t=n(6350),i=n(60),l=n(8466),c=n(5901),r=n(5763),d=n(579);const o=e=>{const{id:s,generateChildId:n,onSelect:r,activeKey:o,defaultActiveKey:h,transition:m,mountOnEnter:x,unmountOnExit:j,children:u}=e,[g,p]=(0,t.iC)(o,h,r),v=(0,i.Cc)(s),f=(0,a.useMemo)(()=>n||((e,s)=>v?"".concat(v,"-").concat(s,"-").concat(e):null),[v,n]),b=(0,a.useMemo)(()=>({onSelect:p,activeKey:g,transition:m,mountOnEnter:x||!1,unmountOnExit:j||!1,getControlledId:e=>f(e,"tabpane"),getControllerId:e=>f(e,"tab")}),[p,g,m,x,j,f]);return(0,d.jsx)(l.A.Provider,{value:b,children:(0,d.jsx)(c.A.Provider,{value:p||null,children:u})})};o.Panel=r.A;const h=o},4196:(e,s,n)=>{n.d(s,{A:()=>m});var a=n(9379),t=n(45),i=n(8139),l=n.n(i),c=n(5043),r=n(7852),d=n(579);const o=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],h=c.forwardRef((e,s)=>{let{bsPrefix:n,className:i,striped:c,bordered:h,borderless:m,hover:x,size:j,variant:u,responsive:g}=e,p=(0,t.A)(e,o);const v=(0,r.oU)(n,"table"),f=l()(i,v,u&&"".concat(v,"-").concat(u),j&&"".concat(v,"-").concat(j),c&&"".concat(v,"-").concat("string"===typeof c?"striped-".concat(c):"striped"),h&&"".concat(v,"-bordered"),m&&"".concat(v,"-borderless"),x&&"".concat(v,"-hover")),b=(0,d.jsx)("table",(0,a.A)((0,a.A)({},p),{},{className:f,ref:s}));if(g){let e="".concat(v,"-responsive");return"string"===typeof g&&(e="".concat(e,"-").concat(g)),(0,d.jsx)("div",{className:e,children:b})}return b});h.displayName="Table";const m=h},5328:(e,s,n)=>{n.d(s,{A:()=>p});var a=n(5173),t=n.n(a),i=n(9379),l=n(45),c=n(3612),r=n(3599),d=n(579);const o=["transition"],h=e=>{let{transition:s}=e,n=(0,l.A)(e,o);return(0,d.jsx)(c.A,(0,i.A)((0,i.A)({},n),{},{transition:(0,r.A)(s)}))};h.displayName="TabContainer";const m=h;var x=n(706),j=n(6429);const u={eventKey:t().oneOfType([t().string,t().number]),title:t().node.isRequired,disabled:t().bool,tabClassName:t().string,tabAttrs:t().object},g=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};g.propTypes=u;const p=Object.assign(g,{Container:m,Content:x.A,Pane:j.A})},5763:(e,s,n)=>{n.d(s,{A:()=>j,J:()=>m});var a=n(5043),t=n(8466),i=n(5901),l=n(8187),c=n(579);const r=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],d=["activeKey","getControlledId","getControllerId"],o=["as"];function h(e,s){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(s.indexOf(a)>=0)continue;n[a]=e[a]}return n}function m(e){let{active:s,eventKey:n,mountOnEnter:l,transition:c,unmountOnExit:o,role:m="tabpanel",onEnter:x,onEntering:j,onEntered:u,onExit:g,onExiting:p,onExited:v}=e,f=h(e,r);const b=(0,a.useContext)(t.A);if(!b)return[Object.assign({},f,{role:m}),{eventKey:n,isActive:s,mountOnEnter:l,transition:c,unmountOnExit:o,onEnter:x,onEntering:j,onEntered:u,onExit:g,onExiting:p,onExited:v}];const{activeKey:N,getControlledId:y,getControllerId:A}=b,_=h(b,d),k=(0,i.u)(n);return[Object.assign({},f,{role:m,id:y(n),"aria-labelledby":A(n)}),{eventKey:n,isActive:null==s&&null!=k?(0,i.u)(N)===k:s,transition:c||_.transition,mountOnEnter:null!=l?l:_.mountOnEnter,unmountOnExit:null!=o?o:_.unmountOnExit,onEnter:x,onEntering:j,onEntered:u,onExit:g,onExiting:p,onExited:v}]}const x=a.forwardRef((e,s)=>{let{as:n="div"}=e,a=h(e,o);const[r,{isActive:d,onEnter:x,onEntering:j,onEntered:u,onExit:g,onExiting:p,onExited:v,mountOnEnter:f,unmountOnExit:b,transition:N=l.A}]=m(a);return(0,c.jsx)(t.A.Provider,{value:null,children:(0,c.jsx)(i.A.Provider,{value:null,children:(0,c.jsx)(N,{in:d,onEnter:x,onEntering:j,onEntered:u,onExit:g,onExiting:p,onExited:v,mountOnEnter:f,unmountOnExit:b,children:(0,c.jsx)(n,Object.assign({},r,{ref:s,hidden:!d,"aria-hidden":!d}))})})})});x.displayName="TabPanel";const j=x},6429:(e,s,n)=>{n.d(s,{A:()=>v});var a=n(9379),t=n(45),i=n(8139),l=n.n(i),c=n(5043),r=n(5901),d=n(8466),o=n(5763),h=n(7852),m=n(8072),x=n(3599),j=n(579);const u=["bsPrefix","transition"],g=["className","as"],p=c.forwardRef((e,s)=>{let{bsPrefix:n,transition:i}=e,c=(0,t.A)(e,u);const[p,{isActive:v,onEnter:f,onEntering:b,onEntered:N,onExit:y,onExiting:A,onExited:_,mountOnEnter:k,unmountOnExit:w,transition:C=m.A}]=(0,o.J)((0,a.A)((0,a.A)({},c),{},{transition:(0,x.A)(i)})),{className:T,as:E="div"}=p,S=(0,t.A)(p,g),z=(0,h.oU)(n,"tab-pane");return(0,j.jsx)(d.A.Provider,{value:null,children:(0,j.jsx)(r.A.Provider,{value:null,children:(0,j.jsx)(C,{in:v,onEnter:f,onEntering:b,onEntered:N,onExit:y,onExiting:A,onExited:_,mountOnEnter:k,unmountOnExit:w,children:(0,j.jsx)(E,(0,a.A)((0,a.A)({},S),{},{ref:s,className:l()(T,z,v&&"active")}))})})})});p.displayName="TabPane";const v=p}}]);
//# sourceMappingURL=579.588da948.chunk.js.map
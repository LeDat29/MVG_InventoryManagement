"use strict";(self.webpackChunkkho_mvg_client=self.webpackChunkkho_mvg_client||[]).push([[565],{6565:(e,s,a)=>{a.r(s),a.d(s,{default:()=>_});var t=a(9379),i=a(5043),c=a(1719),n=a(4063),r=a(4282),l=a(8628),d=a(8602),o=a(3519),h=a(3722),m=a(2557),x=a(326),p=a(1072),j=a(5328),u=a(4196),g=a(8789),f=a(5016),y=a(6471),v=a(2550),A=a(579);const _=function(){const{hasPermission:e}=(0,f.As)(),{showSuccess:s,showError:a}=(0,y.hN)(),[_,b]=(0,i.useState)(!0),[N,w]=(0,i.useState)("files"),[k,B]=(0,i.useState)(!1),[C,T]=(0,i.useState)(!1),[D,H]=(0,i.useState)([]),[K,S]=(0,i.useState)([]),[L,P]=(0,i.useState)([]),[z,G]=(0,i.useState)({search:"",category:"",resource_type:""}),M=[{id:1,filename:"hop-dong-abc-logistics.pdf",originalname:"H\u1ee3p \u0111\u1ed3ng ABC Logistics.pdf",mimetype:"application/pdf",size:2048576,resource_type:"contract",resource_id:1,category:"H\u1ee3p \u0111\u1ed3ng ch\xednh",description:"H\u1ee3p \u0111\u1ed3ng thu\xea kho HD240001",uploaded_by:"Admin",uploaded_at:"2024-01-15T10:30:00Z"},{id:2,filename:"bang-ve-kx-bd-001.dwg",originalname:"B\u1ea3n v\u1ebd KX-BD-001.dwg",mimetype:"application/acad",size:5242880,resource_type:"project",resource_id:1,category:"B\u1ea3n v\u1ebd k\u1ef9 thu\u1eadt",description:"M\u1eb7t b\u1eb1ng d\u1ef1 \xe1n B\xecnh D\u01b0\u01a1ng",uploaded_by:"K\u1ef9 thu\u1eadt vi\xean",uploaded_at:"2024-01-10T14:20:00Z"},{id:3,filename:"giay-phep-kd-abc.jpg",originalname:"Gi\u1ea5y ph\xe9p kinh doanh ABC.jpg",mimetype:"image/jpeg",size:1024e3,resource_type:"customer",resource_id:1,category:"Gi\u1ea5y t\u1edd ph\xe1p l\xfd",description:"GPKD c\u1ee7a C\xf4ng ty ABC",uploaded_by:"Admin",uploaded_at:"2024-01-12T09:15:00Z"}],q=[{id:1,category_code:"HD_CHINH",category_name:"H\u1ee3p \u0111\u1ed3ng ch\xednh",category_type:"contract",description:"H\u1ee3p \u0111\u1ed3ng thu\xea kho ch\xednh th\u1ee9c",is_required:!0,sort_order:1},{id:2,category_code:"HD_PHU_LUC",category_name:"Ph\u1ee5 l\u1ee5c h\u1ee3p \u0111\u1ed3ng",category_type:"contract",description:"C\xe1c ph\u1ee5 l\u1ee5c b\u1ed5 sung h\u1ee3p \u0111\u1ed3ng",is_required:!1,sort_order:2},{id:3,category_code:"BANG_VE_KT",category_name:"B\u1ea3n v\u1ebd k\u1ef9 thu\u1eadt",category_type:"project",description:"B\u1ea3n v\u1ebd m\u1eb7t b\u1eb1ng, thi\u1ebft k\u1ebf",is_required:!0,sort_order:1},{id:4,category_code:"GIAY_TO_PL",category_name:"Gi\u1ea5y t\u1edd ph\xe1p l\xfd",category_type:"customer",description:"GPKD, MST, c\xe1c gi\u1ea5y t\u1edd kh\xe1c",is_required:!0,sort_order:1}],I=[{id:1,template_name:"H\u1ee3p \u0111\u1ed3ng thu\xea kho ti\xeau chu\u1ea9n",template_type:"contract",description:"Template chu\u1ea9n cho h\u1ee3p \u0111\u1ed3ng thu\xea kho",placeholders:["{{contract_number}}","{{company_name}}","{{contact_person}}","{{rental_price}}"],created_at:"2024-01-01"},{id:2,template_name:"Th\xf4ng b\xe1o gia h\u1ea1n h\u1ee3p \u0111\u1ed3ng",template_type:"notice",description:"Th\xf4ng b\xe1o nh\u1eafc nh\u1edf gia h\u1ea1n h\u1ee3p \u0111\u1ed3ng",placeholders:["{{contract_number}}","{{end_date}}","{{customer_name}}"],created_at:"2024-01-01"}];(0,i.useEffect)(()=>{setTimeout(()=>{H(M),S(q),P(I),b(!1)},1e3)},[q,M,I]);const{getRootProps:X,getInputProps:F,isDragActive:U}=(0,g.VB)({accept:{"application/pdf":[".pdf"],"image/*":[".png",".jpg",".jpeg"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/acad":[".dwg"],"image/vnd.dwg":[".dwg"]},maxSize:10485760,onDrop:(e,s)=>{s.length>0&&a("M\u1ed9t s\u1ed1 file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 ho\u1eb7c qu\xe1 l\u1edbn (>10MB)"),e.length>0&&V(e)}}),V=async t=>{e("document_upload")?(s("Upload th\xe0nh c\xf4ng ".concat(t.length," file(s)")),B(!1)):a("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n upload t\xe0i li\u1ec7u")},E=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},O=e=>{const s={project:{variant:"primary",label:"D\u1ef1 \xe1n"},customer:{variant:"success",label:"Kh\xe1ch h\xe0ng"},contract:{variant:"warning",label:"H\u1ee3p \u0111\u1ed3ng"},task:{variant:"info",label:"C\xf4ng vi\u1ec7c"}}[e]||{variant:"secondary",label:e};return(0,A.jsx)(n.A,{bg:s.variant,children:s.label})},Z=D.filter(e=>(!z.search||e.originalname.toLowerCase().includes(z.search.toLowerCase())||e.description.toLowerCase().includes(z.search.toLowerCase()))&&(!z.category||e.category===z.category)&&(!z.resource_type||e.resource_type===z.resource_type));return _?(0,A.jsx)(v.A,{text:"\u0110ang t\u1ea3i t\xe0i li\u1ec7u..."}):(0,A.jsxs)(o.A,{fluid:!0,className:"p-4",children:[(0,A.jsx)(p.A,{className:"mb-4",children:(0,A.jsx)(d.A,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"mb-1",children:"Qu\u1ea3n l\xfd H\u1ed3 s\u01a1"}),(0,A.jsx)("p",{className:"text-muted mb-0",children:"Qu\u1ea3n l\xfd t\xe0i li\u1ec7u, m\u1eabu h\u1ee3p \u0111\u1ed3ng v\xe0 danh m\u1ee5c h\u1ed3 s\u01a1"})]}),(0,A.jsxs)("div",{className:"d-flex gap-2",children:[e("document_upload")&&(0,A.jsxs)(r.A,{variant:"primary",onClick:()=>B(!0),children:[(0,A.jsx)("i",{className:"fas fa-upload me-2"}),"Upload t\xe0i li\u1ec7u"]}),e("document_category_create")&&(0,A.jsxs)(r.A,{variant:"outline-primary",onClick:()=>T(!0),children:[(0,A.jsx)("i",{className:"fas fa-plus me-2"}),"Th\xeam danh m\u1ee5c"]})]})]})})}),(0,A.jsxs)(p.A,{className:"mb-4",children:[(0,A.jsx)(d.A,{md:3,children:(0,A.jsx)(l.A,{className:"border-0 shadow-sm",children:(0,A.jsx)(l.A.Body,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h6",{className:"text-muted mb-1",children:"T\u1ed5ng t\xe0i li\u1ec7u"}),(0,A.jsx)("h4",{className:"mb-0 text-primary",children:D.length})]}),(0,A.jsx)("i",{className:"fas fa-file fa-2x text-primary opacity-25"})]})})})}),(0,A.jsx)(d.A,{md:3,children:(0,A.jsx)(l.A,{className:"border-0 shadow-sm",children:(0,A.jsx)(l.A.Body,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h6",{className:"text-muted mb-1",children:"Danh m\u1ee5c"}),(0,A.jsx)("h4",{className:"mb-0 text-success",children:K.length})]}),(0,A.jsx)("i",{className:"fas fa-folder fa-2x text-success opacity-25"})]})})})}),(0,A.jsx)(d.A,{md:3,children:(0,A.jsx)(l.A,{className:"border-0 shadow-sm",children:(0,A.jsx)(l.A.Body,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h6",{className:"text-muted mb-1",children:"Template"}),(0,A.jsx)("h4",{className:"mb-0 text-warning",children:L.length})]}),(0,A.jsx)("i",{className:"fas fa-file-contract fa-2x text-warning opacity-25"})]})})})}),(0,A.jsx)(d.A,{md:3,children:(0,A.jsx)(l.A,{className:"border-0 shadow-sm",children:(0,A.jsx)(l.A.Body,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h6",{className:"text-muted mb-1",children:"Dung l\u01b0\u1ee3ng"}),(0,A.jsx)("h4",{className:"mb-0 text-info",children:E(D.reduce((e,s)=>e+s.size,0))})]}),(0,A.jsx)("i",{className:"fas fa-hdd fa-2x text-info opacity-25"})]})})})})]}),(0,A.jsxs)(l.A,{className:"border-0 shadow-sm",children:[(0,A.jsx)(l.A.Header,{className:"bg-white border-0",children:(0,A.jsx)(j.A.Container,{activeKey:N,onSelect:w,children:(0,A.jsxs)(x.A,{variant:"tabs",className:"border-0",children:[(0,A.jsx)(x.A.Item,{children:(0,A.jsxs)(x.A.Link,{eventKey:"files",children:[(0,A.jsx)("i",{className:"fas fa-file me-2"}),"T\xe0i li\u1ec7u (",D.length,")"]})}),(0,A.jsx)(x.A.Item,{children:(0,A.jsxs)(x.A.Link,{eventKey:"categories",children:[(0,A.jsx)("i",{className:"fas fa-folder me-2"}),"Danh m\u1ee5c (",K.length,")"]})}),(0,A.jsx)(x.A.Item,{children:(0,A.jsxs)(x.A.Link,{eventKey:"templates",children:[(0,A.jsx)("i",{className:"fas fa-file-contract me-2"}),"Template (",L.length,")"]})})]})})}),(0,A.jsx)(l.A.Body,{children:(0,A.jsx)(j.A.Container,{activeKey:N,children:(0,A.jsxs)(j.A.Content,{children:[(0,A.jsxs)(j.A.Pane,{eventKey:"files",children:[(0,A.jsxs)(p.A,{className:"mb-3",children:[(0,A.jsx)(d.A,{md:4,children:(0,A.jsx)(h.A.Control,{type:"text",placeholder:"T\xecm ki\u1ebfm t\xe0i li\u1ec7u...",value:z.search,onChange:e=>G(s=>(0,t.A)((0,t.A)({},s),{},{search:e.target.value}))})}),(0,A.jsx)(d.A,{md:3,children:(0,A.jsxs)(h.A.Select,{value:z.category,onChange:e=>G(s=>(0,t.A)((0,t.A)({},s),{},{category:e.target.value})),children:[(0,A.jsx)("option",{value:"",children:"T\u1ea5t c\u1ea3 danh m\u1ee5c"}),K.map(e=>(0,A.jsx)("option",{value:e.category_name,children:e.category_name},e.id))]})}),(0,A.jsx)(d.A,{md:3,children:(0,A.jsxs)(h.A.Select,{value:z.resource_type,onChange:e=>G(s=>(0,t.A)((0,t.A)({},s),{},{resource_type:e.target.value})),children:[(0,A.jsx)("option",{value:"",children:"T\u1ea5t c\u1ea3 lo\u1ea1i"}),(0,A.jsx)("option",{value:"project",children:"D\u1ef1 \xe1n"}),(0,A.jsx)("option",{value:"customer",children:"Kh\xe1ch h\xe0ng"}),(0,A.jsx)("option",{value:"contract",children:"H\u1ee3p \u0111\u1ed3ng"}),(0,A.jsx)("option",{value:"task",children:"C\xf4ng vi\u1ec7c"})]})}),(0,A.jsx)(d.A,{md:2,children:(0,A.jsxs)(r.A,{variant:"outline-secondary",className:"w-100",onClick:()=>G({search:"",category:"",resource_type:""}),children:[(0,A.jsx)("i",{className:"fas fa-times me-2"}),"X\xf3a b\u1ed9 l\u1ecdc"]})})]}),(0,A.jsx)("div",{className:"table-responsive",children:(0,A.jsxs)(u.A,{hover:!0,children:[(0,A.jsx)("thead",{className:"bg-light",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"T\xe0i li\u1ec7u"}),(0,A.jsx)("th",{children:"Lo\u1ea1i"}),(0,A.jsx)("th",{children:"Danh m\u1ee5c"}),(0,A.jsx)("th",{children:"K\xedch th\u01b0\u1edbc"}),(0,A.jsx)("th",{children:"Ng\u01b0\u1eddi upload"}),(0,A.jsx)("th",{children:"Ng\xe0y upload"}),(0,A.jsx)("th",{children:"Thao t\xe1c"})]})}),(0,A.jsx)("tbody",{children:Z.length>0?Z.map(a=>{return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"d-flex align-items-center",children:[(0,A.jsx)("i",{className:"".concat((t=a.mimetype,t.includes("pdf")?"fas fa-file-pdf text-danger":t.includes("image")?"fas fa-file-image text-success":t.includes("word")?"fas fa-file-word text-primary":t.includes("excel")||t.includes("sheet")?"fas fa-file-excel text-success":t.includes("dwg")||t.includes("acad")?"fas fa-drafting-compass text-info":"fas fa-file text-secondary")," fa-lg me-3")}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"fw-medium",children:a.originalname}),a.description&&(0,A.jsx)("small",{className:"text-muted",children:a.description})]})]})}),(0,A.jsx)("td",{children:O(a.resource_type)}),(0,A.jsx)("td",{children:(0,A.jsx)(n.A,{bg:"outline-secondary",children:a.category})}),(0,A.jsx)("td",{children:E(a.size)}),(0,A.jsx)("td",{children:a.uploaded_by}),(0,A.jsx)("td",{children:new Date(a.uploaded_at).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"btn-group",children:[(0,A.jsx)(r.A,{variant:"outline-primary",size:"sm",onClick:()=>(e=>{s("\u0110ang t\u1ea3i xu\u1ed1ng ".concat(e.originalname))})(a),children:(0,A.jsx)("i",{className:"fas fa-download"})}),e("document_update")&&(0,A.jsx)(r.A,{variant:"outline-secondary",size:"sm",children:(0,A.jsx)("i",{className:"fas fa-edit"})}),e("document_delete")&&(0,A.jsx)(r.A,{variant:"outline-danger",size:"sm",children:(0,A.jsx)("i",{className:"fas fa-trash"})})]})})]},a.id);var t}):(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:7,className:"text-center py-4",children:(0,A.jsxs)("div",{className:"text-muted",children:[(0,A.jsx)("i",{className:"fas fa-folder-open fa-2x mb-3"}),(0,A.jsx)("p",{children:"Kh\xf4ng c\xf3 t\xe0i li\u1ec7u n\xe0o"})]})})})})]})})]}),(0,A.jsx)(j.A.Pane,{eventKey:"categories",children:(0,A.jsx)("div",{className:"table-responsive",children:(0,A.jsxs)(u.A,{hover:!0,children:[(0,A.jsx)("thead",{className:"bg-light",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"Danh m\u1ee5c"}),(0,A.jsx)("th",{children:"Lo\u1ea1i"}),(0,A.jsx)("th",{children:"M\xf4 t\u1ea3"}),(0,A.jsx)("th",{children:"B\u1eaft bu\u1ed9c"}),(0,A.jsx)("th",{children:"Th\u1ee9 t\u1ef1"}),(0,A.jsx)("th",{children:"Thao t\xe1c"})]})}),(0,A.jsx)("tbody",{children:K.map(s=>(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"fw-bold",children:s.category_name}),(0,A.jsx)("small",{className:"text-muted",children:s.category_code})]})}),(0,A.jsx)("td",{children:O(s.category_type)}),(0,A.jsx)("td",{children:s.description}),(0,A.jsx)("td",{children:s.is_required?(0,A.jsx)(n.A,{bg:"danger",children:"B\u1eaft bu\u1ed9c"}):(0,A.jsx)(n.A,{bg:"secondary",children:"T\xf9y ch\u1ecdn"})}),(0,A.jsx)("td",{children:s.sort_order}),(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"btn-group",children:[e("document_category_update")&&(0,A.jsx)(r.A,{variant:"outline-secondary",size:"sm",children:(0,A.jsx)("i",{className:"fas fa-edit"})}),e("document_category_delete")&&(0,A.jsx)(r.A,{variant:"outline-danger",size:"sm",children:(0,A.jsx)("i",{className:"fas fa-trash"})})]})})]},s.id))})]})})}),(0,A.jsx)(j.A.Pane,{eventKey:"templates",children:(0,A.jsx)(p.A,{children:L.map(t=>(0,A.jsx)(d.A,{md:6,className:"mb-3",children:(0,A.jsx)(l.A,{className:"border",children:(0,A.jsxs)(l.A.Body,{children:[(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,A.jsx)("h6",{className:"mb-0",children:t.template_name}),(0,A.jsx)(n.A,{bg:"info",children:t.template_type})]}),(0,A.jsx)("p",{className:"text-muted small mb-2",children:t.description}),(0,A.jsxs)("div",{className:"mb-3",children:[(0,A.jsx)("small",{className:"text-muted",children:"Placeholders:"}),(0,A.jsx)("div",{children:t.placeholders.map((e,s)=>(0,A.jsx)(n.A,{bg:"outline-secondary",className:"me-1 mb-1",children:e},s))})]}),(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,A.jsx)("small",{className:"text-muted",children:new Date(t.created_at).toLocaleDateString("vi-VN")}),(0,A.jsxs)("div",{className:"btn-group",children:[(0,A.jsxs)(r.A,{variant:"primary",size:"sm",onClick:()=>(t=>{e("contract_generate")?s("\u0110ang t\u1ea1o h\u1ee3p \u0111\u1ed3ng t\u1eeb template: ".concat(t.template_name)):a("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n t\u1ea1o h\u1ee3p \u0111\u1ed3ng t\u1eeb template")})(t),children:[(0,A.jsx)("i",{className:"fas fa-file-contract me-1"}),"T\u1ea1o H\u0110"]}),e("template_update")&&(0,A.jsx)(r.A,{variant:"outline-secondary",size:"sm",children:(0,A.jsx)("i",{className:"fas fa-edit"})})]})]})]})})},t.id))})})]})})})]}),(0,A.jsxs)(m.A,{show:k,onHide:()=>B(!1),size:"lg",children:[(0,A.jsx)(m.A.Header,{closeButton:!0,children:(0,A.jsx)(m.A.Title,{children:"Upload t\xe0i li\u1ec7u"})}),(0,A.jsx)(m.A.Body,{children:(0,A.jsxs)("div",(0,t.A)((0,t.A)({},X()),{},{className:"border-2 border-dashed rounded p-4 text-center ".concat(U?"border-primary bg-light":"border-secondary"),style:{minHeight:"200px",cursor:"pointer"},children:[(0,A.jsx)("input",(0,t.A)({},F())),(0,A.jsx)("i",{className:"fas fa-cloud-upload-alt fa-3x text-muted mb-3"}),(0,A.jsx)("h5",{children:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y ho\u1eb7c click \u0111\u1ec3 ch\u1ecdn"}),(0,A.jsx)("p",{className:"text-muted",children:"H\u1ed7 tr\u1ee3: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG, DWG (t\u1ed1i \u0111a 10MB)"})]}))})]}),(0,A.jsxs)(m.A,{show:C,onHide:()=>T(!1),children:[(0,A.jsx)(m.A.Header,{closeButton:!0,children:(0,A.jsx)(m.A.Title,{children:"Th\xeam danh m\u1ee5c m\u1edbi"})}),(0,A.jsx)(m.A.Body,{children:(0,A.jsxs)(c.A,{variant:"info",children:[(0,A.jsx)("i",{className:"fas fa-info-circle me-2"}),"Form t\u1ea1o danh m\u1ee5c s\u1ebd \u0111\u01b0\u1ee3c ph\xe1t tri\u1ec3n \u1edf phi\xean b\u1ea3n ti\u1ebfp theo"]})}),(0,A.jsxs)(m.A.Footer,{children:[(0,A.jsx)(r.A,{variant:"secondary",onClick:()=>T(!1),children:"\u0110\xf3ng"}),(0,A.jsx)(r.A,{variant:"primary",children:"Th\xeam danh m\u1ee5c"})]})]})]})}}}]);
//# sourceMappingURL=565.503518f4.chunk.js.map
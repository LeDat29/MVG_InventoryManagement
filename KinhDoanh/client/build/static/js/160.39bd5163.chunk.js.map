{"version":3,"file":"static/js/160.39bd5163.chunk.js","mappings":"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","sources":["../node_modules/react-bootstrap/esm/Container.js","pages/Users/UserManagement.js","components/Users/PermissionManager.js"],"sourcesContent":["\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Container = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  fluid = false,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  className,\n  ...props\n}, ref) => {\n  const prefix = useBootstrapPrefix(bsPrefix, 'container');\n  const suffix = typeof fluid === 'string' ? `-${fluid}` : '-fluid';\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, fluid ? `${prefix}${suffix}` : prefix)\n  });\n});\nContainer.displayName = 'Container';\nexport default Container;","/**\r\n * User Management Page - KHO MVG\r\n * Phân hệ 2.4 - Quản lý User nâng cao\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Container, Row, Col, Card, Button, Table, Badge, Form, Modal, Alert, Tab, Nav } from 'react-bootstrap';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport PermissionManager from '../../components/Users/PermissionManager';\r\nimport AIConfigManager from '../../components/Users/AIConfigManagerComplete';\r\nimport axios from 'axios';\r\n\r\nfunction UserManagement() {\r\n  const { isAdmin, hasPermission } = useAuth();\r\n  const { showSuccess, showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(true);\r\n  const [users, setUsers] = useState([]);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [showUserModal, setShowUserModal] = useState(false);\r\n  const [showPermissionModal, setShowPermissionModal] = useState(false);\r\n  const [showAIConfigModal, setShowAIConfigModal] = useState(false);\r\n  // const [showActivityModal, setShowActivityModal] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('list');\r\n\r\n  // Filter states\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    role: '',\r\n    page: 1,\r\n    limit: 20\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (hasPermission('user_view') || isAdmin()) {\r\n      loadUsers();\r\n    }\r\n  }, [filters]);\r\n\r\n  const loadUsers = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      console.log('Loading users with token:', token ? 'Present' : 'Missing');\r\n      console.log('Filters:', filters);\r\n      \r\n      const response = await axios.get('/api/users', { \r\n        params: filters,\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      console.log('Users API response:', response.data);\r\n      \r\n      if (response.data.success) {\r\n        setUsers(response.data.data.users || []);\r\n      } else {\r\n        throw new Error(response.data.message || 'Failed to load users');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading users:', error);\r\n      showError(error.response?.data?.message || error.message || 'Lỗi tải danh sách người dùng');\r\n      setUsers([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [filters, showError]);\r\n\r\n  useEffect(() => {\r\n    if (hasPermission('user_read') || isAdmin) {\r\n      loadUsers();\r\n    }\r\n  }, [hasPermission, isAdmin, loadUsers]);\r\n\r\n  const handleViewUser = async (userId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Viewing user:', userId);\r\n      \r\n      const response = await axios.get(`/api/users/${userId}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      console.log('User details response:', response.data);\r\n      \r\n      setSelectedUser(response.data.data || response.data.user);\r\n      setShowUserModal(true);\r\n    } catch (error) {\r\n      console.error('Error viewing user:', error);\r\n      showError(error.response?.data?.message || 'Lỗi tải thông tin người dùng');\r\n    }\r\n  };\r\n\r\n  const handleShowPermissions = async (userId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Loading permissions for user:', userId);\r\n      \r\n      // Get user info first\r\n      const response = await axios.get(`/api/users/${userId}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      console.log('User permissions response:', response.data);\r\n      \r\n      if (response.data.success) {\r\n        const userData = response.data.data;\r\n        console.log('Setting selected user data:', userData);\r\n        setSelectedUser(userData);\r\n        setShowPermissionModal(true);\r\n      } else {\r\n        throw new Error('Failed to load user data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading user permissions:', error);\r\n      showError(error.response?.data?.message || 'Lỗi tải quyền hạn người dùng');\r\n    }\r\n  };\r\n\r\n  const handleShowAIConfigs = async (userId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Loading AI configs for user:', userId);\r\n      \r\n      // Get user info first\r\n      const userResponse = await axios.get(`/api/users/${userId}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      // Then try to get AI configs\r\n      try {\r\n        const aiResponse = await axios.get(`/api/ai-assistant/user-configs`, {\r\n          params: { user_id: userId },\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        setSelectedUser({\r\n          ...userResponse.data.data,\r\n          ai_configurations: aiResponse.data.data || []\r\n        });\r\n      } catch (aiError) {\r\n        console.log('AI configs endpoint not found, using basic user data');\r\n        setSelectedUser(userResponse.data.data);\r\n      }\r\n      \r\n      setShowAIConfigModal(true);\r\n    } catch (error) {\r\n      console.error('Error loading AI configs:', error);\r\n      showError(error.response?.data?.message || 'Lỗi tải cấu hình AI');\r\n    }\r\n  };\r\n\r\n  const handleShowActivity = async (userId) => {\r\n    try {\r\n      const response = await axios.get(`/api/users/${userId}/activity-logs`);\r\n      setSelectedUser(prev => ({\r\n        ...prev,\r\n        activity_logs: response.data.data.logs\r\n      }));\r\n      // setShowActivityModal(true);\r\n    } catch (error) {\r\n      showError('Lỗi tải lịch sử hoạt động');\r\n    }\r\n  };\r\n\r\n  // Add AI configuration for user\r\n  // const handleAddAIConfig = async (userId, configData) => {\r\n  //   try {\r\n  //     await axios.post(`/api/users/${userId}/ai-configs`, configData);\r\n  //     showSuccess('Thêm cấu hình AI thành công');\r\n  //     handleShowAIConfigs(userId); // Refresh configs\r\n  //   } catch (error) {\r\n  //     showError(error.response?.data?.message || 'Lỗi thêm cấu hình AI');\r\n  //   }\r\n  // };\r\n\r\n  const getRoleBadge = (role) => {\r\n    const roleMap = {\r\n      admin: { variant: 'danger', label: 'Admin' },\r\n      manager: { variant: 'success', label: 'Manager' },\r\n      staff: { variant: 'primary', label: 'Staff' },\r\n      viewer: { variant: 'secondary', label: 'Viewer' }\r\n    };\r\n    \r\n    const roleInfo = roleMap[role] || { variant: 'secondary', label: role };\r\n    return <Badge bg={roleInfo.variant}>{roleInfo.label}</Badge>;\r\n  };\r\n\r\n  const getStatusBadge = (isActive) => {\r\n    return isActive ? \r\n      <Badge bg=\"success\">Hoạt động</Badge> : \r\n      <Badge bg=\"secondary\">Vô hiệu hóa</Badge>;\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner text=\"Đang tải danh sách người dùng...\" />;\r\n  }\r\n\r\n  if (!isAdmin() && !hasPermission('user_view')) {\r\n    return (\r\n      <Container className=\"mt-5\">\r\n        <Alert variant=\"danger\" className=\"text-center\">\r\n          <h4>Không có quyền truy cập</h4>\r\n          <p>Bạn không có quyền quản lý người dùng.</p>\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"p-4\">\r\n      {/* Page Header */}\r\n      <Row className=\"mb-4\">\r\n        <Col>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <div>\r\n              <h2 className=\"mb-1\">Quản lý Người dùng</h2>\r\n              <p className=\"text-muted mb-0\">\r\n                Phân hệ 2.4 - Quản lý người dùng và phân quyền nâng cao\r\n              </p>\r\n            </div>\r\n            {hasPermission('user_create') && (\r\n              <Button variant=\"primary\">\r\n                <i className=\"fas fa-plus me-2\"></i>\r\n                Thêm người dùng\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Tabs */}\r\n      <Card className=\"border-0 shadow-sm\">\r\n        <Card.Header className=\"bg-white border-0\">\r\n          <Nav variant=\"tabs\" className=\"border-0\" activeKey={activeTab} onSelect={setActiveTab}>\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"list\">\r\n                <i className=\"fas fa-users me-2\"></i>\r\n                Danh sách người dùng\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n            {isAdmin() && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"activity\">\r\n                  <i className=\"fas fa-history me-2\"></i>\r\n                  Lịch sử hoạt động\r\n                </Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"ai-stats\">\r\n                <i className=\"fas fa-robot me-2\"></i>\r\n                Thống kê AI\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          </Nav>\r\n        </Card.Header>\r\n\r\n        <Card.Body>\r\n          <Tab.Content>\r\n            {/* User List Tab */}\r\n            <Tab.Pane eventKey=\"list\" className={activeTab === 'list' ? 'show active' : ''}>\r\n              {/* Filters */}\r\n              <Row className=\"mb-3\">\r\n                <Col md={4}>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    placeholder=\"Tìm kiếm người dùng...\"\r\n                    value={filters.search}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                  />\r\n                </Col>\r\n                <Col md={3}>\r\n                  <Form.Select\r\n                    value={filters.role}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, role: e.target.value }))}\r\n                  >\r\n                    <option value=\"\">Tất cả vai trò</option>\r\n                    <option value=\"admin\">Admin</option>\r\n                    <option value=\"manager\">Manager</option>\r\n                    <option value=\"staff\">Staff</option>\r\n                    <option value=\"viewer\">Viewer</option>\r\n                  </Form.Select>\r\n                </Col>\r\n                <Col md={3}>\r\n                  <Button variant=\"outline-secondary\" onClick={() => setFilters({ search: '', role: '', page: 1, limit: 20 })}>\r\n                    <i className=\"fas fa-times me-2\"></i>\r\n                    Xóa bộ lọc\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n\r\n              {/* Users Table */}\r\n              <div className=\"table-responsive\">\r\n                <Table hover>\r\n                  <thead className=\"bg-light\">\r\n                    <tr>\r\n                      <th>Người dùng</th>\r\n                      <th>Vai trò</th>\r\n                      <th>Trạng thái</th>\r\n                      <th>Dự án được gán</th>\r\n                      <th>AI Configs</th>\r\n                      <th>Hoạt động cuối</th>\r\n                      <th>Thao tác</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {users.map((userItem) => (\r\n                      <tr key={userItem.id}>\r\n                        <td>\r\n                          <div>\r\n                            <div className=\"fw-bold\">{userItem.full_name}</div>\r\n                            <small className=\"text-muted\">\r\n                              {userItem.username} • {userItem.email}\r\n                            </small>\r\n                          </div>\r\n                        </td>\r\n                        <td>{getRoleBadge(userItem.role)}</td>\r\n                        <td>{getStatusBadge(userItem.is_active)}</td>\r\n                        <td>\r\n                          <Badge bg=\"info\">{userItem.assigned_projects || 0}</Badge>\r\n                        </td>\r\n                        <td>\r\n                          <Badge bg=\"warning\">{userItem.ai_configs_count || 0}</Badge>\r\n                        </td>\r\n                        <td>\r\n                          {userItem.last_activity ? \r\n                            new Date(userItem.last_activity).toLocaleDateString('vi-VN') : \r\n                            'Chưa có'\r\n                          }\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"btn-group\">\r\n                            <Button\r\n                              variant=\"outline-primary\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleViewUser(userItem.id)}\r\n                            >\r\n                              <i className=\"fas fa-eye\"></i>\r\n                            </Button>\r\n                            \r\n                            {hasPermission('user_permissions_manage') && (\r\n                              <Button\r\n                                variant=\"outline-success\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleShowPermissions(userItem.id)}\r\n                                title=\"Quản lý quyền hạn\"\r\n                              >\r\n                                <i className=\"fas fa-key\"></i>\r\n                              </Button>\r\n                            )}\r\n                            \r\n                            {hasPermission('user_ai_manage') && (\r\n                              <Button\r\n                                variant=\"outline-warning\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleShowAIConfigs(userItem.id)}\r\n                                title=\"Cấu hình AI\"\r\n                              >\r\n                                <i className=\"fas fa-robot\"></i>\r\n                              </Button>\r\n                            )}\r\n                            \r\n                            {(isAdmin() || hasPermission('user_logs_view')) && (\r\n                              <Button\r\n                                variant=\"outline-info\"\r\n                                size=\"sm\"\r\n                                onClick={() => handleShowActivity(userItem.id)}\r\n                                title=\"Lịch sử hoạt động\"\r\n                              >\r\n                                <i className=\"fas fa-history\"></i>\r\n                              </Button>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              </div>\r\n            </Tab.Pane>\r\n\r\n            {/* Activity Log Tab (Admin only) */}\r\n            {isAdmin() && (\r\n              <Tab.Pane eventKey=\"activity\" className={activeTab === 'activity' ? 'show active' : ''}>\r\n                <Alert variant=\"info\">\r\n                  <i className=\"fas fa-info-circle me-2\"></i>\r\n                  Tính năng xem lịch sử hoạt động tổng hợp sẽ được triển khai ở component riêng\r\n                </Alert>\r\n              </Tab.Pane>\r\n            )}\r\n\r\n            {/* AI Statistics Tab */}\r\n            <Tab.Pane eventKey=\"ai-stats\" className={activeTab === 'ai-stats' ? 'show active' : ''}>\r\n              <Row>\r\n                <Col md={4}>\r\n                  <Card className=\"border-0 shadow-sm text-center\">\r\n                    <Card.Body>\r\n                      <i className=\"fas fa-users fa-2x text-primary mb-2\"></i>\r\n                      <h4 className=\"mb-1\">{users.filter(u => u.ai_configs_count > 0).length}</h4>\r\n                      <p className=\"text-muted mb-0\">Users có AI config</p>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n                <Col md={4}>\r\n                  <Card className=\"border-0 shadow-sm text-center\">\r\n                    <Card.Body>\r\n                      <i className=\"fas fa-robot fa-2x text-success mb-2\"></i>\r\n                      <h4 className=\"mb-1\">{users.reduce((sum, u) => sum + (u.ai_configs_count || 0), 0)}</h4>\r\n                      <p className=\"text-muted mb-0\">Tổng AI configs</p>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n                <Col md={4}>\r\n                  <Card className=\"border-0 shadow-sm text-center\">\r\n                    <Card.Body>\r\n                      <i className=\"fas fa-chart-line fa-2x text-warning mb-2\"></i>\r\n                      <h4 className=\"mb-1\">$0.00</h4>\r\n                      <p className=\"text-muted mb-0\">Chi phí AI tháng này</p>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n              </Row>\r\n\r\n              <Card className=\"mt-4\">\r\n                <Card.Header>\r\n                  <h6 className=\"mb-0\">Phân bố AI Providers</h6>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                  <Alert variant=\"info\">\r\n                    Chart thống kê AI providers sẽ được triển khai với dữ liệu thực tế\r\n                  </Alert>\r\n                </Card.Body>\r\n              </Card>\r\n            </Tab.Pane>\r\n          </Tab.Content>\r\n        </Card.Body>\r\n      </Card>\r\n\r\n      {/* User Detail Modal */}\r\n      <Modal show={showUserModal} onHide={() => setShowUserModal(false)} size=\"lg\">\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Chi tiết người dùng</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {selectedUser && (\r\n            <Row>\r\n              <Col md={6}>\r\n                <h6>Thông tin cơ bản</h6>\r\n                <div className=\"info-group\">\r\n                  <div><strong>Tên:</strong> {selectedUser.user.full_name}</div>\r\n                  <div><strong>Username:</strong> {selectedUser.user.username}</div>\r\n                  <div><strong>Email:</strong> {selectedUser.user.email}</div>\r\n                  <div><strong>Vai trò:</strong> {getRoleBadge(selectedUser.user.role)}</div>\r\n                  <div><strong>Trạng thái:</strong> {getStatusBadge(selectedUser.user.is_active)}</div>\r\n                </div>\r\n              </Col>\r\n              <Col md={6}>\r\n                <h6>Thống kê</h6>\r\n                <div className=\"info-group\">\r\n                  <div><strong>Dự án được gán:</strong> {selectedUser.project_permissions?.length || 0}</div>\r\n                  <div><strong>AI Configs:</strong> {selectedUser.ai_configurations?.length || 0}</div>\r\n                  <div><strong>Ngày tạo:</strong> {new Date(selectedUser.user.created_at).toLocaleDateString('vi-VN')}</div>\r\n                  <div><strong>Đăng nhập cuối:</strong> {selectedUser.user.last_login ? new Date(selectedUser.user.last_login).toLocaleDateString('vi-VN') : 'Chưa có'}</div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowUserModal(false)}>\r\n            Đóng\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* AI Configuration Manager - Phân hệ 2.4.3 */}\r\n      <AIConfigManager\r\n        user={selectedUser}\r\n        userId={selectedUser?.user?.id || selectedUser?.id}\r\n        show={showAIConfigModal}\r\n        onHide={() => {\r\n          setShowAIConfigModal(false);\r\n          setSelectedUser(null);\r\n        }}\r\n        onSave={() => {\r\n          loadUsers();\r\n          showSuccess('Cấu hình AI đã được cập nhật thành công!');\r\n        }}\r\n      />\r\n\r\n      {/* Permission Manager Modal */}\r\n      <PermissionManager\r\n        user={selectedUser}\r\n        userId={selectedUser?.user?.id || selectedUser?.id}\r\n        show={showPermissionModal}\r\n        onHide={() => {\r\n          setShowPermissionModal(false);\r\n          setSelectedUser(null);\r\n        }}\r\n        onSave={() => {\r\n          loadUsers();\r\n          showSuccess('Cập nhật quyền hạn thành công!');\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default UserManagement;","/**\r\n * Permission Manager Component\r\n * Quản lý quyền hạn user vào từng dự án và chức năng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Modal, Button, Form, Table, Badge, Alert, Tabs, Tab } from 'react-bootstrap';\r\nimport './PermissionManager.css';\r\n\r\nconst SYSTEM_PERMISSIONS = [\r\n  { key: 'all', label: 'Toàn quyền', description: 'Quyền admin - truy cập tất cả', color: 'danger' },\r\n  { key: 'project_view', label: 'Xem dự án', description: 'Xem thông tin dự án', color: 'info' },\r\n  { key: 'project_edit', label: 'Sửa dự án', description: 'Chỉnh sửa thông tin dự án', color: 'warning' },\r\n  { key: 'project_delete', label: 'Xóa dự án', description: 'Xóa dự án (nguy hiểm)', color: 'danger' },\r\n  { key: 'customer_view', label: 'Xem khách hàng', description: 'Xem thông tin khách hàng', color: 'info' },\r\n  { key: 'customer_edit', label: 'Sửa khách hàng', description: 'Chỉnh sửa khách hàng', color: 'warning' },\r\n  { key: 'contract_view', label: 'Xem hợp đồng', description: 'Xem hợp đồng', color: 'info' },\r\n  { key: 'contract_edit', label: 'Sửa hợp đồng', description: 'Chỉnh sửa hợp đồng', color: 'warning' },\r\n  { key: 'document_view', label: 'Xem tài liệu', description: 'Xem tài liệu', color: 'info' },\r\n  { key: 'document_upload', label: 'Upload tài liệu', description: 'Upload file tài liệu', color: 'warning' },\r\n  { key: 'user_view', label: 'Xem users', description: 'Xem danh sách users', color: 'info' },\r\n  { key: 'user_manage', label: 'Quản lý users', description: 'Tạo/sửa/xóa users', color: 'danger' },\r\n  { key: 'report_view', label: 'Xem báo cáo', description: 'Xem các báo cáo', color: 'info' },\r\n  { key: 'ai_use', label: 'Sử dụng AI', description: 'Sử dụng AI chatbot', color: 'primary' }\r\n];\r\n\r\nconst PROJECT_PERMISSIONS = [\r\n  { key: 'view', label: 'Xem', description: 'Xem thông tin dự án', color: 'info' },\r\n  { key: 'edit', label: 'Sửa', description: 'Chỉnh sửa dự án', color: 'warning' },\r\n  { key: 'manage_zones', label: 'Quản lý zones', description: 'Thêm/sửa/xóa zones', color: 'primary' },\r\n  { key: 'manage_contracts', label: 'Quản lý hợp đồng', description: 'Tạo/sửa hợp đồng', color: 'success' },\r\n  { key: 'view_financials', label: 'Xem tài chính', description: 'Xem thông tin tài chính', color: 'warning' }\r\n];\r\n\r\nfunction PermissionManager({ user, userId, show, onHide, onSave }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  \r\n  // System permissions\r\n  const [systemPermissions, setSystemPermissions] = useState([]);\r\n  \r\n  // Project assignments\r\n  const [projectAssignments, setProjectAssignments] = useState([]);\r\n  const [availableProjects, setAvailableProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState('');\r\n  const [, /* setProjectPermissions */] = useState([]);\r\n  \r\n  const [activeTab, setActiveTab] = useState('system');\r\n\r\n  // Load data khi mở modal\r\n\r\n  useEffect(() => {\r\n    const currentUserId = userId || user?.id;\r\n    if (show && currentUserId) {\r\n      loadUserPermissions();\r\n      loadAvailableProjects();\r\n    }\r\n  }, [show, userId, user?.id]); // Removed loadUserPermissions dependency\r\n\r\n  const loadUserPermissions = useCallback(async () => {\r\n    try {\r\n      const currentUserId = userId || user?.id;\r\n      console.log('Loading permissions for user ID:', currentUserId);\r\n      \r\n      if (!currentUserId) {\r\n        throw new Error('User ID not found');\r\n      }\r\n      \r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/users/${currentUserId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('User permissions data:', data);\r\n      \r\n      if (data.success) {\r\n        // System permissions\r\n        const userData = data.data?.user || data.data;\r\n        setSystemPermissions(userData.permissions || []);\r\n        \r\n        // Project permissions\r\n        setProjectAssignments(data.data?.project_permissions || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading permissions:', error);\r\n      setError('Không thể tải quyền hạn: ' + error.message);\r\n    }\r\n  }, [userId, user?.id]);\r\n\r\n  const loadAvailableProjects = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Loading available projects...');\r\n      \r\n      const response = await fetch('/api/projects?limit=1000', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setAvailableProjects(data.data.projects || []);\r\n          console.log('Projects loaded:', data.data.projects?.length || 0);\r\n        }\r\n      } else {\r\n        console.warn('Projects API not available:', response.status);\r\n        // Projects API might not be implemented yet, use empty array\r\n        setAvailableProjects([]);\r\n      }\r\n    } catch (error) {\r\n      console.warn('Error loading projects:', error.message);\r\n      // Don't show error for projects as it's optional\r\n      setAvailableProjects([]);\r\n    }\r\n  };\r\n\r\n  const handleSystemPermissionToggle = (permissionKey) => {\r\n    if (systemPermissions.includes('all') && permissionKey !== 'all') {\r\n      // Nếu có quyền 'all', không cho toggle individual permissions\r\n      return;\r\n    }\r\n    \r\n    setSystemPermissions(prev => {\r\n      if (permissionKey === 'all') {\r\n        // Toggle 'all' sẽ clear tất cả permissions khác\r\n        return prev.includes('all') ? [] : ['all'];\r\n      }\r\n      \r\n      if (prev.includes(permissionKey)) {\r\n        return prev.filter(p => p !== permissionKey);\r\n      } else {\r\n        return [...prev, permissionKey];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleAddProjectAssignment = () => {\r\n    if (!selectedProject) {\r\n      setError('Vui lòng chọn dự án');\r\n      return;\r\n    }\r\n    \r\n    // Check nếu đã assign rồi\r\n    if (projectAssignments.some(pa => pa.project_id === parseInt(selectedProject))) {\r\n      setError('Dự án này đã được assign');\r\n      return;\r\n    }\r\n    \r\n    const project = availableProjects.find(p => p.id === parseInt(selectedProject));\r\n    \r\n    setProjectAssignments(prev => [...prev, {\r\n      project_id: parseInt(selectedProject),\r\n      project_name: project.name,\r\n      permissions: ['view'] // Default permission\r\n    }]);\r\n    \r\n    setSelectedProject('');\r\n    setError('');\r\n  };\r\n\r\n  const handleRemoveProjectAssignment = (projectId) => {\r\n    setProjectAssignments(prev => prev.filter(pa => pa.project_id !== projectId));\r\n  };\r\n\r\n  const handleProjectPermissionToggle = (projectId, permissionKey) => {\r\n    setProjectAssignments(prev => prev.map(pa => {\r\n      if (pa.project_id === projectId) {\r\n        const perms = pa.permissions || [];\r\n        if (perms.includes(permissionKey)) {\r\n          return { ...pa, permissions: perms.filter(p => p !== permissionKey) };\r\n        } else {\r\n          return { ...pa, permissions: [...perms, permissionKey] };\r\n        }\r\n      }\r\n      return pa;\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccess('');\r\n    \r\n    try {\r\n      const currentUserId = userId || user?.id;\r\n      console.log('Saving permissions for user ID:', currentUserId);\r\n      \r\n      if (!currentUserId) {\r\n        throw new Error('User ID not found');\r\n      }\r\n      \r\n      const token = localStorage.getItem('token');\r\n      \r\n      // Save system permissions\r\n      console.log('Saving system permissions:', systemPermissions);\r\n      const systemResponse = await fetch(`/api/users/${currentUserId}/permissions`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          permissions: systemPermissions\r\n        })\r\n      });\r\n      \r\n      if (!systemResponse.ok) {\r\n        const errorData = await systemResponse.json().catch(() => ({}));\r\n        throw new Error(errorData.message || 'Không thể cập nhật quyền hệ thống');\r\n      }\r\n      \r\n      // Save project assignments (if any)\r\n      if (projectAssignments.length > 0) {\r\n        console.log('Saving project permissions:', projectAssignments);\r\n        const projectResponse = await fetch(`/api/users/${currentUserId}/project-permissions`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            projects: projectAssignments.map(pa => ({\r\n              project_id: pa.project_id,\r\n              permissions: pa.permissions\r\n            }))\r\n          })\r\n        });\r\n        \r\n        if (!projectResponse.ok) {\r\n          const errorData = await projectResponse.json().catch(() => ({}));\r\n          throw new Error(errorData.message || 'Không thể cập nhật quyền dự án');\r\n        }\r\n      }\r\n      \r\n      setSuccess('Cập nhật quyền hạn thành công!');\r\n      \r\n      setTimeout(() => {\r\n        if (onSave) onSave();\r\n        onHide();\r\n      }, 1500);\r\n      \r\n    } catch (error) {\r\n      console.error('Error saving permissions:', error);\r\n      setError(error.message || 'Có lỗi xảy ra khi lưu quyền hạn');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const hasAllPermission = systemPermissions.includes('all');\r\n\r\n  return (\r\n    <Modal show={show} onHide={onHide} size=\"xl\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <i className=\"bi bi-shield-lock\"></i> Quản lý quyền hạn\r\n          {user && (\r\n            <div className=\"text-muted\" style={{ fontSize: '14px', marginTop: '4px' }}>\r\n              User: <strong>{user.username}</strong> - {user.full_name}\r\n            </div>\r\n          )}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      \r\n      <Modal.Body style={{ maxHeight: '70vh', overflowY: 'auto' }}>\r\n        {error && <Alert variant=\"danger\" onClose={() => setError('')} dismissible>{error}</Alert>}\r\n        {success && <Alert variant=\"success\">{success}</Alert>}\r\n        \r\n        <Tabs activeKey={activeTab} onSelect={setActiveTab} className=\"mb-3\">\r\n          {/* System Permissions Tab */}\r\n          <Tab eventKey=\"system\" title={\r\n            <span>\r\n              <i className=\"bi bi-gear-fill\"></i> Quyền hệ thống\r\n              <Badge bg=\"primary\" className=\"ms-2\">{systemPermissions.length}</Badge>\r\n            </span>\r\n          }>\r\n            <div className=\"permission-matrix\">\r\n              {hasAllPermission && (\r\n                <Alert variant=\"warning\">\r\n                  <i className=\"bi bi-exclamation-triangle-fill\"></i> User này có quyền <strong>ADMIN</strong> - truy cập tất cả chức năng\r\n                </Alert>\r\n              )}\r\n              \r\n              <Table hover responsive>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: '50px' }}></th>\r\n                    <th>Quyền</th>\r\n                    <th>Mô tả</th>\r\n                    <th style={{ width: '100px' }}>Trạng thái</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {SYSTEM_PERMISSIONS.map(perm => {\r\n                    const hasPermission = systemPermissions.includes(perm.key);\r\n                    const isDisabled = hasAllPermission && perm.key !== 'all';\r\n                    \r\n                    return (\r\n                      <tr key={perm.key} className={hasPermission ? 'table-active' : ''}>\r\n                        <td>\r\n                          <Form.Check\r\n                            type=\"checkbox\"\r\n                            checked={hasPermission}\r\n                            onChange={() => handleSystemPermissionToggle(perm.key)}\r\n                            disabled={isDisabled}\r\n                          />\r\n                        </td>\r\n                        <td>\r\n                          <strong>{perm.label}</strong>\r\n                          <Badge bg={perm.color} className=\"ms-2\">{perm.key}</Badge>\r\n                        </td>\r\n                        <td className=\"text-muted\">{perm.description}</td>\r\n                        <td>\r\n                          {hasPermission ? (\r\n                            <Badge bg=\"success\">Có quyền</Badge>\r\n                          ) : (\r\n                            <Badge bg=\"secondary\">Không</Badge>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </Table>\r\n            </div>\r\n          </Tab>\r\n          \r\n          {/* Project Assignments Tab */}\r\n          <Tab eventKey=\"projects\" title={\r\n            <span>\r\n              <i className=\"bi bi-building\"></i> Quyền dự án\r\n              <Badge bg=\"success\" className=\"ms-2\">{projectAssignments.length}</Badge>\r\n            </span>\r\n          }>\r\n            {/* Add Project Form */}\r\n            <div className=\"add-project-form mb-4 p-3 border rounded bg-light\">\r\n              <h6 className=\"mb-3\"><i className=\"bi bi-plus-circle\"></i> Assign user vào dự án</h6>\r\n              <div className=\"row g-2 align-items-end\">\r\n                <div className=\"col-md-8\">\r\n                  <Form.Label>Chọn dự án</Form.Label>\r\n                  <Form.Select\r\n                    value={selectedProject}\r\n                    onChange={(e) => setSelectedProject(e.target.value)}\r\n                  >\r\n                    <option value=\"\">-- Chọn dự án --</option>\r\n                    {availableProjects\r\n                      .filter(p => !projectAssignments.some(pa => pa.project_id === p.id))\r\n                      .map(project => (\r\n                        <option key={project.id} value={project.id}>\r\n                          {project.name} ({project.code})\r\n                        </option>\r\n                      ))\r\n                    }\r\n                  </Form.Select>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleAddProjectAssignment}\r\n                    disabled={!selectedProject}\r\n                    className=\"w-100\"\r\n                  >\r\n                    <i className=\"bi bi-plus\"></i> Thêm\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Project List */}\r\n            {projectAssignments.length === 0 ? (\r\n              <Alert variant=\"info\">\r\n                <i className=\"bi bi-info-circle\"></i> User chưa được assign vào dự án nào. \r\n                Sử dụng form bên trên để assign.\r\n              </Alert>\r\n            ) : (\r\n              <div className=\"project-assignments\">\r\n                {projectAssignments.map(pa => {\r\n                  const project = availableProjects.find(p => p.id === pa.project_id);\r\n                  \r\n                  return (\r\n                    <div key={pa.project_id} className=\"project-card mb-3 p-3 border rounded\">\r\n                      <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                        <div>\r\n                          <h6 className=\"mb-1\">\r\n                            <i className=\"bi bi-building\"></i> {pa.project_name || project?.name}\r\n                          </h6>\r\n                          {project && (\r\n                            <small className=\"text-muted\">Code: {project.code}</small>\r\n                          )}\r\n                        </div>\r\n                        <Button\r\n                          variant=\"outline-danger\"\r\n                          size=\"sm\"\r\n                          onClick={() => handleRemoveProjectAssignment(pa.project_id)}\r\n                        >\r\n                          <i className=\"bi bi-trash\"></i> Xóa\r\n                        </Button>\r\n                      </div>\r\n                      \r\n                      <div className=\"permissions-grid\">\r\n                        {PROJECT_PERMISSIONS.map(perm => {\r\n                          const hasPermission = (pa.permissions || []).includes(perm.key);\r\n                          \r\n                          return (\r\n                            <div key={perm.key} className=\"permission-item\">\r\n                              <Form.Check\r\n                                type=\"checkbox\"\r\n                                id={`${pa.project_id}-${perm.key}`}\r\n                                label={\r\n                                  <span>\r\n                                    <strong>{perm.label}</strong>\r\n                                    <br />\r\n                                    <small className=\"text-muted\">{perm.description}</small>\r\n                                  </span>\r\n                                }\r\n                                checked={hasPermission}\r\n                                onChange={() => handleProjectPermissionToggle(pa.project_id, perm.key)}\r\n                              />\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </Tab>\r\n        </Tabs>\r\n      </Modal.Body>\r\n      \r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide} disabled={loading}>\r\n          Hủy\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleSave} disabled={loading}>\r\n          {loading ? (\r\n            <>\r\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n              Đang lưu...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <i className=\"bi bi-save\"></i> Lưu thay đổi\r\n            </>\r\n          )}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default PermissionManager;\r\n"],"names":["_excluded","Container","React","_ref","ref","bsPrefix","fluid","as","Component","className","props","_objectWithoutProperties","prefix","useBootstrapPrefix","suffix","concat","_jsx","_objectSpread","classNames","displayName","_selectedUser$project","_selectedUser$ai_conf","_selectedUser$user","_selectedUser$user2","isAdmin","hasPermission","useAuth","showSuccess","showError","useNotification","loading","setLoading","useState","users","setUsers","selectedUser","setSelectedUser","showUserModal","setShowUserModal","showPermissionModal","setShowPermissionModal","showAIConfigModal","setShowAIConfigModal","activeTab","setActiveTab","filters","setFilters","search","role","page","limit","useEffect","loadUsers","useCallback","async","token","localStorage","getItem","console","log","response","axios","get","params","headers","data","success","Error","message","error","_error$response","_error$response$data","getRoleBadge","roleInfo","admin","variant","label","manager","staff","viewer","Badge","bg","children","getStatusBadge","isActive","LoadingSpinner","text","_jsxs","Row","Col","Button","Card","Header","Nav","activeKey","onSelect","Item","Link","eventKey","Body","Tab","Content","Pane","md","Form","Control","type","placeholder","value","onChange","e","prev","target","Select","onClick","Table","hover","map","userItem","full_name","username","email","is_active","assigned_projects","ai_configs_count","last_activity","Date","toLocaleDateString","size","userId","user","_error$response2","_error$response2$data","handleViewUser","id","userData","_error$response3","_error$response3$data","handleShowPermissions","title","userResponse","aiResponse","user_id","ai_configurations","aiError","_error$response4","_error$response4$data","handleShowAIConfigs","activity_logs","logs","handleShowActivity","Alert","filter","u","length","reduce","sum","Modal","show","onHide","closeButton","Title","project_permissions","created_at","last_login","Footer","AIConfigManager","onSave","PermissionManager","SYSTEM_PERMISSIONS","key","description","color","PROJECT_PERMISSIONS","setError","setSuccess","systemPermissions","setSystemPermissions","projectAssignments","setProjectAssignments","availableProjects","setAvailableProjects","selectedProject","setSelectedProject","currentUserId","loadUserPermissions","loadAvailableProjects","fetch","ok","status","statusText","json","_data$data","_data$data2","permissions","_data$data$projects","projects","warn","hasAllPermission","includes","centered","style","fontSize","marginTop","maxHeight","overflowY","onClose","dismissible","Tabs","responsive","width","perm","isDisabled","Check","checked","handleSystemPermissionToggle","permissionKey","p","disabled","Label","some","pa","project_id","project","name","code","handleAddProjectAssignment","parseInt","find","project_name","handleRemoveProjectAssignment","projectId","handleProjectPermissionToggle","perms","systemResponse","method","body","JSON","stringify","errorData","catch","projectResponse","setTimeout","_Fragment"],"ignoreList":[],"sourceRoot":""}
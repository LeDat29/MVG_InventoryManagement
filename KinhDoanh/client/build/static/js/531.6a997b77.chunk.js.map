{"version":3,"file":"static/js/531.6a997b77.chunk.js","mappings":"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","sources":["services/customerService.js","components/Contracts/ContractCreator.js","services/contractService.js"],"sourcesContent":["/**\r\n * Customer Service - API calls for customer management\r\n */\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\r\n\r\nclass CustomerService {\r\n  async getAuthHeaders(noCache = false) {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    // Debug thông tin auth\r\n    if (!token) {\r\n      console.warn('⚠️ No token found in localStorage');\r\n    } else {\r\n      console.log('✅ Token found, length:', token.length);\r\n    }\r\n    \r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    };\r\n    \r\n    if (noCache) {\r\n      headers['Cache-Control'] = 'no-cache';\r\n      headers['Pragma'] = 'no-cache';\r\n    }\r\n    \r\n    return headers;\r\n  }\r\n\r\n  async handleResponse(response) {\r\n    const data = await response.json();\r\n    \r\n    if (!response.ok) {\r\n      // Debug thông tin chi tiết về lỗi\r\n      console.error('❌ CustomerService API Error:');\r\n      console.error('  Status:', response.status);\r\n      console.error('  Status Text:', response.statusText);\r\n      console.error('  Response Data:', data);\r\n      \r\n      // Kiểm tra lỗi validation cụ thể\r\n      if (response.status === 400 && data.errors) {\r\n        console.error('  Validation Errors:');\r\n        data.errors.forEach(err => {\r\n          console.error(`    - ${err.path || err.param}: ${err.msg}`);\r\n        });\r\n      }\r\n      \r\n      throw new Error(data.message || `HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    return data;\r\n  }\r\n\r\n  // Lấy danh sách khách hàng\r\n  async getCustomers(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders(true) // Force no-cache for fresh data\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy chi tiết khách hàng\r\n  async getCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Tạo khách hàng mới\r\n  async createCustomer(customerData) {\r\n    const response = await fetch(`${API_BASE}/customers`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Cập nhật khách hàng\r\n  async updateCustomer(id, customerData) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(customerData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Xóa khách hàng\r\n  async deleteCustomer(id) {\r\n    const response = await fetch(`${API_BASE}/customers/${id}`, {\r\n      method: 'DELETE',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy hợp đồng của khách hàng\r\n  async getCustomerContracts(customerId, status = null) {\r\n    const params = status ? { status } : {};\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/customers/${customerId}/contracts${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Tạo hợp đồng mới\r\n  async createContract(contractData) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy hợp đồng sắp hết hạn\r\n  async getExpiringContracts(days = 30) {\r\n    const response = await fetch(`${API_BASE}/customers/contracts/expiring?days=${days}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Lấy thống kê khách hàng\r\n  async getCustomerStats() {\r\n    const response = await fetch(`${API_BASE}/customers/stats`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n}\r\n\r\nconst customerService = new CustomerService();\r\nexport default customerService;","/**\r\n * Contract Creator - Tạo hợp đồng từ mẫu với dữ liệu khách hàng\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  Modal, Form, Row, Col, Button, Alert, Tabs, Tab,\r\n  Card \r\n} from 'react-bootstrap';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport contractService from '../../services/contractService';\r\nimport customerService from '../../services/customerService';\r\n\r\nconst ContractCreator = ({ show, onHide, onSuccess }) => {\r\n  const { user } = useAuth();\r\n  const { showSuccess, showError } = useNotification();\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('basic');\r\n  \r\n  // Data states\r\n  const [customers, setCustomers] = useState([]);\r\n  const [templates, setTemplates] = useState([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\r\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\r\n  \r\n  // Form data\r\n  const [formData, setFormData] = useState({\r\n    // Basic contract info\r\n    contract_title: '',\r\n    customer_id: '',\r\n    customer_company_id: '',\r\n    template_id: '',\r\n    \r\n    // Party A (Lessor) - Bên cho thuê\r\n    party_a_name: 'CÔNG TY KHO MVG',\r\n    party_a_address: 'Khu công nghiệp ABC, Bình Dương',\r\n    party_a_representative: 'Nguyễn Văn A',\r\n    party_a_position: 'Giám đốc',\r\n    party_a_id_number: '123456789',\r\n    \r\n    // Contract terms\r\n    warehouse_location: '',\r\n    warehouse_area: 0,\r\n    rental_price: 0,\r\n    deposit_amount: 0,\r\n    service_fee: 0,\r\n    \r\n    // Dates\r\n    start_date: '',\r\n    end_date: '',\r\n    auto_renewal: false,\r\n    renewal_period: 12,\r\n    \r\n    // Payment\r\n    payment_cycle: 'monthly',\r\n    payment_due_date: 5,\r\n    payment_method: 'Chuyển khoản',\r\n    late_fee_percentage: 2.0,\r\n    \r\n    // Additional terms\r\n    special_terms: '',\r\n    notes: '',\r\n    assigned_to: user?.id || '',\r\n    \r\n    // Template variables\r\n    variables: {}\r\n  });\r\n\r\n  const loadInitialData = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Load customers and templates\r\n      const [customersResponse, templatesResponse] = await Promise.all([\r\n        customerService.getCustomers({ limit: 100 }),\r\n        contractService.getContractTemplates({ is_active: true })\r\n      ]);\r\n      \r\n      setCustomers(customersResponse.data.customers || []);\r\n      setTemplates(templatesResponse.data || []);\r\n      \r\n    } catch (error) {\r\n      showError('Không thể tải dữ liệu: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showError]);\r\n\r\n  // Load initial data\r\n  useEffect(() => {\r\n    if (show) {\r\n      loadInitialData();\r\n    }\r\n  }, [show, loadInitialData]);\r\n\r\n  // Handle customer selection\r\n  const handleCustomerSelect = async (customerId) => {\r\n    try {\r\n      const customer = customers.find(c => c.id === parseInt(customerId));\r\n      if (!customer) return;\r\n      \r\n      setSelectedCustomer(customer);\r\n      \r\n      // Load customer details with companies\r\n      const customerResponse = await customerService.getCustomer(customerId);\r\n      const customerData = customerResponse.data;\r\n      \r\n      // Auto-fill contract data\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        customer_id: customerId,\r\n        customer_company_id: customerData.companies?.[0]?.id || '',\r\n        contract_title: `Hợp đồng thuê kho - ${customerData.company_name || customerData.full_name}`,\r\n        variables: {\r\n          ...prev.variables,\r\n          // Auto-fill Party B info\r\n          party_b_name: customerData.companies?.[0]?.company_name || customerData.full_name,\r\n          party_b_address: customerData.companies?.[0]?.invoice_address || customerData.address,\r\n          party_b_representative: customerData.full_name || customerData.contact_person,\r\n          party_b_position: 'Giám đốc',\r\n          party_b_tax_code: customerData.companies?.[0]?.tax_code || '',\r\n          warehouse_purpose: customerData.companies?.[0]?.warehouse_purpose || ''\r\n        }\r\n      }));\r\n      \r\n    } catch (error) {\r\n      showError('Không thể tải thông tin khách hàng: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Handle template selection\r\n  const handleTemplateSelect = (templateId) => {\r\n    const template = templates.find(t => t.id === parseInt(templateId));\r\n    if (!template) return;\r\n    \r\n    setSelectedTemplate(template);\r\n    setFormData(prev => ({ ...prev, template_id: templateId }));\r\n    \r\n    // Parse template variables\r\n    if (template.variables) {\r\n      const templateVars = typeof template.variables === 'string' \r\n        ? JSON.parse(template.variables) \r\n        : template.variables;\r\n      \r\n      // Initialize variables with current form data\r\n      const newVariables = { ...formData.variables };\r\n      templateVars.forEach(variable => {\r\n        if (!newVariables[variable.name]) {\r\n          // Auto-populate common variables\r\n          switch (variable.name) {\r\n            case 'party_a_name':\r\n              newVariables[variable.name] = formData.party_a_name;\r\n              break;\r\n            case 'party_a_representative':\r\n              newVariables[variable.name] = formData.party_a_representative;\r\n              break;\r\n            case 'start_date':\r\n              newVariables[variable.name] = formData.start_date;\r\n              break;\r\n            case 'end_date':\r\n              newVariables[variable.name] = formData.end_date;\r\n              break;\r\n            case 'warehouse_location':\r\n              newVariables[variable.name] = formData.warehouse_location;\r\n              break;\r\n            case 'rental_price':\r\n              newVariables[variable.name] = formData.rental_price.toLocaleString('vi-VN') + ' VNĐ';\r\n              break;\r\n            default:\r\n              newVariables[variable.name] = '';\r\n          }\r\n        }\r\n      });\r\n      \r\n      setFormData(prev => ({ ...prev, variables: newVariables }));\r\n    }\r\n  };\r\n\r\n  // Generate contract number\r\n  const generateContractNumber = () => {\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = (now.getMonth() + 1).toString().padStart(2, '0');\r\n    const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\r\n    return `HD${year}${month}${random}`;\r\n  };\r\n\r\n  // Calculate contract end date\r\n  const calculateEndDate = (startDate, months = 12) => {\r\n    const start = new Date(startDate);\r\n    const end = new Date(start);\r\n    end.setMonth(end.getMonth() + months);\r\n    return end.toISOString().split('T')[0];\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Generate contract number if not provided\r\n      if (!formData.variables.contract_number) {\r\n        formData.variables.contract_number = generateContractNumber();\r\n      }\r\n      \r\n      // Create contract\r\n      const response = await contractService.createContract(formData);\r\n      \r\n      showSuccess('Tạo hợp đồng thành công');\r\n      onSuccess?.(response.data);\r\n      onHide();\r\n      resetForm();\r\n      \r\n    } catch (error) {\r\n      showError('Lỗi tạo hợp đồng: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reset form\r\n  const resetForm = () => {\r\n    setFormData({\r\n      contract_title: '',\r\n      customer_id: '',\r\n      customer_company_id: '',\r\n      template_id: '',\r\n      party_a_name: 'CÔNG TY KHO MVG',\r\n      party_a_address: 'Khu công nghiệp ABC, Bình Dương',\r\n      party_a_representative: 'Nguyễn Văn A',\r\n      party_a_position: 'Giám đốc',\r\n      party_a_id_number: '123456789',\r\n      warehouse_location: '',\r\n      warehouse_area: 0,\r\n      rental_price: 0,\r\n      deposit_amount: 0,\r\n      service_fee: 0,\r\n      start_date: '',\r\n      end_date: '',\r\n      auto_renewal: false,\r\n      renewal_period: 12,\r\n      payment_cycle: 'monthly',\r\n      payment_due_date: 5,\r\n      payment_method: 'Chuyển khoản',\r\n      late_fee_percentage: 2.0,\r\n      special_terms: '',\r\n      notes: '',\r\n      assigned_to: user?.id || '',\r\n      variables: {}\r\n    });\r\n    setSelectedCustomer(null);\r\n    setSelectedTemplate(null);\r\n    setActiveTab('basic');\r\n  };\r\n\r\n  // Format currency\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('vi-VN').format(amount);\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={onHide} size=\"xl\" scrollable>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <i className=\"fas fa-plus-circle me-2\"></i>\r\n          Tạo hợp đồng mới\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      \r\n      <Modal.Body>\r\n        <Form onSubmit={handleSubmit}>\r\n          <Tabs \r\n            activeKey={activeTab} \r\n            onSelect={setActiveTab}\r\n            className=\"mb-3\"\r\n          >\r\n            {/* Tab 1: Basic Info */}\r\n            <Tab eventKey=\"basic\" title=\"Thông tin cơ bản\">\r\n              <Row>\r\n                <Col md={6}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chọn khách hàng *</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.customer_id}\r\n                      onChange={(e) => handleCustomerSelect(e.target.value)}\r\n                      required\r\n                    >\r\n                      <option value=\"\">-- Chọn khách hàng --</option>\r\n                      {customers.map(customer => (\r\n                        <option key={customer.id} value={customer.id}>\r\n                          {customer.company_name || customer.full_name} \r\n                          ({customer.customer_code})\r\n                        </option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                  \r\n                  {selectedCustomer && (\r\n                    <Alert variant=\"info\">\r\n                      <strong>Thông tin khách hàng:</strong><br/>\r\n                      <small>\r\n                        SĐT: {selectedCustomer.phone}<br/>\r\n                        Email: {selectedCustomer.email}<br/>\r\n                        Địa chỉ: {selectedCustomer.address}\r\n                      </small>\r\n                    </Alert>\r\n                  )}\r\n                </Col>\r\n                \r\n                <Col md={6}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chọn mẫu hợp đồng *</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.template_id}\r\n                      onChange={(e) => handleTemplateSelect(e.target.value)}\r\n                      required\r\n                    >\r\n                      <option value=\"\">-- Chọn mẫu hợp đồng --</option>\r\n                      {templates.map(template => (\r\n                        <option key={template.id} value={template.id}>\r\n                          {template.template_name}\r\n                          {template.is_default && ' (Mặc định)'}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                  \r\n                  {selectedTemplate && (\r\n                    <Alert variant=\"success\">\r\n                      <strong>Mẫu đã chọn:</strong><br/>\r\n                      <small>\r\n                        Mã: {selectedTemplate.template_code}<br/>\r\n                        Phiên bản: {selectedTemplate.version}<br/>\r\n                        Loại: {selectedTemplate.template_type}\r\n                      </small>\r\n                    </Alert>\r\n                  )}\r\n                </Col>\r\n              </Row>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Tiêu đề hợp đồng *</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={formData.contract_title}\r\n                  onChange={(e) => setFormData(prev => ({\r\n                    ...prev,\r\n                    contract_title: e.target.value\r\n                  }))}\r\n                  placeholder=\"VD: Hợp đồng thuê kho - Công ty ABC\"\r\n                  required\r\n                />\r\n              </Form.Group>\r\n            </Tab>\r\n\r\n            {/* Tab 2: Contract Terms */}\r\n            <Tab eventKey=\"terms\" title=\"Điều khoản hợp đồng\">\r\n              <Row>\r\n                <Col md={6}>\r\n                  <h5>Thông tin kho</h5>\r\n                  \r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Vị trí kho *</Form.Label>\r\n                    <Form.Control\r\n                      type=\"text\"\r\n                      value={formData.warehouse_location}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setFormData(prev => ({\r\n                          ...prev,\r\n                          warehouse_location: value,\r\n                          variables: {\r\n                            ...prev.variables,\r\n                            warehouse_location: value\r\n                          }\r\n                        }));\r\n                      }}\r\n                      placeholder=\"VD: Khu A, Lô 01, Tầng 1\"\r\n                      required\r\n                    />\r\n                  </Form.Group>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Diện tích (m²) *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          step=\"0.1\"\r\n                          min=\"0\"\r\n                          value={formData.warehouse_area}\r\n                          onChange={(e) => {\r\n                            const value = parseFloat(e.target.value) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              warehouse_area: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                warehouse_area: value\r\n                              }\r\n                            }));\r\n                          }}\r\n                          required\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Giá thuê/tháng (VNĐ) *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          min=\"0\"\r\n                          value={formData.rental_price}\r\n                          onChange={(e) => {\r\n                            const value = parseInt(e.target.value) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              rental_price: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                rental_price: formatCurrency(value) + ' VNĐ'\r\n                              }\r\n                            }));\r\n                          }}\r\n                          required\r\n                        />\r\n                        {formData.rental_price > 0 && formData.warehouse_area > 0 && (\r\n                          <Form.Text className=\"text-muted\">\r\n                            Giá/m²: {formatCurrency(Math.round(formData.rental_price / formData.warehouse_area))} VNĐ/m²\r\n                          </Form.Text>\r\n                        )}\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Tiền cọc (VNĐ)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          min=\"0\"\r\n                          value={formData.deposit_amount}\r\n                          onChange={(e) => {\r\n                            const value = parseInt(e.target.value) || 0;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              deposit_amount: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                deposit_amount: formatCurrency(value) + ' VNĐ'\r\n                              }\r\n                            }));\r\n                          }}\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Phí dịch vụ (VNĐ)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          min=\"0\"\r\n                          value={formData.service_fee}\r\n                          onChange={(e) => setFormData(prev => ({\r\n                            ...prev,\r\n                            service_fee: parseInt(e.target.value) || 0\r\n                          }))}\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n                </Col>\r\n\r\n                <Col md={6}>\r\n                  <h5>Thời hạn & Thanh toán</h5>\r\n                  \r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Ngày bắt đầu *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"date\"\r\n                          value={formData.start_date}\r\n                          onChange={(e) => {\r\n                            const startDate = e.target.value;\r\n                            const endDate = calculateEndDate(startDate, formData.renewal_period);\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              start_date: startDate,\r\n                              end_date: endDate,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                start_date: new Date(startDate).toLocaleDateString('vi-VN'),\r\n                                end_date: new Date(endDate).toLocaleDateString('vi-VN')\r\n                              }\r\n                            }));\r\n                          }}\r\n                          required\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Ngày kết thúc *</Form.Label>\r\n                        <Form.Control\r\n                          type=\"date\"\r\n                          value={formData.end_date}\r\n                          onChange={(e) => {\r\n                            const value = e.target.value;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              end_date: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                end_date: new Date(value).toLocaleDateString('vi-VN')\r\n                              }\r\n                            }));\r\n                          }}\r\n                          min={formData.start_date}\r\n                          required\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>Chu kỳ thanh toán</Form.Label>\r\n                    <Form.Select\r\n                      value={formData.payment_cycle}\r\n                      onChange={(e) => setFormData(prev => ({\r\n                        ...prev,\r\n                        payment_cycle: e.target.value,\r\n                        variables: {\r\n                          ...prev.variables,\r\n                          payment_cycle: e.target.value === 'monthly' ? 'Hàng tháng' :\r\n                                        e.target.value === 'quarterly' ? 'Hàng quý' : 'Hàng năm'\r\n                        }\r\n                      }))}\r\n                    >\r\n                      <option value=\"monthly\">Hàng tháng</option>\r\n                      <option value=\"quarterly\">Hàng quý</option>\r\n                      <option value=\"yearly\">Hàng năm</option>\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Hạn thanh toán (ngày)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          max=\"31\"\r\n                          value={formData.payment_due_date}\r\n                          onChange={(e) => {\r\n                            const value = parseInt(e.target.value) || 5;\r\n                            setFormData(prev => ({\r\n                              ...prev,\r\n                              payment_due_date: value,\r\n                              variables: {\r\n                                ...prev.variables,\r\n                                payment_due_date: value\r\n                              }\r\n                            }));\r\n                          }}\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                    \r\n                    <Col md={6}>\r\n                      <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Phí trễ hạn (%)</Form.Label>\r\n                        <Form.Control\r\n                          type=\"number\"\r\n                          step=\"0.1\"\r\n                          min=\"0\"\r\n                          max=\"10\"\r\n                          value={formData.late_fee_percentage}\r\n                          onChange={(e) => setFormData(prev => ({\r\n                            ...prev,\r\n                            late_fee_percentage: parseFloat(e.target.value) || 2.0\r\n                          }))}\r\n                        />\r\n                      </Form.Group>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Check\r\n                      type=\"checkbox\"\r\n                      id=\"auto_renewal\"\r\n                      label=\"Tự động gia hạn\"\r\n                      checked={formData.auto_renewal}\r\n                      onChange={(e) => setFormData(prev => ({\r\n                        ...prev,\r\n                        auto_renewal: e.target.checked\r\n                      }))}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Điều khoản đặc biệt</Form.Label>\r\n                <Form.Control\r\n                  as=\"textarea\"\r\n                  rows={3}\r\n                  value={formData.special_terms}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value;\r\n                    setFormData(prev => ({\r\n                      ...prev,\r\n                      special_terms: value,\r\n                      variables: {\r\n                        ...prev.variables,\r\n                        special_terms: value\r\n                      }\r\n                    }));\r\n                  }}\r\n                  placeholder=\"Các điều khoản đặc biệt khác...\"\r\n                />\r\n              </Form.Group>\r\n            </Tab>\r\n\r\n            {/* Tab 3: Template Variables */}\r\n            <Tab eventKey=\"variables\" title=\"Biến mẫu\" disabled={!selectedTemplate}>\r\n              {selectedTemplate && selectedTemplate.variables && (\r\n                <div>\r\n                  <Alert variant=\"info\">\r\n                    <i className=\"fas fa-info-circle me-2\"></i>\r\n                    Các biến này sẽ được thay thế trong nội dung hợp đồng cuối cùng.\r\n                  </Alert>\r\n                  \r\n                  <Row>\r\n                    {(typeof selectedTemplate.variables === 'string' ? JSON.parse(selectedTemplate.variables) : selectedTemplate.variables || []).map(variable => (\r\n                      <Col md={6} key={variable.name}>\r\n                        <Form.Group className=\"mb-3\">\r\n                          <Form.Label>\r\n                            {variable.description || variable.name}\r\n                            {variable.required && <span className=\"text-danger\">*</span>}\r\n                          </Form.Label>\r\n                          \r\n                          {variable.type === 'boolean' ? (\r\n                            <Form.Check\r\n                              type=\"checkbox\"\r\n                              checked={formData.variables[variable.name] === 'true'}\r\n                              onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                variables: {\r\n                                  ...prev.variables,\r\n                                  [variable.name]: e.target.checked.toString()\r\n                                }\r\n                              }))}\r\n                            />\r\n                          ) : (\r\n                            <Form.Control\r\n                              type={variable.type === 'date' ? 'date' : \r\n                                   variable.type === 'number' ? 'number' : 'text'}\r\n                              value={formData.variables[variable.name] || ''}\r\n                              onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                variables: {\r\n                                  ...prev.variables,\r\n                                  [variable.name]: e.target.value\r\n                                }\r\n                              }))}\r\n                              required={variable.required}\r\n                              placeholder={`{{${variable.name}}}`}\r\n                            />\r\n                          )}\r\n                          \r\n                          <Form.Text className=\"text-muted\">\r\n                            Biến: <code>{`{{${variable.name}}}`}</code>\r\n                          </Form.Text>\r\n                        </Form.Group>\r\n                      </Col>\r\n                    ))}\r\n                  </Row>\r\n                </div>\r\n              )}\r\n            </Tab>\r\n\r\n            {/* Tab 4: Preview */}\r\n            <Tab eventKey=\"preview\" title=\"Xem trước\" disabled={!selectedTemplate}>\r\n              {selectedTemplate && (\r\n                <div>\r\n                  <Alert variant=\"success\">\r\n                    <i className=\"fas fa-eye me-2\"></i>\r\n                    Xem trước nội dung hợp đồng với dữ liệu đã nhập\r\n                  </Alert>\r\n                  \r\n                  <Card>\r\n                    <Card.Body>\r\n                      <div \r\n                        className=\"contract-preview\"\r\n                        dangerouslySetInnerHTML={{\r\n                          __html: selectedTemplate.template_content.replace(\r\n                            /\\{\\{(\\w+)\\}\\}/g,\r\n                            (match, varName) => formData.variables[varName] || `[${varName}]`\r\n                          )\r\n                        }}\r\n                        style={{ \r\n                          border: '1px solid #ddd', \r\n                          padding: '20px',\r\n                          backgroundColor: 'white',\r\n                          fontFamily: 'Times New Roman, serif'\r\n                        }}\r\n                      />\r\n                    </Card.Body>\r\n                  </Card>\r\n                </div>\r\n              )}\r\n            </Tab>\r\n          </Tabs>\r\n\r\n          {/* Summary */}\r\n          {formData.customer_id && formData.template_id && (\r\n            <Alert variant=\"light\">\r\n              <Row>\r\n                <Col md={3}>\r\n                  <strong>Khách hàng:</strong><br/>\r\n                  {selectedCustomer?.company_name || selectedCustomer?.full_name}\r\n                </Col>\r\n                <Col md={3}>\r\n                  <strong>Mẫu hợp đồng:</strong><br/>\r\n                  {selectedTemplate?.template_name}\r\n                </Col>\r\n                <Col md={3}>\r\n                  <strong>Diện tích:</strong><br/>\r\n                  {formData.warehouse_area} m²\r\n                </Col>\r\n                <Col md={3}>\r\n                  <strong>Giá thuê:</strong><br/>\r\n                  {formatCurrency(formData.rental_price)} VNĐ/tháng\r\n                </Col>\r\n              </Row>\r\n            </Alert>\r\n          )}\r\n        </Form>\r\n      </Modal.Body>\r\n\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide} disabled={loading}>\r\n          Hủy\r\n        </Button>\r\n        \r\n        <Button \r\n          variant=\"primary\" \r\n          onClick={handleSubmit}\r\n          disabled={loading || !formData.customer_id || !formData.template_id}\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n              Đang tạo...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <i className=\"fas fa-save me-2\"></i>\r\n              Tạo hợp đồng\r\n            </>\r\n          )}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ContractCreator;","/**\r\n * Contract Service - API calls for contract management\r\n */\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\r\n\r\nclass ContractService {\r\n  async getAuthHeaders() {\r\n    const token = localStorage.getItem('token');\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    };\r\n  }\r\n\r\n  async handleResponse(response) {\r\n    const contentType = response.headers.get('content-type') || '';\r\n    // If response is JSON, parse it.\r\n    if (contentType.includes('application/json')) {\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(data.message || `HTTP error! status: ${response.status}`);\r\n      }\r\n      return data;\r\n    }\r\n\r\n    // For non-JSON responses (HTML/text), return text body for better error messages\r\n    const text = await response.text();\r\n    if (!response.ok) {\r\n      // try to extract useful message from HTML (strip tags)\r\n      const stripped = text.replace(/<[^>]+>/g, '').trim();\r\n      const message = stripped ? stripped : `HTTP error! status: ${response.status}`;\r\n      throw new Error(message);\r\n    }\r\n\r\n    // If OK but not JSON, return raw text\r\n    return { success: true, data: text };\r\n  }\r\n\r\n  // Contract Management\r\n  async getContracts(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contracts${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getContract(id) {\r\n    const response = await fetch(`${API_BASE}/contracts/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createContract(contractData) {\r\n    const response = await fetch(`${API_BASE}/contracts`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async updateContract(id, contractData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(contractData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async updateContractStatus(id, statusData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${id}/status`, {\r\n      method: 'PATCH',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(statusData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Contract Templates\r\n  async getContractTemplates(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contract-templates${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getContractTemplate(id) {\r\n    const response = await fetch(`${API_BASE}/contract-templates/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createContractTemplate(templateData) {\r\n    const response = await fetch(`${API_BASE}/contract-templates`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(templateData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async generateDocumentFromTemplate(templateId, generateData) {\r\n    const response = await fetch(`${API_BASE}/contract-templates/${templateId}/generate`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(generateData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Contract Documents\r\n  async getDocumentCategories() {\r\n    const response = await fetch(`${API_BASE}/contract-documents/categories`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getContractDocuments(contractId, params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contract-documents/${contractId}${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async getDocument(id) {\r\n    const response = await fetch(`${API_BASE}/contract-documents/document/${id}`, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createDocument(documentData) {\r\n    const response = await fetch(`${API_BASE}/contract-documents`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(documentData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async updateDocument(id, documentData) {\r\n    const response = await fetch(`${API_BASE}/contract-documents/${id}`, {\r\n      method: 'PUT',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(documentData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async createDocumentVersion(id, versionData = {}) {\r\n    const response = await fetch(`${API_BASE}/contract-documents/${id}/create-version`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(versionData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Workflow & Reviews\r\n  async submitForReview(contractId, reviewData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${contractId}/submit-review`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(reviewData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  async addReview(contractId, reviewData) {\r\n    const response = await fetch(`${API_BASE}/contracts/${contractId}/reviews`, {\r\n      method: 'POST',\r\n      headers: await this.getAuthHeaders(),\r\n      body: JSON.stringify(reviewData)\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n\r\n  // Statistics\r\n  async getContractStats(params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const url = `${API_BASE}/contracts/stats${queryString ? `?${queryString}` : ''}`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: await this.getAuthHeaders()\r\n    });\r\n    \r\n    return this.handleResponse(response);\r\n  }\r\n}\r\n\r\nconst contractService = new ContractService();\r\nexport default contractService;"],"names":["API_BASE","process","getAuthHeaders","noCache","arguments","length","undefined","token","localStorage","getItem","console","log","warn","headers","concat","handleResponse","response","data","json","ok","error","status","statusText","errors","forEach","err","path","param","msg","Error","message","getCustomers","queryString","URLSearchParams","toString","url","fetch","method","this","getCustomer","id","createCustomer","customerData","body","JSON","stringify","updateCustomer","deleteCustomer","getCustomerContracts","customerId","createContract","contractData","getExpiringContracts","days","getCustomerStats","_ref","show","onHide","onSuccess","user","useAuth","showSuccess","showError","useNotification","loading","setLoading","useState","activeTab","setActiveTab","customers","setCustomers","templates","setTemplates","selectedCustomer","setSelectedCustomer","selectedTemplate","setSelectedTemplate","formData","setFormData","contract_title","customer_id","customer_company_id","template_id","party_a_name","party_a_address","party_a_representative","party_a_position","party_a_id_number","warehouse_location","warehouse_area","rental_price","deposit_amount","service_fee","start_date","end_date","auto_renewal","renewal_period","payment_cycle","payment_due_date","payment_method","late_fee_percentage","special_terms","notes","assigned_to","variables","loadInitialData","useCallback","async","customersResponse","templatesResponse","Promise","all","customerService","limit","contractService","getContractTemplates","is_active","useEffect","handleSubmit","e","preventDefault","contract_number","generateContractNumber","now","Date","year","getFullYear","month","getMonth","padStart","random","Math","floor","resetForm","formatCurrency","amount","Intl","NumberFormat","format","_jsxs","Modal","size","scrollable","children","_jsx","Header","closeButton","Title","className","Body","Form","onSubmit","Tabs","activeKey","onSelect","Tab","eventKey","title","Row","Col","md","Group","Label","Select","value","onChange","customer","find","c","parseInt","prev","_customerData$compani","_customerData$compani2","_customerData$compani3","_customerData$compani4","_customerData$compani5","_customerData$compani6","_customerData$compani7","_customerData$compani8","_customerData$compani9","_customerData$compani0","_objectSpread","companies","company_name","full_name","party_b_name","party_b_address","invoice_address","address","party_b_representative","contact_person","party_b_position","party_b_tax_code","tax_code","warehouse_purpose","handleCustomerSelect","target","required","map","customer_code","Alert","variant","phone","email","templateId","template","t","templateVars","parse","newVariables","variable","name","toLocaleString","handleTemplateSelect","template_name","is_default","template_code","version","template_type","Control","type","placeholder","step","min","parseFloat","Text","round","startDate","endDate","months","start","end","setMonth","toISOString","split","calculateEndDate","toLocaleDateString","max","Check","label","checked","as","rows","disabled","description","Card","dangerouslySetInnerHTML","__html","template_content","replace","match","varName","style","border","padding","backgroundColor","fontFamily","Footer","Button","onClick","_Fragment","get","includes","text","stripped","trim","success","getContracts","getContract","updateContract","updateContractStatus","statusData","getContractTemplate","createContractTemplate","templateData","generateDocumentFromTemplate","generateData","getDocumentCategories","getContractDocuments","contractId","getDocument","createDocument","documentData","updateDocument","createDocumentVersion","versionData","submitForReview","reviewData","addReview","getContractStats"],"ignoreList":[],"sourceRoot":""}
{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":9,"numPassedTests":100,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":10,"numTotalTests":101,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1765437952090,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["AIService","getOptimalAIConfig"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"AIService getOptimalAIConfig should return lowest cost active config","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return lowest cost active config"},{"ancestorTitles":["AIService","getOptimalAIConfig"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService getOptimalAIConfig should return null if no config found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if no config found"},{"ancestorTitles":["AIService","getOptimalAIConfig"],"duration":49,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeNull\u001b[2m()\u001b[22m\n\nReceived: \u001b[31m{\"api_key\": \"e7915664f832f619cff1712101a101de:65734fb998a117bcdbef903067111a9c60597717f583779888b6fe2bad6898c65e11fdf963dbca:35f203901d1cf0dd80f1c026a6012e2d\", \"cost_per_1k_tokens\": \"0.001000\", \"cost_per_token\": \"0.000001\", \"created_at\": 2025-12-05T08:31:23.000Z, \"created_by\": 1, \"id\": 1, \"is_active\": 1, \"max_tokens\": 1000, \"model\": \"gemini-pro\", \"priority\": 1, \"provider\": \"gemini\", \"temperature\": \"0.70\", \"total_cost\": \"0.022000\", \"updated_at\": 2025-12-11T07:25:38.000Z, \"usage_count\": 509, \"user_id\": 1}\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeNull\u001b[2m()\u001b[22m\n\nReceived: \u001b[31m{\"api_key\": \"e7915664f832f619cff1712101a101de:65734fb998a117bcdbef903067111a9c60597717f583779888b6fe2bad6898c65e11fdf963dbca:35f203901d1cf0dd80f1c026a6012e2d\", \"cost_per_1k_tokens\": \"0.001000\", \"cost_per_token\": \"0.000001\", \"created_at\": 2025-12-05T08:31:23.000Z, \"created_by\": 1, \"id\": 1, \"is_active\": 1, \"max_tokens\": 1000, \"model\": \"gemini-pro\", \"priority\": 1, \"provider\": \"gemini\", \"temperature\": \"0.70\", \"total_cost\": \"0.022000\", \"updated_at\": 2025-12-11T07:25:38.000Z, \"usage_count\": 509, \"user_id\": 1}\u001b[39m\n    at Object.toBeNull (C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\services\\AIService.test.js:53:28)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"AIService getOptimalAIConfig should handle database errors gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle database errors gracefully"},{"ancestorTitles":["AIService","detectDataQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService detectDataQuery should detect data query keywords","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should detect data query keywords"},{"ancestorTitles":["AIService","detectDataQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService detectDataQuery should not detect general conversation","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not detect general conversation"},{"ancestorTitles":["AIService","detectDataQuery"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AIService detectDataQuery should be case-insensitive","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should be case-insensitive"},{"ancestorTitles":["AIService","extractSQLFromResponse"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService extractSQLFromResponse should extract SQL from <SQL> tags","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should extract SQL from <SQL> tags"},{"ancestorTitles":["AIService","extractSQLFromResponse"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService extractSQLFromResponse should extract SQL without tags if starts with SELECT","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should extract SQL without tags if starts with SELECT"},{"ancestorTitles":["AIService","extractSQLFromResponse"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService extractSQLFromResponse should return null if no SQL found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if no SQL found"},{"ancestorTitles":["AIService","extractSQLFromResponse"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService extractSQLFromResponse should handle case-insensitive tags","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle case-insensitive tags"},{"ancestorTitles":["AIService","updateAIConfigUsage"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIService updateAIConfigUsage should increment usage count and cost","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should increment usage count and cost"},{"ancestorTitles":["AIService","updateAIConfigUsage"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"AIService updateAIConfigUsage should handle database errors gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle database errors gracefully"}],"endTime":1765437953219,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIService › getOptimalAIConfig › should handle database errors gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeNull\u001b[2m()\u001b[22m\n\n    Received: \u001b[31m{\"api_key\": \"e7915664f832f619cff1712101a101de:65734fb998a117bcdbef903067111a9c60597717f583779888b6fe2bad6898c65e11fdf963dbca:35f203901d1cf0dd80f1c026a6012e2d\", \"cost_per_1k_tokens\": \"0.001000\", \"cost_per_token\": \"0.000001\", \"created_at\": 2025-12-05T08:31:23.000Z, \"created_by\": 1, \"id\": 1, \"is_active\": 1, \"max_tokens\": 1000, \"model\": \"gemini-pro\", \"priority\": 1, \"provider\": \"gemini\", \"temperature\": \"0.70\", \"total_cost\": \"0.022000\", \"updated_at\": 2025-12-11T07:25:38.000Z, \"usage_count\": 509, \"user_id\": 1}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mAIService\u001b[39m\u001b[33m.\u001b[39mgetOptimalAIConfig(\u001b[35m1\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'openai'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 52 |\u001b[39m             \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 53 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBeNull (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/AIService.test.js\u001b[39m\u001b[0m\u001b[2m:53:28)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\services\\AIService.test.js","startTime":1765437952177,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Contract Management API"],"duration":68,"failureDetails":[],"failureMessages":[],"fullName":"Contract Management API should fetch the list of contracts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should fetch the list of contracts"},{"ancestorTitles":["Contract Management API"],"duration":45,"failureDetails":[],"failureMessages":[],"fullName":"Contract Management API should create a new contract","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a new contract"},{"ancestorTitles":["Contract Management API"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Contract Management API should fetch contract details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should fetch contract details"}],"endTime":1765437954280,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\integration\\contracts.test.js","startTime":1765437953228,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EncryptionService","getEncryptionKey"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService getEncryptionKey should throw error if ENCRYPTION_KEY not set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if ENCRYPTION_KEY not set"},{"ancestorTitles":["EncryptionService","getEncryptionKey"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService getEncryptionKey should throw error if ENCRYPTION_KEY too short","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error if ENCRYPTION_KEY too short"},{"ancestorTitles":["EncryptionService","getEncryptionKey"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService getEncryptionKey should return valid key for correct input","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return valid key for correct input"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":58,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should encrypt and decrypt text correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should encrypt and decrypt text correctly"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":111,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should produce different encrypted output each time","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should produce different encrypted output each time"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should return null for null input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return null for null input"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should return null for empty string","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return null for empty string"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt encrypted text should contain iv:encrypted:tag format","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"encrypted text should contain iv:encrypted:tag format"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should throw error for invalid encrypted format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error for invalid encrypted format"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":57,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should throw error for tampered encrypted data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error for tampered encrypted data"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":55,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should handle special characters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle special characters"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":58,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should handle Unicode characters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle Unicode characters"},{"ancestorTitles":["EncryptionService","encrypt/decrypt"],"duration":56,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encrypt/decrypt should handle long text","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle long text"},{"ancestorTitles":["EncryptionService","maskAPIKey"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService maskAPIKey should mask API key showing first 4 and last 4 chars","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should mask API key showing first 4 and last 4 chars"},{"ancestorTitles":["EncryptionService","maskAPIKey"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService maskAPIKey should handle short API keys","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle short API keys"},{"ancestorTitles":["EncryptionService","maskAPIKey"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService maskAPIKey should return **** for null or empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return **** for null or empty"},{"ancestorTitles":["EncryptionService","maskAPIKey"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService maskAPIKey should limit masked middle section","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should limit masked middle section"},{"ancestorTitles":["EncryptionService","hash"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService hash should generate consistent hash for same input","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate consistent hash for same input"},{"ancestorTitles":["EncryptionService","hash"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService hash should generate different hashes for different inputs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate different hashes for different inputs"},{"ancestorTitles":["EncryptionService","hash"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService hash should return 64-character hex string (SHA-256)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 64-character hex string (SHA-256)"},{"ancestorTitles":["EncryptionService","generateToken"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService generateToken should generate random tokens","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate random tokens"},{"ancestorTitles":["EncryptionService","generateToken"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService generateToken should generate token with specified length","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should generate token with specified length"},{"ancestorTitles":["EncryptionService","generateToken"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService generateToken should generate hexadecimal string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate hexadecimal string"},{"ancestorTitles":["EncryptionService","secureCompare"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService secureCompare should return true for identical strings","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true for identical strings"},{"ancestorTitles":["EncryptionService","secureCompare"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService secureCompare should return false for different strings","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false for different strings"},{"ancestorTitles":["EncryptionService","secureCompare"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService secureCompare should return false for null/undefined","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return false for null/undefined"},{"ancestorTitles":["EncryptionService","secureCompare"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService secureCompare should be timing-safe (same time for different lengths)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should be timing-safe (same time for different lengths)"},{"ancestorTitles":["EncryptionService","encryptObject/decryptObject"],"duration":58,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encryptObject/decryptObject should encrypt and decrypt object correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should encrypt and decrypt object correctly"},{"ancestorTitles":["EncryptionService","encryptObject/decryptObject"],"duration":56,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encryptObject/decryptObject should handle arrays","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle arrays"},{"ancestorTitles":["EncryptionService","encryptObject/decryptObject"],"duration":57,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService encryptObject/decryptObject should handle nested objects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle nested objects"},{"ancestorTitles":["EncryptionService","Security Tests"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService Security Tests should not leak information through error messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not leak information through error messages"},{"ancestorTitles":["EncryptionService","Security Tests"],"duration":56,"failureDetails":[],"failureMessages":[],"fullName":"EncryptionService Security Tests should use authenticated encryption (GCM)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use authenticated encryption (GCM)"}],"endTime":1765437955092,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\utils\\encryption.test.js","startTime":1765437954286,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Customer Management API"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"Customer Management API should fetch the list of customers","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should fetch the list of customers"},{"ancestorTitles":["Customer Management API"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"Customer Management API should create a new customer","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create a new customer"},{"ancestorTitles":["Customer Management API"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"Customer Management API should fetch customer details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should fetch customer details"},{"ancestorTitles":["Customer Management API"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Customer Management API should update customer details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update customer details"},{"ancestorTitles":["Customer Management API"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Customer Management API should delete the customer","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should delete the customer"}],"endTime":1765437955538,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\integration\\customers.test.js","startTime":1765437955112,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":62,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/contracts returns normalized list with pagination","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"GET /api/contracts returns normalized list with pagination"},{"ancestorTitles":[],"duration":45,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/contracts/:id returns 200 with contract detail when found","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"GET /api/contracts/:id returns 200 with contract detail when found"}],"endTime":1765437955713,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\contracts_list.test.js","startTime":1765437955545,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should accept valid SELECT query","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should accept valid SELECT query"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject non-SELECT queries","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should reject non-SELECT queries"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject queries with SQL comments","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should reject queries with SQL comments"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject UNION-based injection attempts","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should reject UNION-based injection attempts"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject dangerous keywords","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should reject dangerous keywords"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject multi-statement queries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject multi-statement queries"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject queries accessing forbidden tables","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject queries accessing forbidden tables"},{"ancestorTitles":["DatabaseService","validateQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService validateQuery should reject queries that are too long","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject queries that are too long"},{"ancestorTitles":["DatabaseService","getAccessibleTables"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService getAccessibleTables should return base tables for regular user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return base tables for regular user"},{"ancestorTitles":["DatabaseService","getAccessibleTables"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService getAccessibleTables should return all tables for admin","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return all tables for admin"},{"ancestorTitles":["DatabaseService","getAccessibleTables"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService getAccessibleTables should include users table with user_view permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should include users table with user_view permission"},{"ancestorTitles":["DatabaseService","extractTablesFromQuery"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService extractTablesFromQuery should extract table from simple SELECT","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should extract table from simple SELECT"},{"ancestorTitles":["DatabaseService","extractTablesFromQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService extractTablesFromQuery should extract tables from JOIN queries","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should extract tables from JOIN queries"},{"ancestorTitles":["DatabaseService","extractTablesFromQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService extractTablesFromQuery should handle multiple joins","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle multiple joins"},{"ancestorTitles":["DatabaseService","extractTablesFromQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService extractTablesFromQuery should not duplicate table names","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not duplicate table names"},{"ancestorTitles":["DatabaseService","executeSafeQuery"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService executeSafeQuery should execute valid query successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should execute valid query successfully"},{"ancestorTitles":["DatabaseService","executeSafeQuery"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService executeSafeQuery should limit large result sets","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should limit large result sets"},{"ancestorTitles":["DatabaseService","executeSafeQuery"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService executeSafeQuery should reject invalid query","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject invalid query"},{"ancestorTitles":["DatabaseService","executeSafeQuery"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"DatabaseService executeSafeQuery should track execution time","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track execution time"}],"endTime":1765437955843,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\services\\DatabaseService.test.js","startTime":1765437955718,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should authenticate valid token","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should authenticate valid token"},{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should reject request without token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should reject request without token"},{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should reject invalid token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject invalid token"},{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should reject expired token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject expired token"},{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should reject token for non-existent user","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject token for non-existent user"},{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should reject token for disabled user","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject token for disabled user"},{"ancestorTitles":["Auth Middleware","authenticateToken"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware authenticateToken should update last_login timestamp","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should update last_login timestamp"},{"ancestorTitles":["Auth Middleware","requireRole"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireRole should allow user with correct role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow user with correct role"},{"ancestorTitles":["Auth Middleware","requireRole"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireRole should reject user with incorrect role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject user with incorrect role"},{"ancestorTitles":["Auth Middleware","requireRole"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireRole should reject unauthenticated request","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject unauthenticated request"},{"ancestorTitles":["Auth Middleware","requirePermission"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requirePermission should allow admin with all permissions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow admin with all permissions"},{"ancestorTitles":["Auth Middleware","requirePermission"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requirePermission should allow user with specific permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow user with specific permission"},{"ancestorTitles":["Auth Middleware","requirePermission"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requirePermission should reject user without permission","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject user without permission"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should allow admin access to all resources","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow admin access to all resources"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should allow manager access to all projects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow manager access to all projects"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should allow staff access to assigned projects","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow staff access to assigned projects"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should reject staff without project assignment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject staff without project assignment"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should check customer access through projects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should check customer access through projects"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should return 400 for missing resource ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 for missing resource ID"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should handle database errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle database errors"},{"ancestorTitles":["Auth Middleware","requireResourceAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware requireResourceAccess should allow access to default resource types","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow access to default resource types"}],"endTime":1765437955988,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\middleware\\auth.test.js","startTime":1765437955851,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":61,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/contracts/debug returns normalized data and anomalies","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"GET /api/contracts/debug returns normalized data and anomalies"}],"endTime":1765437956119,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\unit\\contracts.test.js","startTime":1765437955996,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Route Integration Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Route Integration Tests should have basic route files","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have basic route files"},{"ancestorTitles":["Route Integration Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Route Integration Tests should have middleware files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have middleware files"},{"ancestorTitles":["Route Integration Tests"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Route Integration Tests should have service files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have service files"}],"endTime":1765437956153,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\integration\\routes\\ai-assistant.test.js","startTime":1765437956123,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Route Integration Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Route Integration Tests should have basic route files","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have basic route files"},{"ancestorTitles":["Route Integration Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Route Integration Tests should have middleware files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have middleware files"},{"ancestorTitles":["Route Integration Tests"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Route Integration Tests should have service files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have service files"}],"endTime":1765437956186,"message":"","name":"C:\\Users\\Admin\\Documents\\GitHub\\MVG_InventoryManagement\\KinhDoanh\\tests\\integration\\routes\\auth.test.js","startTime":1765437956158,"status":"passed","summary":""}],"wasInterrupted":false}
